var C=Symbol();var q=(r,n)=>({_:C,r,m:n});var D=(r,n,s)=>((typeof n!="object"||n._===C||Array.isArray(n))&&(s=n,n=void 0),{_:C,a:n,c:s?Array.isArray(s)?s:[s]:[],t:r.toUpperCase()});var F=function(r){return Array.isArray(r)?r:[r]};var P=(r,n)=>{if(r===n)return!0;if(r instanceof Date&&n instanceof Date)return r.getTime()===n.getTime();if(!r||!n||typeof r!="object"&&typeof n!="object")return r===n;if(r==null||n===null||n===void 0||r.prototype!==n.prototype)return!1;let s=Object.keys(r);return s.length!==Object.keys(n).length?!1:s.every(c=>P(r[c],n[c]))};var I=r=>{let n=[];for(let s=0;s<r.childNodes.length;s++){let c=r.childNodes[s];if(c instanceof Text)n.push(c.textContent??"");else{let g={};for(let a=0;a<c.attributes.length;a++){let N=c.attributes[a];g[N.name]=N.value}n.push(D(c.nodeName,g,I(c)))}}return n};var _=(r,n)=>{let s=new WeakMap,c=a=>{if(s.has(a)){let N=s.get(a);s.delete(N);for(let d in N.proxy)typeof N.proxy[d]=="object"&&c(N.proxy[d]);N.revoke()}},g=a=>{if(s.has(a))return s.get(a);for(let d in a)a[d]&&typeof a[d]=="object"&&(a[d]=g(a[d]));let N=Proxy.revocable(a,{deleteProperty:(d,A)=>{if(Reflect.has(d,A)){c(d);let l=Reflect.deleteProperty(d,A);return l&&n(),l}return!0},set:(d,A,l)=>{let x=d[A];return x!==l&&(typeof x=="object"&&c(x),l&&typeof l=="object"&&(l=g(l)),d[A]=l,n()),!0}});return s.set(N,a),N.proxy};return g(r)};var w=/[A-Z]+(?![a-z])|[A-Z]/g,G=(r,n)=>(n?"-":"")+r,oe=(r,n,s,c)=>{let g=0,a=(t,f,y)=>{if(f)for(let i in f){let e=f[i];if(e){let m=typeof e;if(m==="function"){let b=f[i]=o=>{g++;try{e(o)}catch{}g--,v()};t.addEventListener(i,b);continue}else{if(i==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let b="";for(let o in e)e[o]&&(b+=" "+o);e=b}}else if(i==="style"){if(typeof e=="object")if(Array.isArray(e))e=e.join(";");else{let b="";for(let o in e){let h=e[o];o=o.replace(w,G).toLowerCase(),Array.isArray(h)?b+=";"+o+":"+h.join(" "):h&&(b+=";"+o+":"+h)}e=b}}else{if(m==="boolean"){if(!e){t.removeAttribute(i);continue}e="true"}else m!=="string"&&(e=e.toString());i==="value"&&t.value!==e?t.value=e:i==="checked"&&(t.checked=f[i])}t.setAttribute(i,e)}}}if(y)for(let i in y)typeof y[i]=="function"?t.removeEventListener(i,y[i]):(!f||!(i in f)||!f[i])&&(i==="value"?t.value="":i==="checked"&&(t.checked=!1),t.removeAttribute(i))},N=[],d=[],A=t=>{let f=N.find(y=>y.r===t.r&&P(y.m,t.m));return f||(f={c:F(t.r(j,t.m)),m:t.m,r:t.r}),d.includes(f)||d.push(f),structuredClone(f.c)},l=(t,f,y,i)=>{let e=0,m=0;if(f)for(;e<f.length;e++){let o=f[e];if(o.r){let p=A(o);f.splice(e,1,...p),e--;continue}let h=!1;if(y)for(let p=e-m;p<y.length;p++){let u=y[p];if(u.t&&o.t===u.t||!u.t&&!o.t){h=!0,e!==p+m&&(t.insertBefore(t.childNodes[p+m],t.childNodes[e]),y.splice(e-m,0,...y.splice(p,1))),o.t?(a(t.childNodes[e],o.a,u.a),l(t.childNodes[e],o.c,u.c,u)):t.childNodes[e].textContent=typeof o=="string"?o:o.c;break}}if(!h){let p;if(o.t){p=document.createElement(o.t),o.a&&a(p,o.a),o.c&&l(p,o.c);let u=(E,M,T)=>{T&&(!M||M.t)?E.insertAdjacentElement(T,p):E.parentNode.insertBefore(p,E)};e===0?u(t,i,"afterbegin"):(y?.length??0)+m>e?u(t.childNodes[e]):u(t,i,"beforeend")}else{p=typeof o=="string"?o:o.c;let u=(E,M,T)=>{T&&(!M||M.t)?E.insertAdjacentText(T,p):E.parentNode.insertBefore(document.createTextNode(p),E.nextSibling)};e===0?u(t,i,"afterbegin"):(y?.length??0)+m>e?u(t.childNodes[e]):u(t,i,"beforeend")}m++}}let b=(y?.length??0)+m;if(b>=e)for(let o=b-1;o>=e;o--)t.childNodes[o].remove()};typeof s=="string"&&(s=JSON.parse(s)),s??={};let x=!0,H=()=>{x||(x=!0,Promise.resolve().then(v))},j=Object.getPrototypeOf(s)===Proxy.prototype?s:_(s,H),R=typeof r=="string"?document.querySelector(r)||document.body.appendChild(document.createElement("div")):r;if(typeof c=="string")try{c=JSON.parse(c)}catch{c=void 0}c??=I(R);let L=!0,k=!1,v=()=>{if(L&&!k&&x&&g<=0){k=!0,x=!1;let t=F(n(j));if(l(R,t,c),c=t,N=d,d=[],k=!1,x)throw new Error("update during render")}};return v(),[H,()=>{if(L){L=!1;for(let t=R.childNodes.length-1;t>=0;t--)R.childNodes[t].remove()}},j]};export{q as memo,oe as mount,D as node};
//# sourceMappingURL=staark.base.min.js.map
