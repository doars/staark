var g=Symbol();var L=(o,t,a)=>((typeof t!="object"||t._===g||Array.isArray(t))&&(a=t,t=void 0),{_:g,a:t,c:a?Array.isArray(a)?a:[a]:[],t:o.toUpperCase()});var h=function(o){return Array.isArray(o)?o:[o]};var l=o=>{var a;let t=[];for(let n=0;n<o.childNodes.length;n++){let e=o.childNodes[n];if(e instanceof Text)t.push((a=e.textContent)!=null?a:"");else{let c={};for(let r=0;r<e.attributes.length;r++){let f=e.attributes[r];c[f.name]=f.value}t.push(L(e.nodeName,c,l(e)))}}return t};var j=/[A-Z]+(?![a-z])|[A-Z]/g,I=(o,t)=>(t?"-":"")+o,T=(o,t,a)=>{if(t)for(let n in t){let e=t[n];if(e){let c=typeof e;if(c==="function"){o.addEventListener(n,e);continue}else{if(n==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let r="";for(let f in e)e[f]&&(r+=" "+f);e=r}}else if(n==="style"){if(typeof e=="object")if(Array.isArray(e))e=e.join(";");else{let r="";for(let f in e){let s=e[f];f=f.replace(j,I).toLowerCase(),Array.isArray(s)?r+=";"+f+":"+s.join(" "):s&&(r+=";"+f+":"+s)}e=r}}else{if(c==="boolean"){if(!e){o.removeAttribute(n);continue}e="true"}else c!=="string"&&(e=e.toString());n==="value"&&o.value!==e?o.value=e:n==="checked"&&(o.checked=t[n])}o.setAttribute(n,e)}}}if(a)for(let n in a)typeof a[n]=="function"?o.removeEventListener(n,a[n]):(!t||!(n in t)||!t[n])&&(n==="value"?o.value="":n==="checked"&&(o.checked=!1),o.removeAttribute(n))},Z=(o,t)=>{let a=(e,c,r,f)=>{var b,x,A;let s=0,u=0;if(c)for(;s<c.length;s++){let i=c[s],v=!1;if(r)for(let N=s-u;N<r.length;N++){let d=r[N];if(d.t&&i.t===d.t||!d.t&&!i.t){v=!0,s!==N+u&&(e.insertBefore(e.childNodes[N+u],e.childNodes[s]),r.splice(s-u,0,...r.splice(N,1))),i.t?(T(e.childNodes[s],i.a,d.a),a(e.childNodes[s],i.c,d.c,d)):e.childNodes[s].textContent=typeof i=="string"?i:i.c;break}}if(!v){let N;if(i.t){N=document.createElement(i.t),i.a&&T(N,i.a),i.c&&a(N,i.c);let d=(p,m,y)=>{y&&(!m||m.t)?p.insertAdjacentElement(y,N):p.parentNode.insertBefore(N,p)};s===0?d(e,f,"afterbegin"):((b=r==null?void 0:r.length)!=null?b:0)+u>s?d(e.childNodes[s]):d(e,f,"beforeend")}else{N=typeof i=="string"?i:i.c;let d=(p,m,y)=>{y&&(!m||m.t)?p.insertAdjacentText(y,N):p.parentNode.insertBefore(document.createTextNode(N),p.nextSibling)};s===0?d(e,f,"afterbegin"):((x=r==null?void 0:r.length)!=null?x:0)+u>s?d(e.childNodes[s]):d(e,f,"beforeend")}u++}}let E=((A=r==null?void 0:r.length)!=null?A:0)+u;if(E>=s)for(let i=E-1;i>=s;i--)e.childNodes[i].remove()},n=typeof o=="string"?document.querySelector(o)||document.body.appendChild(document.createElement("div")):o;if(typeof t=="string")try{t=JSON.parse(t)}catch(e){t=void 0}return t!=null||(t=l(n)),e=>{e=h(e),a(n,e,t),t=e}};export{L as node,Z as prepare};
//# sourceMappingURL=staark-patch.base.min.js.map
