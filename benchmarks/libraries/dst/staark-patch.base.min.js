var m="n";var b=(t,o,s)=>((typeof o!="object"||o._===m||Array.isArray(o))&&(s=o,o=void 0),{_:m,a:o,c:s?Array.isArray(s)?s:[s]:[],t:t.toUpperCase()});var h=t=>Array.isArray(t)?t:[t];var l=t=>{var s;let o=[];for(let n=0;n<t.childNodes.length;n++){let e=t.childNodes[n];if(e instanceof Text)o.push((s=e.textContent)!=null?s:"");else{let c={};for(let r=0;r<e.attributes.length;r++){let N=e.attributes[r];c[N.name]=N.value}o.push(b(e.nodeName,c,l(e)))}}return o};var M=/[A-Z]+(?![a-z])|[A-Z]/g,j=(t,o)=>(o?"-":"")+t,H=(t,o,s)=>{if(o)for(let n in o){let e=o[n];if(e){let c=typeof e;if(c==="function"){if(s&&s[n]){if(s[n]===e)continue;t.removeEventListener(n,s[n])}t.addEventListener(n,e)}else if(n==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let r="";for(let N in e)e[N]&&(r+=" "+N);e=r}t.className=e}else if(n==="style"){if(typeof e=="object")if(Array.isArray(e))for(let r of e){let[N,...i]=r.split(":");t.style.setProperty(N,i.join(":"))}else for(let r in e){let N=e[r];r=r.replace(M,j).toLowerCase(),Array.isArray(N)&&(N=N.join(" ")),t.style.setProperty(r,N.toString())}}else{if(c==="boolean"){if(!e){t.removeAttribute(n);continue}e="true"}else c!=="string"&&(e=e.toString());n==="value"&&t.value!==e?t.value=e:n==="checked"&&(t.checked=o[n]),t.setAttribute(n,e)}}}if(s)for(let n in s)(!o||!o[n])&&(typeof s[n]=="function"?t.removeEventListener(n,s[n]):(n==="value"?t.value="":n==="checked"&&(t.checked=!1),t.removeAttribute(n)))},V=(t,o)=>{let s=(e,c,r,N)=>{var v,L,x;let i=0,u=0;if(c)for(;i<c.length;i++){let a=c[i],A=!1;if(r)for(let d=i-u;d<r.length;d++){let f=r[d];if(f.t&&a.t===f.t||!f.t&&!a.t){A=!0,i!==d+u&&(e.insertBefore(e.childNodes[d+u],e.childNodes[i]),r.splice(i-u,0,...r.splice(d,1))),a.t?(H(e.childNodes[i],a.a,f.a),s(e.childNodes[i],a.c,f.c,f)):f!==a&&(e.childNodes[i].textContent=a);break}}if(!A){let d;if(a.t){d=document.createElement(a.t),a.a&&H(d,a.a),a.c&&s(d,a.c);let f=(p,y,g)=>{g&&(!y||y.t)?p.insertAdjacentElement(g,d):p.parentNode.insertBefore(d,p)};i===0?f(e,N,"afterbegin"):((v=r==null?void 0:r.length)!=null?v:0)+u>i?f(e.childNodes[i]):f(e,N,"beforeend")}else{let f=(p,y,g)=>{g&&(!y||y.t)?p.insertAdjacentText(g,a):p.parentNode.insertBefore(document.createTextNode(a),p)};i===0?f(e,N,"afterbegin"):((L=r==null?void 0:r.length)!=null?L:0)+u>i?f(e.childNodes[i]):f(e,N,"beforeend")}u++}}let E=((x=r==null?void 0:r.length)!=null?x:0)+u;if(E>=i)for(let a=E-1;a>=i;a--)e.childNodes[a].remove()},n=typeof t=="string"?document.querySelector(t)||document.body.appendChild(document.createElement("div")):t;if(typeof o=="string")try{o=JSON.parse(o)}catch(e){o=void 0}return o!=null||(o=l(n)),e=>{e=h(e),s(n,e,o),o=e}};export{b as node,V as prepare};
//# sourceMappingURL=staark-patch.base.min.js.map
