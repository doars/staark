"use strict";(()=>{var g=function(e,r){let n=window;for(let t=0;t<e.length-1;t++)(typeof n[e[t]]!="object"||!Array.isArray(n[e[t]]))&&(n[e[t]]={}),n=n[e[t]];n[e[e.length-1]]=r};var f=e=>{if(typeof e=="object"){let r=Array.isArray(e)?[]:{};for(let n in e)r[n]=f(e[n]);return r}return e};var l=(e,r,n)=>{let t=e;for(let i=0;i<r.length-1;i++){let o=r[i];o in t||(t[o]={}),t=t[o]}t[r[r.length-1]]=f(n)},u=(e,r)=>{let n=e;for(let t=0;t<r.length-1;t++)if(n=n[r[t]],!n)return;Array.isArray(n)?n.splice(parseInt(r[r.length-1]),1):delete n[r[r.length-1]]},s=(e,r,n=[])=>{let t=[];for(let i in e){let o=[...n,i];i in r?typeof e[i]=="object"&&typeof r[i]=="object"?t.unshift(...s(e[i],r[i],o)):e[i]!==r[i]&&t.unshift({type:"set",path:o,old:f(e[i]),new:f(r[i])}):t.unshift({type:"delete",path:o,old:f(e[i])})}for(let i in r)i in e||t.unshift({type:"set",path:[...n,i],new:f(r[i])});return t},c=(e,r)=>{for(let n of r)n.type==="set"?l(e,n.path,n.new):n.type==="delete"&&u(e,n.path);return e},y=(e,r)=>{for(let n of r)n.type==="set"?n.old===void 0?u(e,n.path):l(e,n.path,n.old):n.type==="delete"&&l(e,n.path,n.old);return e};var a=function(e,r){e=f(e),r=Object.assign({maximumHistory:50},r);let n=[],t=[];return{get:()=>f(e),set:i=>{i=f(i);let o=s(e,i);if(o.length>0){if(n.push(o),r.maximumHistory&&n.length>r.maximumHistory)for(let m=n.length-r.maximumHistory;m>0;m--)n.shift();t.splice(0)}return e=i,f(e)},undo:()=>{if(n.length>0){let i=n.pop();if(i){if(t.push(i),r.maximumHistory&&t.length>r.maximumHistory)for(let o=t.length-r.maximumHistory;o>0;o--)t.shift();e=y(e,i)}}return f(e)},redo:()=>{if(t.length>0){let i=t.pop();if(i){if(n.push(i),r.maximumHistory&&n.length>r.maximumHistory)for(let o=n.length-r.maximumHistory;o>0;o--)n.shift();e=c(e,i)}}return f(e)}}};g(["tiedliene"],{determineDiff:s,applyDiff:c,revertDiff:y,manageState:a});})();
//# sourceMappingURL=tiedliene.iife.min.js.map
