"use strict";(()=>{var g=function(n,r){let e=window;for(let i=0;i<n.length-1;i++)(typeof e[n[i]]!="object"||!Array.isArray(e[n[i]]))&&(e[n[i]]={}),e=e[n[i]];e[n[n.length-1]]=r};var u=(n,r,e)=>{let i=n;for(let t=0;t<r.length-1;t++){let o=r[t];o in i||(i[o]={}),i=i[o]}i[r[r.length-1]]=structuredClone(e)},y=(n,r)=>{let e=n;for(let i=0;i<r.length-1;i++)if(e=e[r[i]],!e)return;Array.isArray(e)?e.splice(parseInt(r[r.length-1]),1):delete e[r[r.length-1]]},s=(n,r,e=[])=>{let i=[];for(let t in n){let o=[...e,t];t in r?typeof n[t]=="object"&&typeof r[t]=="object"?i.unshift(...s(n[t],r[t],o)):n[t]!==r[t]&&i.unshift({type:"set",path:o,old:structuredClone(n[t]),new:structuredClone(r[t])}):i.unshift({type:"delete",path:o,old:structuredClone(n[t])})}for(let t in r)t in n||i.unshift({type:"set",path:[...e,t],new:structuredClone(r[t])});return i},f=(n,r)=>{for(let e of r)e.type==="set"?u(n,e.path,e.new):e.type==="delete"&&y(n,e.path);return n},l=(n,r)=>{for(let e of r)e.type==="set"?e.old===void 0?y(n,e.path):u(n,e.path,e.old):e.type==="delete"&&u(n,e.path,e.old);return n};var d=function(n,r){n=structuredClone(n),r=Object.assign({maximumHistory:50},r);let e=[],i=[];return{get:()=>structuredClone(n),set:t=>{t=structuredClone(t);let o=s(n,t);if(o.length>0){if(e.push(o),r.maximumHistory&&e.length>r.maximumHistory)for(let c=e.length-r.maximumHistory;c>0;c--)e.shift();i.splice(0)}return n=t,structuredClone(n)},undo:()=>{if(e.length>0){let t=e.pop();if(t){if(i.push(t),r.maximumHistory&&i.length>r.maximumHistory)for(let o=i.length-r.maximumHistory;o>0;o--)i.shift();n=l(n,t)}}return structuredClone(n)},redo:()=>{if(i.length>0){let t=i.pop();if(t){if(e.push(t),r.maximumHistory&&e.length>r.maximumHistory)for(let o=e.length-r.maximumHistory;o>0;o--)e.shift();n=f(n,t)}}return structuredClone(n)}}};g(["tiedliene"],{determineDiff:s,applyDiff:f,revertDiff:l,manageState:d});})();
//# sourceMappingURL=tiedliene.iife.min.js.map
