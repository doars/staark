var s=n=>{if(typeof n=="object")if(Array.isArray(n)){let r=[];for(let e=0;e<n.length;e++)r.push(s(n[e]));n=r}else{let r={};for(let e in n)r[e]=s(n[e]);n=r}return n};var c=(n,r,e)=>{let i=n;for(let t=0;t<r.length-1;t++){let o=r[t];o in i||(i[o]={}),i=i[o]}i[r[r.length-1]]=s(e)},m=(n,r)=>{let e=n;for(let i=0;i<r.length-1;i++)if(e=e[r[i]],!e)return;Array.isArray(e)?e.splice(parseInt(r[r.length-1]),1):delete e[r[r.length-1]]},f=(n,r,e=[])=>{let i=[];for(let t in n){let o=[...e,t];t in r?typeof n[t]=="object"&&typeof r[t]=="object"?i.unshift(...f(n[t],r[t],o)):n[t]!==r[t]&&i.unshift({type:"set",path:o,old:s(n[t]),new:s(r[t])}):i.unshift({type:"delete",path:o,old:s(n[t])})}for(let t in r)t in n||i.unshift({type:"set",path:[...e,t],new:s(r[t])});return i},l=(n,r)=>{for(let e of r)e.type==="set"?c(n,e.path,e.new):e.type==="delete"&&m(n,e.path);return n},g=(n,r)=>{for(let e of r)e.type==="set"?e.old===void 0?m(n,e.path):c(n,e.path,e.old):e.type==="delete"&&c(n,e.path,e.old);return n};var R=function(n,r){n=s(n),r=Object.assign({maximumHistory:50},r);let e=[],i=[];return{get:()=>s(n),set:t=>{t=s(t);let o=f(n,t);if(o.length>0){if(e.push(o),r.maximumHistory&&e.length>r.maximumHistory)for(let y=e.length-r.maximumHistory;y>0;y--)e.shift();i.splice(0)}return n=t,s(n)},undo:()=>{if(e.length>0){let t=e.pop();if(t){if(i.push(t),r.maximumHistory&&i.length>r.maximumHistory)for(let o=i.length-r.maximumHistory;o>0;o--)i.shift();n=g(n,t)}}return s(n)},redo:()=>{if(i.length>0){let t=i.pop();if(t){if(e.push(t),r.maximumHistory&&e.length>r.maximumHistory)for(let o=e.length-r.maximumHistory;o>0;o--)e.shift();n=l(n,t)}}return s(n)}}};export{l as applyDiff,f as determineDiff,R as manageState,g as revertDiff};
//# sourceMappingURL=tiedliene.min.js.map
