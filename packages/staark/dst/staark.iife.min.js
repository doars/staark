"use strict";(()=>{var S=function(e,o){let t=window;for(let r=0;r<e.length-1;r++)(typeof t[e[r]]!="object"||!Array.isArray(t[e[r]]))&&(t[e[r]]={}),t=t[e[r]];t[e[e.length-1]]=o};var F=function(e){return Array.isArray(e)?e:[e]};var z=(e,o,t)=>{let r=e?o:t;return typeof r=="function"&&(r=r()),r?F(r):[]};var C=Symbol();var E=(e,o,t)=>((typeof o!="object"||o._===C||Array.isArray(o))&&(t=o,o=void 0),{_:C,a:o,c:t?Array.isArray(t)?t:[t]:[],t:e.toUpperCase()});var G=new Proxy({},{get:(e,o)=>{if(e[o])return e[o];let t=(o[0]+o.substring(1).replace(/([A-Z])/g,r=>"-"+r)).toUpperCase();return e[o]=(r,p)=>E(t,r,p)}});var I="]",Q="[",X=".",$="=",B="#",L="'",_='"';var w=e=>{let o=e.length,t=0,r="",p={},a="",d=!0,f=3,g=()=>{if(a){switch(f){case 0:p[a]=d===!0?!0:d,d=!0;break;case 1:if(!p.class){p.class=a;break}p.class+=" "+a;break;case 2:p.id=a;break;case 3:r=a;break}a=""}},i,m,j=()=>{for(m=0;t<o;){if(i=e[t],t++,i===$){d="",i=e[t];let k=i===_,h=i===L;for((k||h)&&(d+=i,t++);t<o;){if(i=e[t],k&&i===_||h&&i===L){d+=i,t++;break}else if(!k&&!h&&i===I)break;d+=i,t++}for((d[0]===_&&d[d.length-1]===_||d[0]===L&&d[d.length-1]===L)&&(d=d.substring(1,d.length-1));t<o&&(i=e[t],t++,i!==I););break}else if(i===Q){m++;continue}else if(i===I){if(m--,m<0)break;continue}a+=i}g()};for(;t<o;){if(i=e[t],t++,i===B){g(),f=2;continue}else if(i===X){g(),f=1;continue}else if(i===Q){g(),f=0,j();continue}a+=i}return[r,p]};var V=new Proxy({},{get:(e,o)=>{if(e[o])return e[o];let t=(o[0]+o.substring(1).replace(/([A-Z])/g,r=>"-"+r)).toUpperCase();return e[o]=(r,p)=>{let a;if(r){let[d,f]=w(r);a=f}return E(t,a,p)}}});var Z=(e,o)=>{if(o&&e in o&&o[e]){let t=o[e];return typeof t=="function"&&(t=t(),!t)?[]:F(t)}return[]};var q=(e,o)=>({_:C,r:e,m:o});var J=(e,o)=>{let[t,r]=w(e);return{_:C,a:r,c:o?Array.isArray(o)?o:[o]:[],t:t.toUpperCase()}};var K=e=>({_:C,c:Array.isArray(e)?e.join(""):""+e});var U=(e,o)=>{if(e===o)return!0;if(e instanceof Date&&o instanceof Date)return e.getTime()===o.getTime();if(!e||!o||typeof e!="object"&&typeof o!="object")return e===o;if(e==null||o===null||o===void 0||e.prototype!==o.prototype)return!1;let t=Object.keys(e);return t.length!==Object.keys(o).length?!1:t.every(r=>U(e[r],o[r]))};var O=e=>{let o=[];for(let t=0;t<e.childNodes.length;t++){let r=e.childNodes[t];if(r instanceof Text)o.push(r.textContent??"");else{let p={};for(let a=0;a<r.attributes.length;a++){let d=r.attributes[a];p[d.name]=d.value}o.push(E(r.nodeName,p,O(r)))}}return o};var W=(e,o)=>{let t=new WeakMap,r=a=>{if(t.has(a)){let d=t.get(a);t.delete(d);for(let f in d.proxy)typeof d.proxy[f]=="object"&&r(d.proxy[f]);d.revoke()}},p=a=>{if(t.has(a))return t.get(a);for(let f in a)a[f]&&typeof a[f]=="object"&&(a[f]=p(a[f]));let d=Proxy.revocable(a,{deleteProperty:(f,g)=>{if(Reflect.has(f,g)){r(f);let i=Reflect.deleteProperty(f,g);return i&&o(),i}return!0},set:(f,g,i)=>{let m=f[g];return m!==i&&(typeof m=="object"&&r(m),i&&typeof i=="object"&&(i=p(i)),f[g]=i,o()),!0}});return t.set(d,a),d.proxy};return p(e)};var ee=/[A-Z]+(?![a-z])|[A-Z]/g,te=(e,o)=>(o?"-":"")+e,Y=(e,o,t,r)=>{let p=0,a=(s,y,l)=>{if(y)for(let u in y){let n=y[u];if(n){let A=typeof n;if(A==="function"){let x=y[u]=c=>{p++;try{n(c)}catch{}p--,H()};s.addEventListener(u,x);continue}else{if(u==="class"){if(typeof n=="object")if(Array.isArray(n))n=n.join(" ");else{let x="";for(let c in n)n[c]&&(x+=" "+c);n=x}}else if(u==="style"){if(typeof n=="object")if(Array.isArray(n))n=n.join(";");else{let x="";for(let c in n){let T=n[c];c=c.replace(ee,te).toLowerCase(),Array.isArray(T)?x+=";"+c+":"+T.join(" "):T&&(x+=";"+c+":"+T)}n=x}}else{if(A==="boolean"){if(!n){s.removeAttribute(u);continue}n="true"}else A!=="string"&&(n=n.toString());u==="value"&&s.value!==n?s.value=n:u==="checked"&&(s.checked=y[u])}s.setAttribute(u,n)}}}if(l)for(let u in l)typeof l[u]=="function"?s.removeEventListener(u,l[u]):(!y||!(u in y)||!y[u])&&(u==="value"?s.value="":u==="checked"&&(s.checked=!1),s.removeAttribute(u))},d=[],f=[],g=s=>{let y=d.find(l=>l.r===s.r&&U(l.m,s.m));return y||(y={c:F(s.r(k,s.m)),m:s.m,r:s.r}),f.includes(y)||f.push(y),structuredClone(y.c)},i=(s,y,l,u)=>{let n=0,A=0;if(y)for(;n<y.length;n++){let c=y[n];if(c.r){let N=g(c);y.splice(n,1,...N),n--;continue}let T=!1;if(l)for(let N=n-A;N<l.length;N++){let b=l[N];if(b.t&&c.t===b.t||!b.t&&!c.t){T=!0,n!==N+A&&(s.insertBefore(s.childNodes[N+A],s.childNodes[n]),l.splice(n-A,0,...l.splice(N,1))),c.t?(a(s.childNodes[n],c.a,b.a),i(s.childNodes[n],c.c,b.c,b)):s.childNodes[n].textContent=typeof c=="string"?c:c.c;break}}if(!T){let N;if(c.t){N=document.createElement(c.t),c.a&&a(N,c.a),c.c&&i(N,c.c);let b=(R,M,v)=>{v&&(!M||M.t)?R.insertAdjacentElement(v,N):R.parentNode.insertBefore(N,R)};n===0?b(s,u,"afterbegin"):(l?.length??0)+A>n?b(s.childNodes[n]):b(s,u,"beforeend")}else{N=typeof c=="string"?c:c.c;let b=(R,M,v)=>{v&&(!M||M.t)?R.insertAdjacentText(v,N):R.parentNode.insertBefore(document.createTextNode(N),R)};n===0?b(s,u,"afterbegin"):(l?.length??0)+A>n?b(s.childNodes[n]):b(s,u,"beforeend")}A++}}let x=(l?.length??0)+A;if(x>=n)for(let c=x-1;c>=n;c--)s.childNodes[c].remove()};typeof t=="string"&&(t=JSON.parse(t)),t??={};let m=!0,j=()=>{m||(m=!0,Promise.resolve().then(H))},k=Object.getPrototypeOf(t)===Proxy.prototype?t:W(t,j),h=typeof e=="string"?document.querySelector(e)||document.body.appendChild(document.createElement("div")):e;if(typeof r=="string")try{r=JSON.parse(r)}catch{r=void 0}r??=O(h);let P=!0,D=!1,H=()=>{if(P&&!D&&m&&p<=0){D=!0,m=!1;let s=F(o(k));if(i(h,s,r),r=s,d=f,f=[],D=!1,m)throw new Error("update during render")}};return H(),[j,()=>{if(P){P=!1;for(let s=h.childNodes.length-1;s>=0;s--)h.childNodes[s].remove()}},k]};S(["staark"],{conditional:z,factory:G,fctory:V,match:Z,memo:q,mount:Y,nde:J,node:E,text:K});})();
//# sourceMappingURL=staark.iife.min.js.map
