"use strict";(()=>{var P=function(e,t){let o=window;for(let i=0;i<e.length-1;i++)(typeof o[e[i]]!="object"||!Array.isArray(o[e[i]]))&&(o[e[i]]={}),o=o[e[i]];o[e[e.length-1]]=t};var C=Symbol();var h=(e,t,o)=>((typeof t!="object"||t._===C||Array.isArray(t))&&(o=t,t=void 0),{_:C,a:t,c:o?Array.isArray(o)?o:[o]:[],t:e.toUpperCase()});var H=new Proxy({},{get:(e,t)=>{if(e[t])return e[t];let o=(t[0]+t.substring(1).replace(/([A-Z])/g,i=>"-"+i)).toUpperCase();return e[t]=(i,y)=>h(o,i,y)}});var _="]",U="[",Q=".",Z="=",K="#",R="'",j='"';var M=e=>{let t=e.length,o=0,i="",y={},a="",f=!0,l=3,m=()=>{if(a){switch(l){case 0:y[a]=f===!0?!0:f,f=!0;break;case 1:if(!y.class){y.class=a;break}y.class+=" "+a;break;case 2:y.id=a;break;case 3:i=a;break}a=""}},s,b,F=()=>{for(b=0;o<t;){if(s=e[o],o++,s===Z){f="",s=e[o];let E=s===j,x=s===R;for((E||x)&&(f+=s,o++);o<t;){if(s=e[o],E&&s===j||x&&s===R){f+=s,o++;break}else if(!E&&!x&&s===_)break;f+=s,o++}for((f[0]===j&&f[f.length-1]===j||f[0]===R&&f[f.length-1]===R)&&(f=f.substring(1,f.length-1));o<t&&(s=e[o],o++,s!==_););break}else if(s===U){b++;continue}else if(s===_){if(b--,b<0)break;continue}a+=s}m()};for(;o<t;){if(s=e[o],o++,s===K){m(),l=2;continue}else if(s===Q){m(),l=1;continue}else if(s===U){m(),l=0,F();continue}a+=s}return[i,y]};var I=new Proxy({},{get:(e,t)=>{if(e[t])return e[t];let o=(t[0]+t.substring(1).replace(/([A-Z])/g,i=>"-"+i)).toUpperCase();return e[t]=(i,y)=>{let a;if(i){let[f,l]=M(i);a=l}return h(o,a,y)}}});var O=(e,t)=>({_:C,r:e,m:t});var w=function(e){return Array.isArray(e)?e:[e]};var L=e=>{if(typeof e=="object")if(Array.isArray(e)){let t=[];for(let o=0;o<e.length;o++)t.push(L(e[o]));e=t}else{let t={};for(let o in e)t[o]=L(e[o]);e=t}return e};var D=(e,t)=>{if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!e||!t||typeof e!="object"&&typeof t!="object")return e===t;if(e==null||t===null||t===void 0||e.prototype!==t.prototype)return!1;let o=Object.keys(e);return o.length!==Object.keys(t).length?!1:o.every(i=>D(e[i],t[i]))};var S="staark-created";var V=(e,t)=>{let o=new WeakMap,i=a=>{if(o.has(a)){let f=o.get(a);o.delete(f);for(let l in f.proxy)typeof f.proxy[l]=="object"&&i(f.proxy[l]);f.revoke()}},y=a=>{if(o.has(a))return o.get(a);for(let l in a)a[l]&&typeof a[l]=="object"&&(a[l]=y(a[l]));let f=Proxy.revocable(a,{deleteProperty:(l,m)=>{if(Reflect.has(l,m)){i(l);let s=Reflect.deleteProperty(l,m);return s&&t(),s}return!0},set:(l,m,s)=>{let b=l[m];return b!==s&&(typeof b=="object"&&i(b),s&&typeof s=="object"&&(s=y(s)),l[m]=s,t()),!0}});return o.set(f,a),f.proxy};return y(e)};var W=/[A-Z]+(?![a-z])|[A-Z]/g,Y=(e,t)=>(t?"-":"")+e,q=(e,t,o)=>{o||(o={});let i=!0,y=!1,a=typeof e=="string"?document.querySelector(e)||document.body.appendChild(document.createElement("div")):e,f=()=>{if(i){i=!1;for(let r=a.childNodes.length-1;r>=0;r--)a.childNodes[r].remove()}};f(),i=!0;let l=0,m=(r,p=null,N=null)=>{if(p)for(let n in p){let c=p[n];if(c!=null){let u=typeof c;if(u==="function"){let A=p[n]=d=>{l++;try{c(d)}catch(g){}l--,k()};r.addEventListener(n,A);continue}else{if(n==="class"){if(typeof c=="object")if(Array.isArray(c))c=c.join(" ");else{let A="";for(let d in c)c[d]&&(A+=" "+d);c=A}}else if(n==="style"){if(typeof c=="object")if(Array.isArray(c))c=c.join(";");else{let A="";for(let d in c){let g=c[d];d=d.replace(W,Y).toLowerCase(),Array.isArray(g)?A+=";"+d+":"+g.join(" "):g&&(A+=";"+d+":"+g)}c=A}}else u==="boolean"?c=c?"true":"false":u!=="string"&&(c=c.toString()),n==="value"&&r.value!==c?r.value=c:n==="checked"&&(r.checked=p[n]);r.setAttribute(n,c)}}}if(N)for(let n in N)typeof N[n]=="function"?r.removeEventListener(n,N[n]):(!p||!(n in p)||p[n]===null||p[n]===void 0)&&(n==="value"?r.value="":n==="checked"&&(r.checked=!1),r.removeAttribute(n))},s=[],b=[],F=r=>{let p=s.find(N=>N.r===r.r&&D(N.m,r.m));return p||(p={c:w(r.r(v,r.m)),m:r.m,r:r.r}),b.includes(p)||b.push(p),L(p.c)},E=(r,p=null,N=null)=>{let n=0,c=0;if(p)for(;n<p.length;n++){let u=p[n];if(u.r){let d=F(u);p.splice(n,1,...d),n--;continue}let A=!1;if(N)for(let d=n-c;d<N.length;d++){let g=N[d];if(g.t&&u.t===g.t||!g.t&&!u.t){A=!0,n!==d&&(r.insertBefore(r.childNodes[d+c],r.childNodes[n]),T.splice(n-c,0,...T.splice(d,1))),u.t?(m(r.childNodes[n],u.a,g.a),E(r.childNodes[n],u.c,g.c)):r.childNodes[n].textContent=typeof u=="string"?u:u.c;break}}if(!A)if(u.t){let d=document.createElement(u.t);u.a&&m(d,u.a),u.c&&E(d,u.c),n===0?r.insertAdjacentElement("afterbegin",d):r.childNodes.length>n?r.childNodes[n].insertAdjacentElement("afterend",d):r.insertAdjacentElement("beforeend",d),c++,a.dispatchEvent(new CustomEvent(S,{detail:{target:d}}))}else{let d=typeof u=="string"?u:u.c;n===0?r.insertAdjacentText("afterbegin",d):r.childNodes.length>n?r.childNodes[n].insertAdjacentText("afterend",d):r.insertAdjacentText("beforeend",d),c++}}if(r.childNodes.length>=n)for(let u=r.childNodes.length-1;u>=n;u--)r.childNodes[u].remove()},x=!0,v=Object.getPrototypeOf(o)===Proxy.prototype?o:V(o,()=>{x=!0,requestAnimationFrame(k)}),T=[],k=()=>{if(i&&!y&&x&&l<=0){y=!0,x=!1;let r=w(t(v));if(E(a,r,T),T=r,s=b,b=[],y=!1,x)throw new Error("update during render")}};return k(),[()=>{x=!0,requestAnimationFrame(k)},f,v]};var z=(e,t)=>{let[o,i]=M(e);return{_:C,a:i,c:t?Array.isArray(t)?t:[t]:[],t:o.toUpperCase()}};var G=e=>({_:C,c:Array.isArray(e)?e.join(""):""+e});P(["staark"],{factory:H,fctory:I,memo:O,mount:q,nde:z,node:h,text:G});})();
//# sourceMappingURL=staark.iife.min.js.map
