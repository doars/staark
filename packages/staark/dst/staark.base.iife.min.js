"use strict";(()=>{var w=function(o,s){let r=window;for(let i=0;i<o.length-1;i++)(typeof r[o[i]]!="object"||!Array.isArray(r[o[i]]))&&(r[o[i]]={}),r=r[o[i]];r[o[o.length-1]]=s};var C=Symbol();var _=(o,s)=>({_:C,r:o,m:s});var R=(o,s,r)=>((typeof s!="object"||s._===C||Array.isArray(s))&&(r=s,s=void 0),{_:C,a:s,c:r?Array.isArray(r)?r:[r]:[],t:o.toUpperCase()});var P=function(o){return Array.isArray(o)?o:[o]};var I=(o,s)=>{if(o===s)return!0;if(o instanceof Date&&s instanceof Date)return o.getTime()===s.getTime();if(!o||!s||typeof o!="object"&&typeof s!="object")return o===s;if(o==null||s===null||s===void 0||o.prototype!==s.prototype)return!1;let r=Object.keys(o);return r.length!==Object.keys(s).length?!1:r.every(i=>I(o[i],s[i]))};var H=o=>{let s=[];for(let r=0;r<o.childNodes.length;r++){let i=o.childNodes[r];if(i instanceof Text)s.push(i.textContent??"");else{let g={};for(let d=0;d<i.attributes.length;d++){let N=i.attributes[d];g[N.name]=N.value}s.push(R(i.nodeName,g,H(i)))}}return s};var G=(o,s)=>{let r=new WeakMap,i=d=>{if(r.has(d)){let N=r.get(d);r.delete(N);for(let a in N.proxy)typeof N.proxy[a]=="object"&&i(N.proxy[a]);N.revoke()}},g=d=>{if(r.has(d))return r.get(d);for(let a in d)d[a]&&typeof d[a]=="object"&&(d[a]=g(d[a]));let N=Proxy.revocable(d,{deleteProperty:(a,E)=>{if(Reflect.has(a,E)){i(a);let u=Reflect.deleteProperty(a,E);return u&&s(),u}return!0},set:(a,E,u)=>{let x=a[E];return x!==u&&(typeof x=="object"&&i(x),u&&typeof u=="object"&&(u=g(u)),a[E]=u,s()),!0}});return r.set(N,d),N.proxy};return g(o)};var V=/[A-Z]+(?![a-z])|[A-Z]/g,q=(o,s)=>(s?"-":"")+o,U=(o,s,r,i)=>{let g=0,d=(t,f,y)=>{if(f)for(let c in f){let e=f[c];if(e){let l=typeof e;if(l==="function"){let b=f[c]=n=>{g++;try{e(n)}catch{}g--,F()};t.addEventListener(c,b);continue}else{if(c==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let b="";for(let n in e)e[n]&&(b+=" "+n);e=b}}else if(c==="style"){if(typeof e=="object")if(Array.isArray(e))e=e.join(";");else{let b="";for(let n in e){let A=e[n];n=n.replace(V,q).toLowerCase(),Array.isArray(A)?b+=";"+n+":"+A.join(" "):A&&(b+=";"+n+":"+A)}e=b}}else{if(l==="boolean"){if(!e){t.removeAttribute(c);continue}e="true"}else l!=="string"&&(e=e.toString());c==="value"&&t.value!==e?t.value=e:c==="checked"&&(t.checked=f[c])}t.setAttribute(c,e)}}}if(y)for(let c in y)typeof y[c]=="function"?t.removeEventListener(c,y[c]):(!f||!(c in f)||!f[c])&&(c==="value"?t.value="":c==="checked"&&(t.checked=!1),t.removeAttribute(c))},N=[],a=[],E=t=>{let f=N.find(y=>y.r===t.r&&I(y.m,t.m));return f||(f={c:P(t.r(L,t.m)),m:t.m,r:t.r}),a.includes(f)||a.push(f),structuredClone(f.c)},u=(t,f,y,c)=>{let e=0,l=0;if(f)for(;e<f.length;e++){let n=f[e];if(n.r){let p=E(n);f.splice(e,1,...p),e--;continue}let A=!1;if(y)for(let p=e-l;p<y.length;p++){let m=y[p];if(m.t&&n.t===m.t||!m.t&&!n.t){A=!0,e!==p+l&&(t.insertBefore(t.childNodes[p+l],t.childNodes[e]),y.splice(e-l,0,...y.splice(p,1))),n.t?(d(t.childNodes[e],n.a,m.a),u(t.childNodes[e],n.c,m.c,m)):t.childNodes[e].textContent=typeof n=="string"?n:n.c;break}}if(!A){let p;if(n.t){p=document.createElement(n.t),n.a&&d(p,n.a),n.c&&u(p,n.c);let m=(h,M,T)=>{T&&(!M||M.t)?h.insertAdjacentElement(T,p):h.parentNode.insertBefore(p,h)};e===0?m(t,c,"afterbegin"):(y?.length??0)+l>e?m(t.childNodes[e]):m(t,c,"beforeend")}else{p=typeof n=="string"?n:n.c;let m=(h,M,T)=>{T&&(!M||M.t)?h.insertAdjacentText(T,p):h.parentNode.insertBefore(document.createTextNode(p),h)};e===0?m(t,c,"afterbegin"):(y?.length??0)+l>e?m(t.childNodes[e]):m(t,c,"beforeend")}l++}}let b=(y?.length??0)+l;if(b>=e)for(let n=b-1;n>=e;n--)t.childNodes[n].remove()};typeof r=="string"&&(r=JSON.parse(r)),r??={};let x=!0,D=()=>{x||(x=!0,Promise.resolve().then(F))},L=Object.getPrototypeOf(r)===Proxy.prototype?r:G(r,D),j=typeof o=="string"?document.querySelector(o)||document.body.appendChild(document.createElement("div")):o;if(typeof i=="string")try{i=JSON.parse(i)}catch{i=void 0}i??=H(j);let k=!0,v=!1,F=()=>{if(k&&!v&&x&&g<=0){v=!0,x=!1;let t=P(s(L));if(u(j,t,i),i=t,N=a,a=[],v=!1,x)throw new Error("update during render")}};return F(),[D,()=>{if(k){k=!1;for(let t=j.childNodes.length-1;t>=0;t--)j.childNodes[t].remove()}},L]};w(["staark"],{memo:_,mount:U,node:R});})();
//# sourceMappingURL=staark.base.iife.min.js.map
