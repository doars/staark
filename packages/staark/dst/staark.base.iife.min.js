"use strict";(()=>{var w=function(o,s){let n=window;for(let i=0;i<o.length-1;i++)(typeof n[o[i]]!="object"||!Array.isArray(n[o[i]]))&&(n[o[i]]={}),n=n[o[i]];n[o[o.length-1]]=s};var C=Symbol();var _=(o,s)=>({_:C,r:o,m:s});var R=(o,s,n)=>((typeof s!="object"||s._===C||Array.isArray(s))&&(n=s,s=void 0),{_:C,a:s,c:n?Array.isArray(n)?n:[n]:[],t:o.toUpperCase()});var P=function(o){return Array.isArray(o)?o:[o]};var I=(o,s)=>{if(o===s)return!0;if(o instanceof Date&&s instanceof Date)return o.getTime()===s.getTime();if(!o||!s||typeof o!="object"&&typeof s!="object")return o===s;if(o==null||s===null||s===void 0||o.prototype!==s.prototype)return!1;let n=Object.keys(o);return n.length!==Object.keys(s).length?!1:n.every(i=>I(o[i],s[i]))};var H=o=>{let s=[];for(let n=0;n<o.childNodes.length;n++){let i=o.childNodes[n];if(i instanceof Text)s.push(i.textContent??"");else{let g={};for(let d=0;d<i.attributes.length;d++){let N=i.attributes[d];g[N.name]=N.value}s.push(R(i.nodeName,g,H(i)))}}return s};var G=(o,s)=>{let n=new WeakMap,i=d=>{if(n.has(d)){let N=n.get(d);n.delete(N);for(let a in N.proxy)typeof N.proxy[a]=="object"&&i(N.proxy[a]);N.revoke()}},g=d=>{if(n.has(d))return n.get(d);for(let a in d)d[a]&&typeof d[a]=="object"&&(d[a]=g(d[a]));let N=Proxy.revocable(d,{deleteProperty:(a,E)=>{if(Reflect.has(a,E)){i(a);let m=Reflect.deleteProperty(a,E);return m&&s(),m}return!0},set:(a,E,m)=>{let x=a[E];return x!==m&&(typeof x=="object"&&i(x),m&&typeof m=="object"&&(m=g(m)),a[E]=m,s()),!0}});return n.set(N,d),N.proxy};return g(o)};var V=/[A-Z]+(?![a-z])|[A-Z]/g,q=(o,s)=>(s?"-":"")+o,U=(o,s,n,i)=>{let g=0,d=(t,f,y)=>{if(f)for(let c in f){let e=f[c];if(e){let u=typeof e;if(u==="function"){let b=f[c]=r=>{g++;try{e(r)}catch{}g--,F()};t.addEventListener(c,b);continue}else{if(c==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let b="";for(let r in e)e[r]&&(b+=" "+r);e=b}}else if(c==="style"){if(typeof e=="object")if(Array.isArray(e))e=e.join(";");else{let b="";for(let r in e){let A=e[r];r=r.replace(V,q).toLowerCase(),Array.isArray(A)?b+=";"+r+":"+A.join(" "):A&&(b+=";"+r+":"+A)}e=b}}else{if(u==="boolean"){if(!e){t.removeAttribute(c);continue}e="true"}else u!=="string"&&(e=e.toString());c==="value"&&t.value!==e?t.value=e:c==="checked"&&(t.checked=f[c])}t.setAttribute(c,e)}}}if(y)for(let c in y)typeof y[c]=="function"?t.removeEventListener(c,y[c]):(!f||!(c in f)||!f[c])&&(c==="value"?t.value="":c==="checked"&&(t.checked=!1),t.removeAttribute(c))},N=[],a=[],E=t=>{let f=N.find(y=>y.r===t.r&&I(y.m,t.m));return f||(f={c:P(t.r(L,t.m)),m:t.m,r:t.r}),a.includes(f)||a.push(f),structuredClone(f.c)},m=(t,f,y,c)=>{let e=0,u=0;if(f)for(;e<f.length;e++){let r=f[e];if(r.r){let p=E(r);f.splice(e,1,...p),e--;continue}let A=!1;if(y)for(let p=e-u;p<y.length;p++){let l=y[p];if(l.t&&r.t===l.t||!l.t&&!r.t){A=!0,e!==p+u&&(t.insertBefore(t.childNodes[p+u],t.childNodes[e]),y.splice(e-u,0,...y.splice(p,1))),r.t?(d(t.childNodes[e],r.a,l.a),m(t.childNodes[e],r.c,l.c,l)):t.childNodes[e].textContent=typeof r=="string"?r:r.c;break}}if(!A){let p;if(r.t){p=document.createElement(r.t),r.a&&d(p,r.a),r.c&&m(p,r.c);let l=(h,M,T)=>{T&&(!M||M.t)?h.insertAdjacentElement(T,p):h.parentNode.insertBefore(p,h)};e===0?l(t,c,"afterbegin"):(y?.length??0)+u>e?l(t.childNodes[e]):l(t,c,"beforeend")}else{p=typeof r=="string"?r:r.c;let l=(h,M,T)=>{T&&(!M||M.t)?h.insertAdjacentText(T,p):h.parentNode.insertBefore(document.createTextNode(p),h.nextSibling)};e===0?l(t,c,"afterbegin"):(y?.length??0)+u>e?l(t.childNodes[e]):l(t,c,"beforeend")}u++}}let b=(y?.length??0)+u;if(b>=e)for(let r=b-1;r>=e;r--)t.childNodes[r].remove()};typeof n=="string"&&(n=JSON.parse(n)),n??={};let x=!0,D=()=>{x||(x=!0,Promise.resolve().then(F))},L=Object.getPrototypeOf(n)===Proxy.prototype?n:G(n,D),j=typeof o=="string"?document.querySelector(o)||document.body.appendChild(document.createElement("div")):o;if(typeof i=="string")try{i=JSON.parse(i)}catch{i=void 0}i??=H(j);let k=!0,v=!1,F=()=>{if(k&&!v&&x&&g<=0){v=!0,x=!1;let t=P(s(L));if(m(j,t,i),i=t,N=a,a=[],v=!1,x)throw new Error("update during render")}};return F(),[D,()=>{if(k){k=!1;for(let t=j.childNodes.length-1;t>=0;t--)j.childNodes[t].remove()}},L]};w(["staark"],{memo:_,mount:U,node:R});})();
//# sourceMappingURL=staark.base.iife.min.js.map
