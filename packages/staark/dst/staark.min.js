var E=function(t){return Array.isArray(t)?t:[t]};var W=(t,e,o)=>t?E(e):E(o??[]);var C=Symbol();var R=(t,e,o)=>((typeof e!="object"||e._===C||Array.isArray(e))&&(o=e,e=void 0),{_:C,a:e,c:o?Array.isArray(o)?o:[o]:[],t:t.toUpperCase()});var ne=new Proxy({},{get:(t,e)=>{if(t[e])return t[e];let o=(e[0]+e.substring(1).replace(/([A-Z])/g,i=>"-"+i)).toUpperCase();return t[e]=(i,u)=>R(o,i,u)}});var I="]",S="[",G=".",Q="=",V="#",v="'",_='"';var P=t=>{let e=t.length,o=0,i="",u={},a="",d=!0,f=3,g=()=>{if(a){switch(f){case 0:u[a]=d===!0?!0:d,d=!0;break;case 1:if(!u.class){u.class=a;break}u.class+=" "+a;break;case 2:u.id=a;break;case 3:i=a;break}a=""}},s,b,j=()=>{for(b=0;o<e;){if(s=t[o],o++,s===Q){d="",s=t[o];let k=s===_,h=s===v;for((k||h)&&(d+=s,o++);o<e;){if(s=t[o],k&&s===_||h&&s===v){d+=s,o++;break}else if(!k&&!h&&s===I)break;d+=s,o++}for((d[0]===_&&d[d.length-1]===_||d[0]===v&&d[d.length-1]===v)&&(d=d.substring(1,d.length-1));o<e&&(s=t[o],o++,s!==I););break}else if(s===S){b++;continue}else if(s===I){if(b--,b<0)break;continue}a+=s}g()};for(;o<e;){if(s=t[o],o++,s===V){g(),f=2;continue}else if(s===G){g(),f=1;continue}else if(s===S){g(),f=0,j();continue}a+=s}return[i,u]};var ue=new Proxy({},{get:(t,e)=>{if(t[e])return t[e];let o=(e[0]+e.substring(1).replace(/([A-Z])/g,i=>"-"+i)).toUpperCase();return t[e]=(i,u)=>{let a;if(i){let[d,f]=P(i);a=f}return R(o,a,u)}}});var me=(t,e)=>e&&t in e&&e[t]?E(e[t]):[];var ge=(t,e)=>({_:C,r:t,m:e});var he=(t,e)=>{let[o,i]=P(t);return{_:C,a:i,c:e?Array.isArray(e)?e:[e]:[],t:o.toUpperCase()}};var ke=t=>({_:C,c:Array.isArray(t)?t.join(""):""+t});var U=(t,e)=>{if(t===e)return!0;if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(!t||!e||typeof t!="object"&&typeof e!="object")return t===e;if(t==null||e===null||e===void 0||t.prototype!==e.prototype)return!1;let o=Object.keys(t);return o.length!==Object.keys(e).length?!1:o.every(i=>U(t[i],e[i]))};var O=t=>{let e=[];for(let o=0;o<t.childNodes.length;o++){let i=t.childNodes[o];if(i instanceof Text)e.push(i.textContent??"");else{let u={};for(let a=0;a<i.attributes.length;a++){let d=i.attributes[a];u[d.name]=d.value}e.push(R(i.nodeName,u,O(i)))}}return e};var z=(t,e)=>{let o=new WeakMap,i=a=>{if(o.has(a)){let d=o.get(a);o.delete(d);for(let f in d.proxy)typeof d.proxy[f]=="object"&&i(d.proxy[f]);d.revoke()}},u=a=>{if(o.has(a))return o.get(a);for(let f in a)a[f]&&typeof a[f]=="object"&&(a[f]=u(a[f]));let d=Proxy.revocable(a,{deleteProperty:(f,g)=>{if(Reflect.has(f,g)){i(f);let s=Reflect.deleteProperty(f,g);return s&&e(),s}return!0},set:(f,g,s)=>{let b=f[g];return b!==s&&(typeof b=="object"&&i(b),s&&typeof s=="object"&&(s=u(s)),f[g]=s,e()),!0}});return o.set(d,a),d.proxy};return u(t)};var Z=/[A-Z]+(?![a-z])|[A-Z]/g,q=(t,e)=>(e?"-":"")+t,Ie=(t,e,o,i)=>{let u=0,a=(n,N,m)=>{if(N)for(let p in N){let r=N[p];if(r){let A=typeof r;if(A==="function"){let x=N[p]=c=>{u++;try{r(c)}catch{}u--,H()};n.addEventListener(p,x);continue}else{if(p==="class"){if(typeof r=="object")if(Array.isArray(r))r=r.join(" ");else{let x="";for(let c in r)r[c]&&(x+=" "+c);r=x}}else if(p==="style"){if(typeof r=="object")if(Array.isArray(r))r=r.join(";");else{let x="";for(let c in r){let T=r[c];c=c.replace(Z,q).toLowerCase(),Array.isArray(T)?x+=";"+c+":"+T.join(" "):T&&(x+=";"+c+":"+T)}r=x}}else{if(A==="boolean"){if(!r){n.removeAttribute(p);continue}r="true"}else A!=="string"&&(r=r.toString());p==="value"&&n.value!==r?n.value=r:p==="checked"&&(n.checked=N[p])}n.setAttribute(p,r)}}}if(m)for(let p in m)typeof m[p]=="function"?n.removeEventListener(p,m[p]):(!N||!(p in N)||!N[p])&&(p==="value"?n.value="":p==="checked"&&(n.checked=!1),n.removeAttribute(p))},d=[],f=[],g=n=>{let N=d.find(m=>m.r===n.r&&U(m.m,n.m));return N||(N={c:E(n.r(k,n.m)),m:n.m,r:n.r}),f.includes(N)||f.push(N),structuredClone(N.c)},s=(n,N,m,p)=>{let r=0,A=0;if(N)for(;r<N.length;r++){let c=N[r];if(c.r){let y=g(c);N.splice(r,1,...y),r--;continue}let T=!1;if(m)for(let y=r-A;y<m.length;y++){let l=m[y];if(l.t&&c.t===l.t||!l.t&&!c.t){T=!0,r!==y+A&&(n.insertBefore(n.childNodes[y+A],n.childNodes[r]),m.splice(r-A,0,...m.splice(y,1))),c.t?(a(n.childNodes[r],c.a,l.a),s(n.childNodes[r],c.c,l.c,l)):n.childNodes[r].textContent=typeof c=="string"?c:c.c;break}}if(!T){let y;if(c.t){y=document.createElement(c.t),c.a&&a(y,c.a),c.c&&s(y,c.c);let l=(M,L,F)=>{F&&(!L||L.t)?M.insertAdjacentElement(F,y):M.parentNode.insertBefore(y,M)};r===0?l(n,p,"afterbegin"):(m?.length??0)+A>r?l(n.childNodes[r]):l(n,p,"beforeend")}else{y=typeof c=="string"?c:c.c;let l=(M,L,F)=>{F&&(!L||L.t)?M.insertAdjacentText(F,y):M.parentNode.insertBefore(document.createTextNode(y),M.nextSibling)};r===0?l(n,p,"afterbegin"):(m?.length??0)+A>r?l(n.childNodes[r]):l(n,p,"beforeend")}A++}}let x=(m?.length??0)+A;if(x>=r)for(let c=x-1;c>=r;c--)n.childNodes[c].remove()};typeof o=="string"&&(o=JSON.parse(o)),o??={};let b=!0,j=()=>{b||(b=!0,Promise.resolve().then(H))},k=Object.getPrototypeOf(o)===Proxy.prototype?o:z(o,j),h=typeof t=="string"?document.querySelector(t)||document.body.appendChild(document.createElement("div")):t;if(typeof i=="string")try{i=JSON.parse(i)}catch{i=void 0}i??=O(h);let w=!0,D=!1,H=()=>{if(w&&!D&&b&&u<=0){D=!0,b=!1;let n=E(e(k));if(s(h,n,i),i=n,d=f,f=[],D=!1,b)throw new Error("update during render")}};return H(),[j,()=>{if(w){w=!1;for(let n=h.childNodes.length-1;n>=0;n--)h.childNodes[n].remove()}},k]};export{W as conditional,ne as factory,ue as fctory,me as match,ge as memo,Ie as mount,he as nde,R as node,ke as text};
//# sourceMappingURL=staark.min.js.map
