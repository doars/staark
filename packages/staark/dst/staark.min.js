var R=function(t){return Array.isArray(t)?t:[t]};var W=(t,e,o)=>{let n=t?e:o;return typeof n=="function"&&(n=n()),n?R(n):[]};var C=Symbol();var F=(t,e,o)=>((typeof e!="object"||e._===C||Array.isArray(e))&&(o=e,e=void 0),{_:C,a:e,c:o?Array.isArray(o)?o:[o]:[],t:t.toUpperCase()});var ne=new Proxy({},{get:(t,e)=>{if(t[e])return t[e];let o=(e[0]+e.substring(1).replace(/([A-Z])/g,n=>"-"+n)).toUpperCase();return t[e]=(n,p)=>F(o,n,p)}});var I="]",S="[",G=".",Q="=",V="#",j="'",_='"';var P=t=>{let e=t.length,o=0,n="",p={},a="",d=!0,f=3,g=()=>{if(a){switch(f){case 0:p[a]=d===!0?!0:d,d=!0;break;case 1:if(!p.class){p.class=a;break}p.class+=" "+a;break;case 2:p.id=a;break;case 3:n=a;break}a=""}},i,b,L=()=>{for(b=0;o<e;){if(i=t[o],o++,i===Q){d="",i=t[o];let E=i===_,h=i===j;for((E||h)&&(d+=i,o++);o<e;){if(i=t[o],E&&i===_||h&&i===j){d+=i,o++;break}else if(!E&&!h&&i===I)break;d+=i,o++}for((d[0]===_&&d[d.length-1]===_||d[0]===j&&d[d.length-1]===j)&&(d=d.substring(1,d.length-1));o<e&&(i=t[o],o++,i!==I););break}else if(i===S){b++;continue}else if(i===I){if(b--,b<0)break;continue}a+=i}g()};for(;o<e;){if(i=t[o],o++,i===V){g(),f=2;continue}else if(i===G){g(),f=1;continue}else if(i===S){g(),f=0,L();continue}a+=i}return[n,p]};var pe=new Proxy({},{get:(t,e)=>{if(t[e])return t[e];let o=(e[0]+e.substring(1).replace(/([A-Z])/g,n=>"-"+n)).toUpperCase();return t[e]=(n,p)=>{let a;if(n){let[d,f]=P(n);a=f}return F(o,a,p)}}});var le=(t,e)=>{if(e&&t in e&&e[t]){let o=e[t];return typeof o=="function"&&(o=o(),!o)?[]:R(o)}return[]};var ge=(t,e)=>({_:C,r:t,m:e});var he=(t,e)=>{let[o,n]=P(t);return{_:C,a:n,c:e?Array.isArray(e)?e:[e]:[],t:o.toUpperCase()}};var ke=t=>({_:C,c:Array.isArray(t)?t.join(""):""+t});var U=(t,e)=>{if(t===e)return!0;if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(!t||!e||typeof t!="object"&&typeof e!="object")return t===e;if(t==null||e===null||e===void 0||t.prototype!==e.prototype)return!1;let o=Object.keys(t);return o.length!==Object.keys(e).length?!1:o.every(n=>U(t[n],e[n]))};var O=t=>{let e=[];for(let o=0;o<t.childNodes.length;o++){let n=t.childNodes[o];if(n instanceof Text)e.push(n.textContent??"");else{let p={};for(let a=0;a<n.attributes.length;a++){let d=n.attributes[a];p[d.name]=d.value}e.push(F(n.nodeName,p,O(n)))}}return e};var z=(t,e)=>{let o=new WeakMap,n=a=>{if(o.has(a)){let d=o.get(a);o.delete(d);for(let f in d.proxy)typeof d.proxy[f]=="object"&&n(d.proxy[f]);d.revoke()}},p=a=>{if(o.has(a))return o.get(a);for(let f in a)a[f]&&typeof a[f]=="object"&&(a[f]=p(a[f]));let d=Proxy.revocable(a,{deleteProperty:(f,g)=>{if(Reflect.has(f,g)){n(f);let i=Reflect.deleteProperty(f,g);return i&&e(),i}return!0},set:(f,g,i)=>{let b=f[g];return b!==i&&(typeof b=="object"&&n(b),i&&typeof i=="object"&&(i=p(i)),f[g]=i,e()),!0}});return o.set(d,a),d.proxy};return p(t)};var Z=/[A-Z]+(?![a-z])|[A-Z]/g,q=(t,e)=>(e?"-":"")+t,Ie=(t,e,o,n)=>{let p=0,a=(s,N,l)=>{if(N)for(let u in N){let r=N[u];if(r){let A=typeof r;if(A==="function"){let x=N[u]=c=>{p++;try{r(c)}catch{}p--,H()};s.addEventListener(u,x);continue}else{if(u==="class"){if(typeof r=="object")if(Array.isArray(r))r=r.join(" ");else{let x="";for(let c in r)r[c]&&(x+=" "+c);r=x}}else if(u==="style"){if(typeof r=="object")if(Array.isArray(r))r=r.join(";");else{let x="";for(let c in r){let T=r[c];c=c.replace(Z,q).toLowerCase(),Array.isArray(T)?x+=";"+c+":"+T.join(" "):T&&(x+=";"+c+":"+T)}r=x}}else{if(A==="boolean"){if(!r){s.removeAttribute(u);continue}r="true"}else A!=="string"&&(r=r.toString());u==="value"&&s.value!==r?s.value=r:u==="checked"&&(s.checked=N[u])}s.setAttribute(u,r)}}}if(l)for(let u in l)typeof l[u]=="function"?s.removeEventListener(u,l[u]):(!N||!(u in N)||!N[u])&&(u==="value"?s.value="":u==="checked"&&(s.checked=!1),s.removeAttribute(u))},d=[],f=[],g=s=>{let N=d.find(l=>l.r===s.r&&U(l.m,s.m));return N||(N={c:R(s.r(E,s.m)),m:s.m,r:s.r}),f.includes(N)||f.push(N),structuredClone(N.c)},i=(s,N,l,u)=>{let r=0,A=0;if(N)for(;r<N.length;r++){let c=N[r];if(c.r){let y=g(c);N.splice(r,1,...y),r--;continue}let T=!1;if(l)for(let y=r-A;y<l.length;y++){let m=l[y];if(m.t&&c.t===m.t||!m.t&&!c.t){T=!0,r!==y+A&&(s.insertBefore(s.childNodes[y+A],s.childNodes[r]),l.splice(r-A,0,...l.splice(y,1))),c.t?(a(s.childNodes[r],c.a,m.a),i(s.childNodes[r],c.c,m.c,m)):s.childNodes[r].textContent=typeof c=="string"?c:c.c;break}}if(!T){let y;if(c.t){y=document.createElement(c.t),c.a&&a(y,c.a),c.c&&i(y,c.c);let m=(k,M,v)=>{v&&(!M||M.t)?k.insertAdjacentElement(v,y):k.parentNode.insertBefore(y,k)};r===0?m(s,u,"afterbegin"):(l?.length??0)+A>r?m(s.childNodes[r]):m(s,u,"beforeend")}else{y=typeof c=="string"?c:c.c;let m=(k,M,v)=>{v&&(!M||M.t)?k.insertAdjacentText(v,y):k.parentNode.insertBefore(document.createTextNode(y),k)};r===0?m(s,u,"afterbegin"):(l?.length??0)+A>r?m(s.childNodes[r]):m(s,u,"beforeend")}A++}}let x=(l?.length??0)+A;if(x>=r)for(let c=x-1;c>=r;c--)s.childNodes[c].remove()};typeof o=="string"&&(o=JSON.parse(o)),o??={};let b=!0,L=()=>{b||(b=!0,Promise.resolve().then(H))},E=Object.getPrototypeOf(o)===Proxy.prototype?o:z(o,L),h=typeof t=="string"?document.querySelector(t)||document.body.appendChild(document.createElement("div")):t;if(typeof n=="string")try{n=JSON.parse(n)}catch{n=void 0}n??=O(h);let w=!0,D=!1,H=()=>{if(w&&!D&&b&&p<=0){D=!0,b=!1;let s=R(e(E));if(i(h,s,n),n=s,d=f,f=[],D=!1,b)throw new Error("update during render")}};return H(),[L,()=>{if(w){w=!1;for(let s=h.childNodes.length-1;s>=0;s--)h.childNodes[s].remove()}},E]};export{W as conditional,ne as factory,pe as fctory,le as match,ge as memo,Ie as mount,he as nde,F as node,ke as text};
//# sourceMappingURL=staark.min.js.map
