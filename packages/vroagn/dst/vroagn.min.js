var F=(B)=>{if(typeof B==="object"){let z=Array.isArray(B)?[]:{};for(let U in B)z[U]=F(B[U]);return z}return B};var I=async(B)=>{if(B>0)return new Promise((z)=>setTimeout(z,B));return null};var V=(B)=>B.split(";")[0].trim().toLowerCase(),O=(B)=>{let z=B.match(/\.([^./?]+)(?:[?#]|$)/);return z?z[1].toLowerCase():null},j=(B,z,U)=>{let D=z.get("Content-Type");if(D)return V(D);if(U){if(U.Accept){let C=U.Accept.split(",");for(let J of C)if(J.trim()!=="*/*")return V(J)}}let Y=O(B);if(Y)return Y;return""};var h={method:"get",retryCodes:[429,503,504],retryDelay:500},p=(B)=>{B={...h,...F(B)};let z=0,U=0,D=0,Y=null,C=async(f)=>{let W=Date.now(),L=f-(W-z);z=W+(L>0?L:0),await I(L)},J=(f)=>{return new Promise((W)=>{if(Y)clearTimeout(Y);Y=setTimeout(W,f)})},$=async(f)=>{if(f.maxRequests!==void 0&&D>=f.maxRequests)return[Error("Maximum request limit reached"),null,null];D++;let W={cache:f.cache,credentials:f.credentials,headers:f.headers,method:f.method,mode:f.mode,redirect:f.redirect,body:f.body?JSON.stringify(f.body):void 0},L=(f.domain||"")+(f.path||"");if(f.queryParams)L+="?"+new URLSearchParams(f.queryParams).toString();if(f.timeout){let G=f.abort||new AbortController;W.signal=G.signal,setTimeout(()=>G.abort(),f.timeout)}let N=async()=>{let G=await(f.fetch??fetch)(L,W);if(!G.ok)return[Error("Invalid response"),G,null];try{let X,E=!1,x=f.type||j(L,G.headers,f.headers);if(f.parsers){for(let H of f.parsers)if(E=H.types.includes(x),E){X=await H.parser(G,f,x);break}}if(!E)switch(x.toLowerCase()){case"arraybuffer":X=await G.arrayBuffer();break;case"blob":X=await G.blob();break;case"formdata":X=await G.formData();break;case"text/plain":case"text":case"txt":X=await G.text();break;case"text/html-partial":case"html-partial":X=await G.text();let H=document.createElement("template");H.innerHTML=X,X=H.content.childNodes;break;case"text/html":case"html":X=await G.text(),X=new DOMParser().parseFromString(X,"text/html");break;case"application/json":case"text/json":case"json":X=await G.json();break;case"image/svg+xml":case"svg":X=await G.text(),X=new DOMParser().parseFromString(X,"image/svg+xml");break;case"application/xml":case"text/xml":case"xml":X=await G.text(),X=new DOMParser().parseFromString(X,"application/xml");break}return[null,G,X]}catch(X){return[X||Error("Thrown parsing error is falsy"),G,null]}},_=async()=>{let G=0,X=f.retryAttempts||0,E=f.retryDelay||0;while(G<X){let[x,H,A]=await N();if(!x)return[x,H,A];if(!f.retryCodes?.includes(H.status||200))return[Error("Invalid status code"),H,A];if(G++,G>=X)return[Error("Too many retry attempts"),H,A];let P=E*Math.pow(2,G-1),R=H.headers.get("Retry-After");if(R){let w=parseInt(R,10);if(!isNaN(w))P=Math.max(P,w*1000);else{let q=new Date(R).getTime();if(!isNaN(q)){let S=Date.now();P=Math.max(P,q-S)}}}await I(P)}return N()},[K,M,Z]=await _();if(!M.ok)return[Error(M.statusText),M,Z];return[K,M,Z]};return async(f)=>{let W={...B,...F(f)};if(B.headers)W.headers={...B.headers,...W.headers};if(W.debounce)await J(W.debounce);if(W.delay)await I(W.delay);if(W.throttle)await C(W.throttle);if(W.maxConcurrency&&U>=W.maxConcurrency)await new Promise((N)=>{let _=null,K=()=>{if(U>=W.maxConcurrency)_=requestAnimationFrame(K);else{if(_)clearInterval(_);N(null)}};_=requestAnimationFrame(K)});U++;let L=await $(W);return U--,L}};var g=["tsv","text/tab-separated-values"],u=(B)=>{return{types:B?.types||["csv","text/csv",...g],parser:async(z,U,D)=>{let Y={columnDelimiter:g.includes(D)?"\t":",",rowDelimiter:`
`,escapeCharacter:'"',...B},C=await z.text(),J=[],$=[],f="",W=!1;for(let L=0;L<C.length;L++){let N=C[L],_=C[L+1];if(N===Y.escapeCharacter)if(_===Y.escapeCharacter&&W)f+=Y.escapeCharacter,L++;else W=!W;else if(N===Y.columnDelimiter&&!W)$.push(f),f="";else if(N===Y.rowDelimiter&&!W)$.push(f),f="",J.push($),$=[];else f+=N}if(f)$.push(f),f="";if($.length>0)J.push($);if(Y.hasHeaders){let L=J[0];return J.slice(1).map((N)=>{return L.reduce((_,K,M)=>{return _[K]=N[M]||"",_},{})})}return J}}};var i=(B={})=>{return{types:B.types||["ini"],parser:async(z,U,D)=>{let Y=await z.text(),C={},J=Y.split(/\r?\n/).map((f)=>f.trim()),$="";for(let f of J){if(f===""||f.startsWith(";")||f.startsWith("#"))continue;if(f.startsWith("[")&&f.endsWith("]")){if($=f.slice(1,-1).trim(),!C[$])C[$]={}}else{let[W,...L]=f.split("="),N=L.join("=").trim();if($===""){if(!C.global)C.global={};C.global[W.trim()]=N}else C[$][W.trim()]=N}}return C}}};var Q=(B)=>{if(B.startsWith('"')&&B.endsWith('"'))return B.slice(1,-1);if(B.startsWith("'")&&B.endsWith("'"))return B.slice(1,-1);if(B==="true"||B==="false")return B==="true";if(!isNaN(Number(B)))return Number(B);if(B.match(/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(.\d+)?(Z|[+-]\d{2}:\d{2})?)?$/))return new Date(B);return B},b=(B)=>{let z={},U="",D="",Y=!1,C="",J=!1;for(let $=1;$<B.length-1;$++){let f=B[$];if(!Y&&(f==='"'||f==="'"))Y=!0,C=f;else if(Y&&f===C)Y=!1;else if(!Y&&f==="=")J=!0;else if(!Y&&f===",")z[U.trim()]=Q(D.trim()),U="",D="",J=!1;else if(J)D+=f;else U+=f}if(U)z[U.trim()]=Q(D.trim());return z},s=(B={})=>{return{types:B.types||["toml","application/toml"],parser:async(z,U,D)=>{let Y=await z.text(),C={},J=C,$=null,f=null,W=null,L=Y.split(/\r?\n/);for(let N=0;N<L.length;N++){let _=L[N].trim();if(_===""||_.startsWith("#"))continue;if(f!==null){if(_.endsWith(W))f+=_.slice(0,-W.length),J[Object.keys(J).pop()]=f,f=null,W=null;else f+=_+`
`;continue}if(_.startsWith("[")&&_.endsWith("]")){let K=_.slice(1,-1).trim();J=C;let M=K.split(".");for(let Z of M){if(!J[Z])J[Z]={};J=J[Z]}$=null}else if(_.startsWith("[[")&&_.endsWith("]]")){let M=_.slice(2,-2).trim().split("."),Z=C;for(let E=0;E<M.length-1;E++){if(!Z[M[E]])Z[M[E]]={};Z=Z[M[E]]}let G=M[M.length-1];if(!Z[G])Z[G]=[];let X={};Z[G].push(X),J=X,$=null}else{let[K,...M]=_.split("="),Z=M.join("=").trim();if(Z.startsWith('"""')||Z.startsWith("'''")){if(W=Z.slice(0,3),f=Z.slice(3),Z.endsWith(W))J[K.trim()]=f.slice(0,-3),f=null,W=null}else if(Z.startsWith("{")&&Z.endsWith("}"))J[K.trim()]=b(Z);else if(Z.startsWith("[")&&!Z.endsWith("]"))$=[],Z=Z.slice(1).trim();else if($!==null)if(Z.endsWith("]"))$.push(Q(Z.slice(0,-1).trim())),J[K.trim()]=$,$=null;else $.push(Q(Z));else J[K.trim()]=Q(Z)}}return C}}};var k=(B,z)=>{if(B==="null"||B==="~")return null;if(B==="true")return!0;if(B==="false")return!1;if(B.startsWith('"')&&B.endsWith('"'))return B.slice(1,-1);if(B.startsWith("'")&&B.endsWith("'"))return B.slice(1,-1);if(!isNaN(Number(B)))return Number(B);if(B.startsWith("[")&&B.endsWith("]"))return B.slice(1,-1).split(",").map((U)=>k(U.trim(),z));if(B.startsWith("*")){let U=B.slice(1).trim();return z[U]}if(B.includes("!!")){let[U,D]=B.split(" ");switch(U){case"!!int":return parseInt(D);case"!!float":return parseFloat(D);case"!!str":return D;case"!!bool":return D.toLowerCase()==="true";default:return D}}return B},r=(B={})=>{return{types:B.types||["yaml","application/yaml","text/yaml"],parser:async(z,U,D)=>{let Y=(await z.text()).split(`
`),C={},J=C,$=[C],f=0,W=null,L=[],N={};for(let _=0;_<Y.length;_++){let K=Y[_].trimEnd();if(K.trim().startsWith("#"))continue;let M=K.search(/\S/);if(W!==null)if(M>f){L.push(K.trim());continue}else J[W]=L.join(`
`),W=null,L=[];if(M>f)$.push(J),J=J[Object.keys(J).pop()];else if(M<f)while(M<f)$.pop(),J=$[$.length-1],f-=B.indentSize||2;if(f=M,K.trim()==="-"){if(!Array.isArray(J)){let E=Object.keys(J).pop();J[E]=[],J=J[E]}J.push({}),J=J[J.length-1];continue}let Z=K.indexOf(":");if(Z===-1)continue;let G=K.slice(0,Z).trim(),X=K.slice(Z+1).trim();if(X.startsWith("&")){let E=X.slice(1).split(" ")[0];X=X.slice(E.length+2).trim();let x=k(X,N);N[E]=x,J[G]=x}else if(X.startsWith("*")){let E=X.slice(1).trim();J[G]=N[E]}else if(X==="|"||X===">")W=G,f+=B.indentSize||2;else if(X)J[G]=k(X,N);else J[G]={}}return C}}};export{r as yamlParser,s as tomlParser,i as iniParser,u as csvParser,p as create};

//# debugId=57BD01A361E1D94664756E2164756E21
