var F=Object.defineProperty;var N=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var S=(e,n,s)=>n in e?F(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,w=(e,n)=>{for(var s in n||(n={}))M.call(n,s)&&S(e,s,n[s]);if(N)for(var s of N(n))L.call(n,s)&&S(e,s,n[s]);return e};var g=(e,n,s)=>new Promise((p,o)=>{var r=t=>{try{i(s.next(t))}catch(l){o(l)}},a=t=>{try{i(s.throw(t))}catch(l){o(l)}},i=t=>t.done?p(t.value):Promise.resolve(t.value).then(r,a);i((s=s.apply(e,n)).next())});var q=e=>{if(typeof e=="object")if(Array.isArray(e)){let n=[];for(let s=0;s<e.length;s++)n.push(q(e[s]));e=n}else{let n={};for(let s in e)n[s]=q(e[s]);e=n}return e};var j=e=>g(void 0,null,function*(){return e>0?new Promise(n=>setTimeout(n,e)):null});var E=e=>e.split(";")[0].trim().toLowerCase(),z=e=>{let n=e.match(/\.([^./?]+)(?:[?#]|$)/);return n?n[1].toLowerCase():null},Y=function(e,n,s){let p=n.get("Content-Type");if(p)return E(p);if(s&&s.Accept){let r=s.Accept.split(",");for(let a of r)if(a.trim()!=="*/*")return E(a)}let o=z(e);return o||""};var U={method:"get",retryCodes:[429,503,504],retryDelay:500},X=e=>{e=w(w({},U),q(e));let n=0,s=0,p=0,o=null,r=t=>g(void 0,null,function*(){let l=Date.now(),f=t-(l-n);n=l+(f>0?f:0),yield j(f)}),a=t=>new Promise(l=>{o&&clearTimeout(o),o=setTimeout(l,t)}),i=t=>g(void 0,null,function*(){if(t.maxRequests!==void 0&&p>=t.maxRequests)return[new Error("Maximum request limit reached"),null,null];p++;let l={cache:t.cache,credentials:t.credentials,headers:t.headers,method:t.method,mode:t.mode,redirect:t.redirect,body:t.body?JSON.stringify(t.body):void 0},f=(t.domain||"")+(t.path||"");if(t.queryParams&&(f+="?"+new URLSearchParams(t.queryParams).toString()),t.timeout){let c=t.abort||new AbortController;l.signal=c.signal,setTimeout(()=>c.abort(),t.timeout)}let d=()=>g(void 0,null,function*(){let c=yield fetch(f,l);if(!c.ok)return[new Error("Invalid response"),c,null];try{let u,x=!1,O=t.type||Y(f,c.headers,t.headers);if(t.responseParsers){for(let R of t.responseParsers)if(x=R.types.includes(O),x){u=yield R.parser(c,t);break}}if(!x)switch(O.toLowerCase()){case"arraybuffer":u=yield c.arrayBuffer();break;case"blob":u=yield c.blob();break;case"formdata":u=yield c.formData();break;case"text/plain":case"text":case"txt":u=yield c.text();break;case"text/html-partial":case"html-partial":u=yield c.text();let R=document.createElement("template");R.innerHTML=u,u=R.content.childNodes[0];break;case"text/html":case"html":u=yield c.text(),u=new DOMParser().parseFromString(u,"text/html");break;case"application/json":case"text/json":case"json":u=yield c.json();break;case"image/svg+xml":case"svg":u=yield c.text(),u=new DOMParser().parseFromString(u,"image/svg+xml");break;case"application/xml":case"text/xml":case"xml":u=yield c.text(),u=new DOMParser().parseFromString(u,"application/xml");break}return[null,c,u]}catch(u){return[u||new Error("Thrown parsing error is falsy"),c,null]}}),h=()=>g(void 0,null,function*(){var O;let c=0,u=t.retryAttempts||0,x=t.retryDelay||0;for(;c<u;){let[R,T,C]=yield d();if(!R)return[R,T,C];if(!((O=t.retryCodes)!=null&&O.includes(T.status||200)))return[new Error("Invalid status code"),T,C];if(c++,c>=u)return[new Error("Too many retry attempts"),T,C];let P=x*Math.pow(2,c-1),k=T.headers.get("Retry-After");if(k){let V=parseInt(k,10);if(!isNaN(V))P=Math.max(P,V*1e3);else{let A=new Date(k).getTime();if(!isNaN(A)){let I=Date.now();P=Math.max(P,A-I)}}}yield j(P)}return d()}),[y,m,b]=yield h();return m.ok?[y,m,b]:[new Error(m.statusText),m,b]});return t=>g(void 0,null,function*(){let l=w(w({},e),q(t));e.headers&&(l.headers=w(w({},e.headers),l.headers)),l.debounce&&(yield a(l.debounce)),l.delay&&(yield j(l.delay)),l.throttle&&(yield r(l.throttle)),l.maxConcurrency&&s>=l.maxConcurrency&&(yield new Promise(d=>{let h=null,y=()=>{s>=l.maxConcurrency?h=requestAnimationFrame(y):(h&&clearInterval(h),d(null))};h=requestAnimationFrame(y)})),s++;let f=yield i(l);return s--,f})};var te=e=>(e=w({columnDelimiter:",",rowDelimiter:"\n",escapeCharacter:'"'},e),{types:e.types||["csv","text/csv"],parser:(n,s)=>g(void 0,null,function*(){let p=yield n.text(),o=[],r=[],a="",i=!1;for(let t=0;t<p.length;t++){let l=p[t],f=p[t+1];l===e.escapeCharacter?f===e.escapeCharacter&&i?(a+=e.escapeCharacter,t++):i=!i:l===e.columnDelimiter&&!i?(r.push(a),a=""):l===e.rowDelimiter&&!i?(r.push(a),a="",o.push(r),r=[]):a+=l}if(a&&(r.push(a),a=""),r.length>0&&o.push(r),e.hasHeaders){let t=o[0];return o.slice(1).map(l=>t.reduce((f,d,h)=>(f[d]=l[h]||"",f),{}))}return o})});var ne=(e={})=>({types:e.types||["ini"],parser:(n,s)=>g(void 0,null,function*(){let p=yield n.text(),o={},r=p.split(/\r?\n/).map(i=>i.trim()),a="";for(let i of r)if(!(i===""||i.startsWith(";")||i.startsWith("#")))if(i.startsWith("[")&&i.endsWith("]"))a=i.slice(1,-1).trim(),o[a]||(o[a]={});else{let[t,...l]=i.split("="),f=l.join("=").trim();a===""?(o.global||(o.global={}),o.global[t.trim()]=f):o[a][t.trim()]=f}return o})});var W=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e==="true"||e==="false"?e==="true":isNaN(Number(e))?e.match(/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(.\d+)?(Z|[+-]\d{2}:\d{2})?)?$/)?new Date(e):e:Number(e),H=e=>{let n={},s="",p="",o=!1,r="",a=!1;for(let i=1;i<e.length-1;i++){let t=e[i];!o&&(t==='"'||t==="'")?(o=!0,r=t):o&&t===r?o=!1:!o&&t==="="?a=!0:!o&&t===","?(n[s.trim()]=W(p.trim()),s="",p="",a=!1):a?p+=t:s+=t}return s&&(n[s.trim()]=W(p.trim())),n},le=(e={})=>({types:e.types||["toml","application/toml"],parser:(n,s)=>g(void 0,null,function*(){let p=yield n.text(),o={},r=o,a=null,i=null,t=null,l=p.split(/\r?\n/);for(let f=0;f<l.length;f++){let d=l[f].trim();if(!(d===""||d.startsWith("#"))){if(i!==null){d.endsWith(t)?(i+=d.slice(0,-t.length),r[Object.keys(r).pop()]=i,i=null,t=null):i+=d+"\n";continue}if(d.startsWith("[")&&d.endsWith("]")){let h=d.slice(1,-1).trim();r=o;let y=h.split(".");for(let m of y)r[m]||(r[m]={}),r=r[m];a=null}else if(d.startsWith("[[")&&d.endsWith("]]")){let y=d.slice(2,-2).trim().split("."),m=o;for(let u=0;u<y.length-1;u++)m[y[u]]||(m[y[u]]={}),m=m[y[u]];let b=y[y.length-1];m[b]||(m[b]=[]);let c={};m[b].push(c),r=c,a=null}else{let[h,...y]=d.split("="),m=y.join("=").trim();m.startsWith('"""')||m.startsWith("'''")?(t=m.slice(0,3),i=m.slice(3),m.endsWith(t)&&(r[h.trim()]=i.slice(0,-3),i=null,t=null)):m.startsWith("{")&&m.endsWith("}")?r[h.trim()]=H(m):m.startsWith("[")&&!m.endsWith("]")?(a=[],m=m.slice(1).trim()):a!==null?m.endsWith("]")?(a.push(W(m.slice(0,-1).trim())),r[h.trim()]=a,a=null):a.push(W(m)):r[h.trim()]=W(m)}}}return o})});var D=(e,n)=>{if(e==="null"||e==="~")return null;if(e==="true")return!0;if(e==="false")return!1;if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1);if(!isNaN(Number(e)))return Number(e);if(e.startsWith("[")&&e.endsWith("]"))return e.slice(1,-1).split(",").map(s=>D(s.trim(),n));if(e.startsWith("*")){let s=e.slice(1).trim();return n[s]}if(e.includes("!!")){let[s,p]=e.split(" ");switch(s){case"!!int":return parseInt(p);case"!!float":return parseFloat(p);case"!!str":return p;case"!!bool":return p.toLowerCase()==="true";default:return p}}return e},ue=(e={})=>({types:e.types||["yaml","application/yaml","text/yaml"],parser:(n,s)=>g(void 0,null,function*(){let p=(yield n.text()).split("\n"),o={},r=o,a=[o],i=0,t=null,l=[],f={};for(let d=0;d<p.length;d++){let h=p[d].trimEnd();if(h.trim().startsWith("#"))continue;let y=h.search(/\S/);if(t!==null)if(y>i){l.push(h.trim());continue}else r[t]=l.join("\n"),t=null,l=[];if(y>i)a.push(r),r=r[Object.keys(r).pop()];else if(y<i)for(;y<i;)a.pop(),r=a[a.length-1],i-=e.indentSize||2;if(i=y,h.trim()==="-"){if(!Array.isArray(r)){let u=Object.keys(r).pop();r[u]=[],r=r[u]}r.push({}),r=r[r.length-1];continue}let m=h.indexOf(":");if(m===-1)continue;let b=h.slice(0,m).trim(),c=h.slice(m+1).trim();if(c.startsWith("&")){let u=c.slice(1).split(" ")[0];c=c.slice(u.length+2).trim();let x=D(c,f);f[u]=x,r[b]=x}else if(c.startsWith("*")){let u=c.slice(1).trim();r[b]=f[u]}else c==="|"||c===">"?(t=b,i+=e.indentSize||2):c?r[b]=D(c,f):r[b]={}}return o})});export{X as create,te as csvParser,ne as iniParser,le as tomlParser,ue as yamlParser};
//# sourceMappingURL=vroagn.min.js.map
