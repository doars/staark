var M=Object.defineProperty;var N=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var S=(e,i,n)=>i in e?M(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n,R=(e,i)=>{for(var n in i||(i={}))L.call(i,n)&&S(e,n,i[n]);if(N)for(var n of N(i))z.call(i,n)&&S(e,n,i[n]);return e};var b=(e,i,n)=>new Promise((f,a)=>{var r=t=>{try{s(n.next(t))}catch(l){a(l)}},u=t=>{try{s(n.throw(t))}catch(l){a(l)}},s=t=>t.done?f(t.value):Promise.resolve(t.value).then(r,u);s((n=n.apply(e,i)).next())});var W=e=>{if(typeof e=="object"){let i=Array.isArray(e)?[]:{};for(let n in e)i[n]=W(e[n]);return i}return e};var j=e=>b(void 0,null,function*(){return e>0?new Promise(i=>setTimeout(i,e)):null});var E=e=>e.split(";")[0].trim().toLowerCase(),U=e=>{let i=e.match(/\.([^./?]+)(?:[?#]|$)/);return i?i[1].toLowerCase():null},Y=function(e,i,n){let f=i.get("Content-Type");if(f)return E(f);if(n&&n.Accept){let r=n.Accept.split(",");for(let u of r)if(u.trim()!=="*/*")return E(u)}let a=U(e);return a||""};var H={method:"get",retryCodes:[429,503,504],retryDelay:500},v=e=>{e=R(R({},H),W(e));let i=0,n=0,f=0,a=null,r=t=>b(void 0,null,function*(){let l=Date.now(),m=t-(l-i);i=l+(m>0?m:0),yield j(m)}),u=t=>new Promise(l=>{a&&clearTimeout(a),a=setTimeout(l,t)}),s=t=>b(void 0,null,function*(){if(t.maxRequests!==void 0&&f>=t.maxRequests)return[new Error("Maximum request limit reached"),null,null];f++;let l={cache:t.cache,credentials:t.credentials,headers:t.headers,method:t.method,mode:t.mode,redirect:t.redirect,body:t.body?JSON.stringify(t.body):void 0},m=(t.domain||"")+(t.path||"");if(t.queryParams&&(m+="?"+new URLSearchParams(t.queryParams).toString()),t.timeout){let c=t.abort||new AbortController;l.signal=c.signal,setTimeout(()=>c.abort(),t.timeout)}let p=()=>b(void 0,null,function*(){var g;let c=yield((g=t.fetch)!=null?g:fetch)(m,l);if(!c.ok)return[new Error("Invalid response"),c,null];try{let y,O=!1,T=t.type||Y(m,c.headers,t.headers);if(t.parsers){for(let w of t.parsers)if(O=w.types.includes(T),O){y=yield w.parser(c,t,T);break}}if(!O)switch(T.toLowerCase()){case"arraybuffer":y=yield c.arrayBuffer();break;case"blob":y=yield c.blob();break;case"formdata":y=yield c.formData();break;case"text/plain":case"text":case"txt":y=yield c.text();break;case"text/html-partial":case"html-partial":y=yield c.text();let w=document.createElement("template");w.innerHTML=y,y=w.content.childNodes;break;case"text/html":case"html":y=yield c.text(),y=new DOMParser().parseFromString(y,"text/html");break;case"application/json":case"text/json":case"json":y=yield c.json();break;case"image/svg+xml":case"svg":y=yield c.text(),y=new DOMParser().parseFromString(y,"image/svg+xml");break;case"application/xml":case"text/xml":case"xml":y=yield c.text(),y=new DOMParser().parseFromString(y,"application/xml");break}return[null,c,y]}catch(y){return[y||new Error("Thrown parsing error is falsy"),c,null]}}),h=()=>b(void 0,null,function*(){var O;let c=0,g=t.retryAttempts||0,y=t.retryDelay||0;for(;c<g;){let[T,w,C]=yield p();if(!T)return[T,w,C];if(!((O=t.retryCodes)!=null&&O.includes(w.status||200)))return[new Error("Invalid status code"),w,C];if(c++,c>=g)return[new Error("Too many retry attempts"),w,C];let P=y*Math.pow(2,c-1),k=w.headers.get("Retry-After");if(k){let V=parseInt(k,10);if(!isNaN(V))P=Math.max(P,V*1e3);else{let A=new Date(k).getTime();if(!isNaN(A)){let F=Date.now();P=Math.max(P,A-F)}}}yield j(P)}return p()}),[d,o,x]=yield h();return o.ok?[d,o,x]:[new Error(o.statusText),o,x]});return t=>b(void 0,null,function*(){let l=R(R({},e),W(t));e.headers&&(l.headers=R(R({},e.headers),l.headers)),l.debounce&&(yield u(l.debounce)),l.delay&&(yield j(l.delay)),l.throttle&&(yield r(l.throttle)),l.maxConcurrency&&n>=l.maxConcurrency&&(yield new Promise(p=>{let h=null,d=()=>{n>=l.maxConcurrency?h=requestAnimationFrame(d):(h&&clearInterval(h),p(null))};h=requestAnimationFrame(d)})),n++;let m=yield s(l);return n--,m})};var I=["tsv","text/tab-separated-values"],re=e=>({types:(e==null?void 0:e.types)||["csv","text/csv",...I],parser:(i,n,f)=>b(void 0,null,function*(){let a=R({columnDelimiter:I.includes(f)?"	":",",rowDelimiter:"\n",escapeCharacter:'"'},e),r=yield i.text(),u=[],s=[],t="",l=!1;for(let m=0;m<r.length;m++){let p=r[m],h=r[m+1];p===a.escapeCharacter?h===a.escapeCharacter&&l?(t+=a.escapeCharacter,m++):l=!l:p===a.columnDelimiter&&!l?(s.push(t),t=""):p===a.rowDelimiter&&!l?(s.push(t),t="",u.push(s),s=[]):t+=p}if(t&&(s.push(t),t=""),s.length>0&&u.push(s),a.hasHeaders){let m=u[0];return u.slice(1).map(p=>m.reduce((h,d,o)=>(h[d]=p[o]||"",h),{}))}return u})});var ie=(e={})=>({types:e.types||["ini"],parser:(i,n)=>b(void 0,null,function*(){let f=yield i.text(),a={},r=f.split(/\r?\n/).map(s=>s.trim()),u="";for(let s of r)if(!(s===""||s.startsWith(";")||s.startsWith("#")))if(s.startsWith("[")&&s.endsWith("]"))u=s.slice(1,-1).trim(),a[u]||(a[u]={});else{let[t,...l]=s.split("="),m=l.join("=").trim();u===""?(a.global||(a.global={}),a.global[t.trim()]=m):a[u][t.trim()]=m}return a})});var q=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e==="true"||e==="false"?e==="true":isNaN(Number(e))?e.match(/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(.\d+)?(Z|[+-]\d{2}:\d{2})?)?$/)?new Date(e):e:Number(e),K=e=>{let i={},n="",f="",a=!1,r="",u=!1;for(let s=1;s<e.length-1;s++){let t=e[s];!a&&(t==='"'||t==="'")?(a=!0,r=t):a&&t===r?a=!1:!a&&t==="="?u=!0:!a&&t===","?(i[n.trim()]=q(f.trim()),n="",f="",u=!1):u?f+=t:n+=t}return n&&(i[n.trim()]=q(f.trim())),i},oe=(e={})=>({types:e.types||["toml","application/toml"],parser:(i,n)=>b(void 0,null,function*(){let f=yield i.text(),a={},r=a,u=null,s=null,t=null,l=f.split(/\r?\n/);for(let m=0;m<l.length;m++){let p=l[m].trim();if(!(p===""||p.startsWith("#"))){if(s!==null){p.endsWith(t)?(s+=p.slice(0,-t.length),r[Object.keys(r).pop()]=s,s=null,t=null):s+=p+"\n";continue}if(p.startsWith("[")&&p.endsWith("]")){let h=p.slice(1,-1).trim();r=a;let d=h.split(".");for(let o of d)r[o]||(r[o]={}),r=r[o];u=null}else if(p.startsWith("[[")&&p.endsWith("]]")){let d=p.slice(2,-2).trim().split("."),o=a;for(let g=0;g<d.length-1;g++)o[d[g]]||(o[d[g]]={}),o=o[d[g]];let x=d[d.length-1];o[x]||(o[x]=[]);let c={};o[x].push(c),r=c,u=null}else{let[h,...d]=p.split("="),o=d.join("=").trim();o.startsWith('"""')||o.startsWith("'''")?(t=o.slice(0,3),s=o.slice(3),o.endsWith(t)&&(r[h.trim()]=s.slice(0,-3),s=null,t=null)):o.startsWith("{")&&o.endsWith("}")?r[h.trim()]=K(o):o.startsWith("[")&&!o.endsWith("]")?(u=[],o=o.slice(1).trim()):u!==null?o.endsWith("]")?(u.push(q(o.slice(0,-1).trim())),r[h.trim()]=u,u=null):u.push(q(o)):r[h.trim()]=q(o)}}}return a})});var D=(e,i)=>{if(e==="null"||e==="~")return null;if(e==="true")return!0;if(e==="false")return!1;if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1);if(!isNaN(Number(e)))return Number(e);if(e.startsWith("[")&&e.endsWith("]"))return e.slice(1,-1).split(",").map(n=>D(n.trim(),i));if(e.startsWith("*")){let n=e.slice(1).trim();return i[n]}if(e.includes("!!")){let[n,f]=e.split(" ");switch(n){case"!!int":return parseInt(f);case"!!float":return parseFloat(f);case"!!str":return f;case"!!bool":return f.toLowerCase()==="true";default:return f}}return e},me=(e={})=>({types:e.types||["yaml","application/yaml","text/yaml"],parser:(i,n)=>b(void 0,null,function*(){let f=(yield i.text()).split("\n"),a={},r=a,u=[a],s=0,t=null,l=[],m={};for(let p=0;p<f.length;p++){let h=f[p].trimEnd();if(h.trim().startsWith("#"))continue;let d=h.search(/\S/);if(t!==null)if(d>s){l.push(h.trim());continue}else r[t]=l.join("\n"),t=null,l=[];if(d>s)u.push(r),r=r[Object.keys(r).pop()];else if(d<s)for(;d<s;)u.pop(),r=u[u.length-1],s-=e.indentSize||2;if(s=d,h.trim()==="-"){if(!Array.isArray(r)){let g=Object.keys(r).pop();r[g]=[],r=r[g]}r.push({}),r=r[r.length-1];continue}let o=h.indexOf(":");if(o===-1)continue;let x=h.slice(0,o).trim(),c=h.slice(o+1).trim();if(c.startsWith("&")){let g=c.slice(1).split(" ")[0];c=c.slice(g.length+2).trim();let y=D(c,m);m[g]=y,r[x]=y}else if(c.startsWith("*")){let g=c.slice(1).trim();r[x]=m[g]}else c==="|"||c===">"?(t=x,s+=e.indentSize||2):c?r[x]=D(c,m):r[x]={}}return a})});export{v as create,re as csvParser,ie as iniParser,oe as tomlParser,me as yamlParser};
//# sourceMappingURL=vroagn.min.js.map
