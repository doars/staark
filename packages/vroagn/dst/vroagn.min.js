var M=Object.defineProperty;var N=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var S=(e,i,r)=>i in e?M(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r,x=(e,i)=>{for(var r in i||(i={}))L.call(i,r)&&S(e,r,i[r]);if(N)for(var r of N(i))z.call(i,r)&&S(e,r,i[r]);return e};var g=(e,i,r)=>new Promise((h,a)=>{var s=t=>{try{n(r.next(t))}catch(l){a(l)}},m=t=>{try{n(r.throw(t))}catch(l){a(l)}},n=t=>t.done?h(t.value):Promise.resolve(t.value).then(s,m);n((r=r.apply(e,i)).next())});var q=e=>{if(typeof e=="object")if(Array.isArray(e)){let i=[];for(let r=0;r<e.length;r++)i.push(q(e[r]));e=i}else{let i={};for(let r in e)i[r]=q(e[r]);e=i}return e};var j=e=>g(void 0,null,function*(){return e>0?new Promise(i=>setTimeout(i,e)):null});var E=e=>e.split(";")[0].trim().toLowerCase(),U=e=>{let i=e.match(/\.([^./?]+)(?:[?#]|$)/);return i?i[1].toLowerCase():null},Y=function(e,i,r){let h=i.get("Content-Type");if(h)return E(h);if(r&&r.Accept){let s=r.Accept.split(",");for(let m of s)if(m.trim()!=="*/*")return E(m)}let a=U(e);return a||""};var H={method:"get",retryCodes:[429,503,504],retryDelay:500},v=e=>{e=x(x({},H),q(e));let i=0,r=0,h=0,a=null,s=t=>g(void 0,null,function*(){let l=Date.now(),p=t-(l-i);i=l+(p>0?p:0),yield j(p)}),m=t=>new Promise(l=>{a&&clearTimeout(a),a=setTimeout(l,t)}),n=t=>g(void 0,null,function*(){if(t.maxRequests!==void 0&&h>=t.maxRequests)return[new Error("Maximum request limit reached"),null,null];h++;let l={cache:t.cache,credentials:t.credentials,headers:t.headers,method:t.method,mode:t.mode,redirect:t.redirect,body:t.body?JSON.stringify(t.body):void 0},p=(t.domain||"")+(t.path||"");if(t.queryParams&&(p+="?"+new URLSearchParams(t.queryParams).toString()),t.timeout){let c=t.abort||new AbortController;l.signal=c.signal,setTimeout(()=>c.abort(),t.timeout)}let f=()=>g(void 0,null,function*(){let c=yield fetch(p,l);if(!c.ok)return[new Error("Invalid response"),c,null];try{let u,w=!1,O=t.type||Y(p,c.headers,t.headers);if(t.parsers){for(let R of t.parsers)if(w=R.types.includes(O),w){u=yield R.parser(c,t,O);break}}if(!w)switch(O.toLowerCase()){case"arraybuffer":u=yield c.arrayBuffer();break;case"blob":u=yield c.blob();break;case"formdata":u=yield c.formData();break;case"text/plain":case"text":case"txt":u=yield c.text();break;case"text/html-partial":case"html-partial":u=yield c.text();let R=document.createElement("template");R.innerHTML=u,u=R.content.childNodes;break;case"text/html":case"html":u=yield c.text(),u=new DOMParser().parseFromString(u,"text/html");break;case"application/json":case"text/json":case"json":u=yield c.json();break;case"image/svg+xml":case"svg":u=yield c.text(),u=new DOMParser().parseFromString(u,"image/svg+xml");break;case"application/xml":case"text/xml":case"xml":u=yield c.text(),u=new DOMParser().parseFromString(u,"application/xml");break}return[null,c,u]}catch(u){return[u||new Error("Thrown parsing error is falsy"),c,null]}}),d=()=>g(void 0,null,function*(){var O;let c=0,u=t.retryAttempts||0,w=t.retryDelay||0;for(;c<u;){let[R,T,C]=yield f();if(!R)return[R,T,C];if(!((O=t.retryCodes)!=null&&O.includes(T.status||200)))return[new Error("Invalid status code"),T,C];if(c++,c>=u)return[new Error("Too many retry attempts"),T,C];let P=w*Math.pow(2,c-1),k=T.headers.get("Retry-After");if(k){let V=parseInt(k,10);if(!isNaN(V))P=Math.max(P,V*1e3);else{let A=new Date(k).getTime();if(!isNaN(A)){let F=Date.now();P=Math.max(P,A-F)}}}yield j(P)}return f()}),[y,o,b]=yield d();return o.ok?[y,o,b]:[new Error(o.statusText),o,b]});return t=>g(void 0,null,function*(){let l=x(x({},e),q(t));e.headers&&(l.headers=x(x({},e.headers),l.headers)),l.debounce&&(yield m(l.debounce)),l.delay&&(yield j(l.delay)),l.throttle&&(yield s(l.throttle)),l.maxConcurrency&&r>=l.maxConcurrency&&(yield new Promise(f=>{let d=null,y=()=>{r>=l.maxConcurrency?d=requestAnimationFrame(y):(d&&clearInterval(d),f(null))};d=requestAnimationFrame(y)})),r++;let p=yield n(l);return r--,p})};var I=["tsv","text/tab-separated-values"],re=e=>({types:(e==null?void 0:e.types)||["csv","text/csv",...I],parser:(i,r,h)=>g(void 0,null,function*(){let a=x({columnDelimiter:I.includes(h)?"	":",",rowDelimiter:"\n",escapeCharacter:'"'},e),s=yield i.text(),m=[],n=[],t="",l=!1;for(let p=0;p<s.length;p++){let f=s[p],d=s[p+1];f===a.escapeCharacter?d===a.escapeCharacter&&l?(t+=a.escapeCharacter,p++):l=!l:f===a.columnDelimiter&&!l?(n.push(t),t=""):f===a.rowDelimiter&&!l?(n.push(t),t="",m.push(n),n=[]):t+=f}if(t&&(n.push(t),t=""),n.length>0&&m.push(n),a.hasHeaders){let p=m[0];return m.slice(1).map(f=>p.reduce((d,y,o)=>(d[y]=f[o]||"",d),{}))}return m})});var ie=(e={})=>({types:e.types||["ini"],parser:(i,r)=>g(void 0,null,function*(){let h=yield i.text(),a={},s=h.split(/\r?\n/).map(n=>n.trim()),m="";for(let n of s)if(!(n===""||n.startsWith(";")||n.startsWith("#")))if(n.startsWith("[")&&n.endsWith("]"))m=n.slice(1,-1).trim(),a[m]||(a[m]={});else{let[t,...l]=n.split("="),p=l.join("=").trim();m===""?(a.global||(a.global={}),a.global[t.trim()]=p):a[m][t.trim()]=p}return a})});var W=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e==="true"||e==="false"?e==="true":isNaN(Number(e))?e.match(/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(.\d+)?(Z|[+-]\d{2}:\d{2})?)?$/)?new Date(e):e:Number(e),K=e=>{let i={},r="",h="",a=!1,s="",m=!1;for(let n=1;n<e.length-1;n++){let t=e[n];!a&&(t==='"'||t==="'")?(a=!0,s=t):a&&t===s?a=!1:!a&&t==="="?m=!0:!a&&t===","?(i[r.trim()]=W(h.trim()),r="",h="",m=!1):m?h+=t:r+=t}return r&&(i[r.trim()]=W(h.trim())),i},oe=(e={})=>({types:e.types||["toml","application/toml"],parser:(i,r)=>g(void 0,null,function*(){let h=yield i.text(),a={},s=a,m=null,n=null,t=null,l=h.split(/\r?\n/);for(let p=0;p<l.length;p++){let f=l[p].trim();if(!(f===""||f.startsWith("#"))){if(n!==null){f.endsWith(t)?(n+=f.slice(0,-t.length),s[Object.keys(s).pop()]=n,n=null,t=null):n+=f+"\n";continue}if(f.startsWith("[")&&f.endsWith("]")){let d=f.slice(1,-1).trim();s=a;let y=d.split(".");for(let o of y)s[o]||(s[o]={}),s=s[o];m=null}else if(f.startsWith("[[")&&f.endsWith("]]")){let y=f.slice(2,-2).trim().split("."),o=a;for(let u=0;u<y.length-1;u++)o[y[u]]||(o[y[u]]={}),o=o[y[u]];let b=y[y.length-1];o[b]||(o[b]=[]);let c={};o[b].push(c),s=c,m=null}else{let[d,...y]=f.split("="),o=y.join("=").trim();o.startsWith('"""')||o.startsWith("'''")?(t=o.slice(0,3),n=o.slice(3),o.endsWith(t)&&(s[d.trim()]=n.slice(0,-3),n=null,t=null)):o.startsWith("{")&&o.endsWith("}")?s[d.trim()]=K(o):o.startsWith("[")&&!o.endsWith("]")?(m=[],o=o.slice(1).trim()):m!==null?o.endsWith("]")?(m.push(W(o.slice(0,-1).trim())),s[d.trim()]=m,m=null):m.push(W(o)):s[d.trim()]=W(o)}}}return a})});var D=(e,i)=>{if(e==="null"||e==="~")return null;if(e==="true")return!0;if(e==="false")return!1;if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1);if(!isNaN(Number(e)))return Number(e);if(e.startsWith("[")&&e.endsWith("]"))return e.slice(1,-1).split(",").map(r=>D(r.trim(),i));if(e.startsWith("*")){let r=e.slice(1).trim();return i[r]}if(e.includes("!!")){let[r,h]=e.split(" ");switch(r){case"!!int":return parseInt(h);case"!!float":return parseFloat(h);case"!!str":return h;case"!!bool":return h.toLowerCase()==="true";default:return h}}return e},me=(e={})=>({types:e.types||["yaml","application/yaml","text/yaml"],parser:(i,r)=>g(void 0,null,function*(){let h=(yield i.text()).split("\n"),a={},s=a,m=[a],n=0,t=null,l=[],p={};for(let f=0;f<h.length;f++){let d=h[f].trimEnd();if(d.trim().startsWith("#"))continue;let y=d.search(/\S/);if(t!==null)if(y>n){l.push(d.trim());continue}else s[t]=l.join("\n"),t=null,l=[];if(y>n)m.push(s),s=s[Object.keys(s).pop()];else if(y<n)for(;y<n;)m.pop(),s=m[m.length-1],n-=e.indentSize||2;if(n=y,d.trim()==="-"){if(!Array.isArray(s)){let u=Object.keys(s).pop();s[u]=[],s=s[u]}s.push({}),s=s[s.length-1];continue}let o=d.indexOf(":");if(o===-1)continue;let b=d.slice(0,o).trim(),c=d.slice(o+1).trim();if(c.startsWith("&")){let u=c.slice(1).split(" ")[0];c=c.slice(u.length+2).trim();let w=D(c,p);p[u]=w,s[b]=w}else if(c.startsWith("*")){let u=c.slice(1).trim();s[b]=p[u]}else c==="|"||c===">"?(t=b,n+=e.indentSize||2):c?s[b]=D(c,p):s[b]={}}return a})});export{v as create,re as csvParser,ie as iniParser,oe as tomlParser,me as yamlParser};
//# sourceMappingURL=vroagn.min.js.map
