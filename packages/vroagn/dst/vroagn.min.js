var k=Object.defineProperty;var W=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var q=(e,i,n)=>i in e?k(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n,w=(e,i)=>{for(var n in i||(i={}))V.call(i,n)&&q(e,n,i[n]);if(W)for(var n of W(i))D.call(i,n)&&q(e,n,i[n]);return e};var b=(e,i,n)=>new Promise((u,m)=>{var s=t=>{try{l(n.next(t))}catch(c){m(c)}},o=t=>{try{l(n.throw(t))}catch(c){m(c)}},l=t=>t.done?u(t.value):Promise.resolve(t.value).then(s,o);l((n=n.apply(e,i)).next())});var x=e=>{if(typeof e=="object")if(Array.isArray(e)){let i=[];for(let n=0;n<e.length;n++)i.push(x(e[n]));e=i}else{let i={};for(let n in e)i[n]=x(e[n]);e=i}return e};var O=e=>b(void 0,null,function*(){return e>0?new Promise(i=>setTimeout(i,e)):null});var j=e=>e.split(";")[0].trim().toLowerCase(),S=e=>{let i=e.match(/\.([^./?]+)(?:[?#]|$)/);return i?i[1].toLowerCase():null},C=function(e,i,n){let u=i.get("Content-Type");if(u)return j(u);if(n&&n.Accept){let s=n.Accept.split(",");for(let o of s)if(o.trim()!=="*/*")return j(o)}let m=S(e);return m||""};var A={method:"get",retryCodes:[429,503,504],retryDelay:500},H=e=>{e=w(w({},A),x(e));let i=0,n=0,u=0,m=null,s=t=>b(void 0,null,function*(){let c=Date.now(),p=t-(c-i);i=c+(p>0?p:0),yield O(p)}),o=t=>new Promise(c=>{m&&clearTimeout(m),m=setTimeout(c,t)}),l=t=>b(void 0,null,function*(){let c={cache:t.cache,credentials:t.credentials,headers:t.headers,method:t.method,mode:t.mode,redirect:t.redirect,body:t.body?JSON.stringify(t.body):void 0},p=(t.domain||"")+(t.path||"");if(t.queryParams&&(p+="?"+new URLSearchParams(t.queryParams).toString()),t.timeout){let a=t.abort||new AbortController;c.signal=a.signal,setTimeout(()=>a.abort(),t.timeout)}let f=()=>b(void 0,null,function*(){let a=yield fetch(p,c),r,g=!1,y=t.type||C(p,a.headers,t.headers);if(t.responseParsers){for(let d of t.responseParsers)if(g=d.types.includes(y),g){r=yield d.parser(a,t);break}}if(!g)switch(y.toLowerCase()){case"arraybuffer":r=yield a.arrayBuffer();break;case"blob":r=yield a.blob();break;case"formdata":r=yield a.formData();break;case"text/plain":case"text":case"txt":r=yield a.text();break;case"text/html-partial":case"html-partial":r=yield a.text();let d=document.createElement("template");d.innerHTML=r,r=d.content.childNodes[0];break;case"text/html":case"html":r=yield a.text(),r=new DOMParser().parseFromString(r,"text/html");break;case"application/json":case"text/json":case"json":r=yield a.json();break;case"image/svg+xml":case"svg":r=yield a.text(),r=new DOMParser().parseFromString(r,"image/svg+xml");break;case"application/xml":case"text/xml":case"xml":r=yield a.text(),r=new DOMParser().parseFromString(r,"application/xml");break}return[a,r]}),h=()=>b(void 0,null,function*(){let a=0,r=t.retryAttempts||0,g=t.retryDelay||0;for(;a<r;)try{return yield f()}catch(y){if(a++,a>=r)throw y;yield O(g*Math.pow(2,a-1))}return f()});try{let[a,r]=yield h();if(!a.ok)throw new Error(a.statusText);return[a,r]}catch(a){throw a}});return t=>b(void 0,null,function*(){let c=w(w({},e),x(t));e.headers&&(c.headers=w(w({},e.headers),c.headers)),c.debounce&&(yield o(c.debounce)),c.delay&&(yield O(c.delay)),c.throttle&&(yield s(c.throttle)),c.maxConcurrency&&n>=c.maxConcurrency&&(yield new Promise(p=>{let f=null,h=()=>{n>=c.maxConcurrency?f=requestAnimationFrame(h):(f&&clearInterval(f),p(null))};f=requestAnimationFrame(h)})),n++;try{return yield l(c)}finally{n--}})};var $=e=>(e=w({columnDelimiter:",",rowDelimiter:"\n",escapeCharacter:'"'},e),{types:e.types||["csv","text/csv"],parser:(i,n)=>b(void 0,null,function*(){let u=yield i.text(),m=[],s=[],o="",l=!1;for(let t=0;t<u.length;t++){let c=u[t],p=u[t+1];c===e.escapeCharacter?p===e.escapeCharacter&&l?(o+=e.escapeCharacter,t++):l=!l:c===e.columnDelimiter&&!l?(s.push(o),o=""):c===e.rowDelimiter&&!l?(s.push(o),o="",m.push(s),s=[]):o+=c}if(o&&(s.push(o),o=""),s.length>0&&m.push(s),e.hasHeaders){let t=m[0];return m.slice(1).map(c=>t.reduce((p,f,h)=>(p[f]=c[h]||"",p),{}))}return m})});var Z=(e={})=>({types:e.types||["ini"],parser:(i,n)=>b(void 0,null,function*(){let u=yield i.text(),m={},s=u.split(/\r?\n/).map(l=>l.trim()),o="";for(let l of s)if(!(l===""||l.startsWith(";")||l.startsWith("#")))if(l.startsWith("[")&&l.endsWith("]"))o=l.slice(1,-1).trim(),m[o]||(m[o]={});else{let[t,...c]=l.split("="),p=c.join("=").trim();o===""?(m.global||(m.global={}),m.global[t.trim()]=p):m[o][t.trim()]=p}return m})});var R=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e==="true"||e==="false"?e==="true":isNaN(Number(e))?e.match(/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(.\d+)?(Z|[+-]\d{2}:\d{2})?)?$/)?new Date(e):e:Number(e),N=e=>{let i={},n="",u="",m=!1,s="",o=!1;for(let l=1;l<e.length-1;l++){let t=e[l];!m&&(t==='"'||t==="'")?(m=!0,s=t):m&&t===s?m=!1:!m&&t==="="?o=!0:!m&&t===","?(i[n.trim()]=R(u.trim()),n="",u="",o=!1):o?u+=t:n+=t}return n&&(i[n.trim()]=R(u.trim())),i},X=(e={})=>({types:e.types||["toml","application/toml"],parser:(i,n)=>b(void 0,null,function*(){let u=yield i.text(),m={},s=m,o=null,l=null,t=null,c=u.split(/\r?\n/);for(let p=0;p<c.length;p++){let f=c[p].trim();if(!(f===""||f.startsWith("#"))){if(l!==null){f.endsWith(t)?(l+=f.slice(0,-t.length),s[Object.keys(s).pop()]=l,l=null,t=null):l+=f+"\n";continue}if(f.startsWith("[")&&f.endsWith("]")){let h=f.slice(1,-1).trim();s=m;let a=h.split(".");for(let r of a)s[r]||(s[r]={}),s=s[r];o=null}else if(f.startsWith("[[")&&f.endsWith("]]")){let a=f.slice(2,-2).trim().split("."),r=m;for(let d=0;d<a.length-1;d++)r[a[d]]||(r[a[d]]={}),r=r[a[d]];let g=a[a.length-1];r[g]||(r[g]=[]);let y={};r[g].push(y),s=y,o=null}else{let[h,...a]=f.split("="),r=a.join("=").trim();r.startsWith('"""')||r.startsWith("'''")?(t=r.slice(0,3),l=r.slice(3),r.endsWith(t)&&(s[h.trim()]=l.slice(0,-3),l=null,t=null)):r.startsWith("{")&&r.endsWith("}")?s[h.trim()]=N(r):r.startsWith("[")&&!r.endsWith("]")?(o=[],r=r.slice(1).trim()):o!==null?r.endsWith("]")?(o.push(R(r.slice(0,-1).trim())),s[h.trim()]=o,o=null):o.push(R(r)):s[h.trim()]=R(r)}}}return m})});var P=(e,i)=>{if(e==="null"||e==="~")return null;if(e==="true")return!0;if(e==="false")return!1;if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1);if(!isNaN(Number(e)))return Number(e);if(e.startsWith("[")&&e.endsWith("]"))return e.slice(1,-1).split(",").map(n=>P(n.trim(),i));if(e.startsWith("*")){let n=e.slice(1).trim();return i[n]}if(e.includes("!!")){let[n,u]=e.split(" ");switch(n){case"!!int":return parseInt(u);case"!!float":return parseFloat(u);case"!!str":return u;case"!!bool":return u.toLowerCase()==="true";default:return u}}return e},te=(e={})=>({types:e.types||["yaml","application/yaml","text/yaml"],parser:(i,n)=>b(void 0,null,function*(){let u=(yield i.text()).split("\n"),m={},s=m,o=[m],l=0,t=null,c=[],p={};for(let f=0;f<u.length;f++){let h=u[f].trimEnd();if(h.trim().startsWith("#"))continue;let a=h.search(/\S/);if(t!==null)if(a>l){c.push(h.trim());continue}else s[t]=c.join("\n"),t=null,c=[];if(a>l)o.push(s),s=s[Object.keys(s).pop()];else if(a<l)for(;a<l;)o.pop(),s=o[o.length-1],l-=e.indentSize||2;if(l=a,h.trim()==="-"){if(!Array.isArray(s)){let d=Object.keys(s).pop();s[d]=[],s=s[d]}s.push({}),s=s[s.length-1];continue}let r=h.indexOf(":");if(r===-1)continue;let g=h.slice(0,r).trim(),y=h.slice(r+1).trim();if(y.startsWith("&")){let d=y.slice(1).split(" ")[0];y=y.slice(d.length+2).trim();let T=P(y,p);p[d]=T,s[g]=T}else if(y.startsWith("*")){let d=y.slice(1).trim();s[g]=p[d]}else y==="|"||y===">"?(t=g,l+=e.indentSize||2):y?s[g]=P(y,p):s[g]={}}return m})});export{H as create,$ as csvParser,Z as iniParser,X as tomlParser,te as yamlParser};
//# sourceMappingURL=vroagn.min.js.map
