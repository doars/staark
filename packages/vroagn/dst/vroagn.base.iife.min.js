"use strict";(()=>{var N=Object.defineProperty;var S=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var M=(t,n,r)=>n in t?N(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,y=(t,n)=>{for(var r in n||(n={}))U.call(n,r)&&M(t,r,n[r]);if(S)for(var r of S(n))z.call(n,r)&&M(t,r,n[r]);return t};var m=(t,n,r)=>new Promise((i,l)=>{var h=e=>{try{b(r.next(e))}catch(s){l(s)}},d=e=>{try{b(r.throw(e))}catch(s){l(s)}},b=e=>e.done?i(e.value):Promise.resolve(e.value).then(h,d);b((r=r.apply(t,n)).next())});var O=function(t,n){let r=window;for(let i=0;i<t.length-1;i++)(typeof r[t[i]]!="object"||!Array.isArray(r[t[i]]))&&(r[t[i]]={}),r=r[t[i]];r[t[t.length-1]]=n};var A=t=>{if(typeof t=="object"){let n=Array.isArray(t)?[]:{};for(let r in t)n[r]=A(t[r]);return n}return t};var P=t=>m(void 0,null,function*(){return t>0?new Promise(n=>setTimeout(n,t)):null});var v=t=>t.split(";")[0].trim().toLowerCase(),B=t=>{let n=t.match(/\.([^./?]+)(?:[?#]|$)/);return n?n[1].toLowerCase():null},j=function(t,n,r){let i=n.get("Content-Type");if(i)return v(i);if(r&&r.Accept){let h=r.Accept.split(",");for(let d of h)if(d.trim()!=="*/*")return v(d)}let l=B(t);return l||""};var J={method:"get",retryCodes:[429,503,504],retryDelay:500},L=t=>{t=y(y({},J),A(t));let n=0,r=0,i=0,l=null,h=e=>m(void 0,null,function*(){let s=Date.now(),u=e-(s-n);n=s+(u>0?u:0),yield P(u)}),d=e=>new Promise(s=>{l&&clearTimeout(l),l=setTimeout(s,e)}),b=e=>m(void 0,null,function*(){if(e.maxRequests!==void 0&&i>=e.maxRequests)return[new Error("Maximum request limit reached"),null,null];i++;let s={cache:e.cache,credentials:e.credentials,headers:e.headers,method:e.method,mode:e.mode,redirect:e.redirect,body:e.body?JSON.stringify(e.body):void 0},u=(e.domain||"")+(e.path||"");if(e.queryParams&&(u+="?"+new URLSearchParams(e.queryParams).toString()),e.timeout){let a=e.abort||new AbortController;s.signal=a.signal,setTimeout(()=>a.abort(),e.timeout)}let R=()=>m(void 0,null,function*(){var g;let a=yield((g=e.fetch)!=null?g:fetch)(u,s);if(!a.ok)return[new Error("Invalid response"),a,null];try{let o,p=!1,w=e.type||j(u,a.headers,e.headers);if(e.parsers){for(let c of e.parsers)if(p=c.types.includes(w),p){o=yield c.parser(a,e,w);break}}if(!p)switch(w.toLowerCase()){case"arraybuffer":o=yield a.arrayBuffer();break;case"blob":o=yield a.blob();break;case"formdata":o=yield a.formData();break;case"text/plain":case"text":case"txt":o=yield a.text();break;case"text/html-partial":case"html-partial":o=yield a.text();let c=document.createElement("template");c.innerHTML=o,o=c.content.childNodes;break;case"text/html":case"html":o=yield a.text(),o=new DOMParser().parseFromString(o,"text/html");break;case"application/json":case"text/json":case"json":o=yield a.json();break;case"image/svg+xml":case"svg":o=yield a.text(),o=new DOMParser().parseFromString(o,"image/svg+xml");break;case"application/xml":case"text/xml":case"xml":o=yield a.text(),o=new DOMParser().parseFromString(o,"application/xml");break}return[null,a,o]}catch(o){return[o||new Error("Thrown parsing error is falsy"),a,null]}}),f=()=>m(void 0,null,function*(){var p;let a=0,g=e.retryAttempts||0,o=e.retryDelay||0;for(;a<g;){let[w,c,C]=yield R();if(!w)return[w,c,C];if(!((p=e.retryCodes)!=null&&p.includes(c.status||200)))return[new Error("Invalid status code"),c,C];if(a++,a>=g)return[new Error("Too many retry attempts"),c,C];let x=o*Math.pow(2,a-1),E=c.headers.get("Retry-After");if(E){let D=parseInt(E,10);if(!isNaN(D))x=Math.max(x,D*1e3);else{let F=new Date(E).getTime();if(!isNaN(F)){let I=Date.now();x=Math.max(x,F-I)}}}yield P(x)}return R()}),[q,T,k]=yield f();return T.ok?[q,T,k]:[new Error(T.statusText),T,k]});return e=>m(void 0,null,function*(){let s=y(y({},t),A(e));t.headers&&(s.headers=y(y({},t.headers),s.headers)),s.debounce&&(yield d(s.debounce)),s.delay&&(yield P(s.delay)),s.throttle&&(yield h(s.throttle)),s.maxConcurrency&&r>=s.maxConcurrency&&(yield new Promise(R=>{let f=null,q=()=>{r>=s.maxConcurrency?f=requestAnimationFrame(q):(f&&clearInterval(f),R(null))};f=requestAnimationFrame(q)})),r++;let u=yield b(s);return r--,u})};O(["vroagn"],{create:L});})();
//# sourceMappingURL=vroagn.base.iife.min.js.map
