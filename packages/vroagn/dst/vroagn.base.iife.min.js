"use strict";(()=>{var v=Object.defineProperty;var M=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var F=(e,n,t)=>n in e?v(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,y=(e,n)=>{for(var t in n||(n={}))U.call(n,t)&&F(e,t,n[t]);if(M)for(var t of M(n))z.call(n,t)&&F(e,t,n[t]);return e};var m=(e,n,t)=>new Promise((i,c)=>{var p=r=>{try{w(t.next(r))}catch(s){c(s)}},d=r=>{try{w(t.throw(r))}catch(s){c(s)}},w=r=>r.done?i(r.value):Promise.resolve(r.value).then(p,d);w((t=t.apply(e,n)).next())});var O=function(e,n){let t=window;for(let i=0;i<e.length-1;i++)(typeof t[e[i]]!="object"||!Array.isArray(t[e[i]]))&&(t[e[i]]={}),t=t[e[i]];t[e[e.length-1]]=n};var R=e=>{if(typeof e=="object")if(Array.isArray(e)){let n=[];for(let t=0;t<e.length;t++)n.push(R(e[t]));e=n}else{let n={};for(let t in e)n[t]=R(e[t]);e=n}return e};var A=e=>m(void 0,null,function*(){return e>0?new Promise(n=>setTimeout(n,e)):null});var j=e=>e.split(";")[0].trim().toLowerCase(),B=e=>{let n=e.match(/\.([^./?]+)(?:[?#]|$)/);return n?n[1].toLowerCase():null},L=function(e,n,t){let i=n.get("Content-Type");if(i)return j(i);if(t&&t.Accept){let p=t.Accept.split(",");for(let d of p)if(d.trim()!=="*/*")return j(d)}let c=B(e);return c||""};var J={method:"get",retryCodes:[429,503,504],retryDelay:500},N=e=>{e=y(y({},J),R(e));let n=0,t=0,i=0,c=null,p=r=>m(void 0,null,function*(){let s=Date.now(),l=r-(s-n);n=s+(l>0?l:0),yield A(l)}),d=r=>new Promise(s=>{c&&clearTimeout(c),c=setTimeout(s,r)}),w=r=>m(void 0,null,function*(){if(r.maxRequests!==void 0&&i>=r.maxRequests)return[new Error("Maximum request limit reached"),null,null];i++;let s={cache:r.cache,credentials:r.credentials,headers:r.headers,method:r.method,mode:r.mode,redirect:r.redirect,body:r.body?JSON.stringify(r.body):void 0},l=(r.domain||"")+(r.path||"");if(r.queryParams&&(l+="?"+new URLSearchParams(r.queryParams).toString()),r.timeout){let o=r.abort||new AbortController;s.signal=o.signal,setTimeout(()=>o.abort(),r.timeout)}let P=()=>m(void 0,null,function*(){let o=yield fetch(l,s);if(!o.ok)return[new Error("Invalid response"),o,null];try{let a,b=!1,g=r.type||L(l,o.headers,r.headers);if(r.responseParsers){for(let u of r.responseParsers)if(b=u.types.includes(g),b){a=yield u.parser(o,r);break}}if(!b)switch(g.toLowerCase()){case"arraybuffer":a=yield o.arrayBuffer();break;case"blob":a=yield o.blob();break;case"formdata":a=yield o.formData();break;case"text/plain":case"text":case"txt":a=yield o.text();break;case"text/html-partial":case"html-partial":a=yield o.text();let u=document.createElement("template");u.innerHTML=a,a=u.content.childNodes[0];break;case"text/html":case"html":a=yield o.text(),a=new DOMParser().parseFromString(a,"text/html");break;case"application/json":case"text/json":case"json":a=yield o.json();break;case"image/svg+xml":case"svg":a=yield o.text(),a=new DOMParser().parseFromString(a,"image/svg+xml");break;case"application/xml":case"text/xml":case"xml":a=yield o.text(),a=new DOMParser().parseFromString(a,"application/xml");break}return[null,o,a]}catch(a){return[a||new Error("Thrown parsing error is falsy"),o,null]}}),f=()=>m(void 0,null,function*(){var g;let o=0,a=r.retryAttempts||0,b=r.retryDelay||0;for(;o<a;){let[u,h,C]=yield P();if(!u)return[u,h,C];if(!((g=r.retryCodes)!=null&&g.includes(h.status||200)))return[new Error("Invalid status code"),h,C];if(o++,o>=a)return[new Error("Too many retry attempts"),h,C];let x=b*Math.pow(2,o-1),E=h.headers.get("Retry-After");if(E){let D=parseInt(E,10);if(!isNaN(D))x=Math.max(x,D*1e3);else{let S=new Date(E).getTime();if(!isNaN(S)){let I=Date.now();x=Math.max(x,S-I)}}}yield A(x)}return P()}),[q,T,k]=yield f();return T.ok?[q,T,k]:[new Error(T.statusText),T,k]});return r=>m(void 0,null,function*(){let s=y(y({},e),R(r));e.headers&&(s.headers=y(y({},e.headers),s.headers)),s.debounce&&(yield d(s.debounce)),s.delay&&(yield A(s.delay)),s.throttle&&(yield p(s.throttle)),s.maxConcurrency&&t>=s.maxConcurrency&&(yield new Promise(P=>{let f=null,q=()=>{t>=s.maxConcurrency?f=requestAnimationFrame(q):(f&&clearInterval(f),P(null))};f=requestAnimationFrame(q)})),t++;let l=yield w(s);return t--,l})};O(["vroagn"],{create:N});})();
//# sourceMappingURL=vroagn.base.iife.min.js.map
