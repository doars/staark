"use strict";(()=>{var v=Object.defineProperty;var S=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var M=(e,n,r)=>n in e?v(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,y=(e,n)=>{for(var r in n||(n={}))U.call(n,r)&&M(e,r,n[r]);if(S)for(var r of S(n))z.call(n,r)&&M(e,r,n[r]);return e};var m=(e,n,r)=>new Promise((i,l)=>{var h=t=>{try{g(r.next(t))}catch(s){l(s)}},d=t=>{try{g(r.throw(t))}catch(s){l(s)}},g=t=>t.done?i(t.value):Promise.resolve(t.value).then(h,d);g((r=r.apply(e,n)).next())});var O=function(e,n){let r=window;for(let i=0;i<e.length-1;i++)(typeof r[e[i]]!="object"||!Array.isArray(r[e[i]]))&&(r[e[i]]={}),r=r[e[i]];r[e[e.length-1]]=n};var R=e=>{if(typeof e=="object")if(Array.isArray(e)){let n=[];for(let r=0;r<e.length;r++)n.push(R(e[r]));e=n}else{let n={};for(let r in e)n[r]=R(e[r]);e=n}return e};var P=e=>m(void 0,null,function*(){return e>0?new Promise(n=>setTimeout(n,e)):null});var j=e=>e.split(";")[0].trim().toLowerCase(),B=e=>{let n=e.match(/\.([^./?]+)(?:[?#]|$)/);return n?n[1].toLowerCase():null},L=function(e,n,r){let i=n.get("Content-Type");if(i)return j(i);if(r&&r.Accept){let h=r.Accept.split(",");for(let d of h)if(d.trim()!=="*/*")return j(d)}let l=B(e);return l||""};var J={method:"get",retryCodes:[429,503,504],retryDelay:500},I=e=>{e=y(y({},J),R(e));let n=0,r=0,i=0,l=null,h=t=>m(void 0,null,function*(){let s=Date.now(),u=t-(s-n);n=s+(u>0?u:0),yield P(u)}),d=t=>new Promise(s=>{l&&clearTimeout(l),l=setTimeout(s,t)}),g=t=>m(void 0,null,function*(){if(t.maxRequests!==void 0&&i>=t.maxRequests)return[new Error("Maximum request limit reached"),null,null];i++;let s={cache:t.cache,credentials:t.credentials,headers:t.headers,method:t.method,mode:t.mode,redirect:t.redirect,body:t.body?JSON.stringify(t.body):void 0},u=(t.domain||"")+(t.path||"");if(t.queryParams&&(u+="?"+new URLSearchParams(t.queryParams).toString()),t.timeout){let a=t.abort||new AbortController;s.signal=a.signal,setTimeout(()=>a.abort(),t.timeout)}let q=()=>m(void 0,null,function*(){var b;let a=yield((b=t.fetch)!=null?b:fetch)(u,s);if(!a.ok)return[new Error("Invalid response"),a,null];try{let o,p=!1,w=t.type||L(u,a.headers,t.headers);if(t.parsers){for(let c of t.parsers)if(p=c.types.includes(w),p){o=yield c.parser(a,t,w);break}}if(!p)switch(w.toLowerCase()){case"arraybuffer":o=yield a.arrayBuffer();break;case"blob":o=yield a.blob();break;case"formdata":o=yield a.formData();break;case"text/plain":case"text":case"txt":o=yield a.text();break;case"text/html-partial":case"html-partial":o=yield a.text();let c=document.createElement("template");c.innerHTML=o,o=c.content.childNodes;break;case"text/html":case"html":o=yield a.text(),o=new DOMParser().parseFromString(o,"text/html");break;case"application/json":case"text/json":case"json":o=yield a.json();break;case"image/svg+xml":case"svg":o=yield a.text(),o=new DOMParser().parseFromString(o,"image/svg+xml");break;case"application/xml":case"text/xml":case"xml":o=yield a.text(),o=new DOMParser().parseFromString(o,"application/xml");break}return[null,a,o]}catch(o){return[o||new Error("Thrown parsing error is falsy"),a,null]}}),f=()=>m(void 0,null,function*(){var p;let a=0,b=t.retryAttempts||0,o=t.retryDelay||0;for(;a<b;){let[w,c,C]=yield q();if(!w)return[w,c,C];if(!((p=t.retryCodes)!=null&&p.includes(c.status||200)))return[new Error("Invalid status code"),c,C];if(a++,a>=b)return[new Error("Too many retry attempts"),c,C];let x=o*Math.pow(2,a-1),E=c.headers.get("Retry-After");if(E){let D=parseInt(E,10);if(!isNaN(D))x=Math.max(x,D*1e3);else{let F=new Date(E).getTime();if(!isNaN(F)){let N=Date.now();x=Math.max(x,F-N)}}}yield P(x)}return q()}),[T,A,k]=yield f();return A.ok?[T,A,k]:[new Error(A.statusText),A,k]});return t=>m(void 0,null,function*(){let s=y(y({},e),R(t));e.headers&&(s.headers=y(y({},e.headers),s.headers)),s.debounce&&(yield d(s.debounce)),s.delay&&(yield P(s.delay)),s.throttle&&(yield h(s.throttle)),s.maxConcurrency&&r>=s.maxConcurrency&&(yield new Promise(q=>{let f=null,T=()=>{r>=s.maxConcurrency?f=requestAnimationFrame(T):(f&&clearInterval(f),q(null))};f=requestAnimationFrame(T)})),r++;let u=yield g(s);return r--,u})};O(["vroagn"],{create:I});})();
//# sourceMappingURL=vroagn.base.iife.min.js.map
