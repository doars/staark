(()=>{var U=Object.defineProperty;var M=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var S=(t,a,r)=>a in t?U(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,f=(t,a)=>{for(var r in a||(a={}))z.call(a,r)&&S(t,r,a[r]);if(M)for(var r of M(a))B.call(a,r)&&S(t,r,a[r]);return t};var u=(t,a,r)=>new Promise((o,l)=>{var h=e=>{try{b(r.next(e))}catch(n){l(n)}},y=e=>{try{b(r.throw(e))}catch(n){l(n)}},b=e=>e.done?o(e.value):Promise.resolve(e.value).then(h,y);b((r=r.apply(t,a)).next())});var j=(t,a)=>{let r=window;for(let o=0;o<t.length-1;o++)(typeof r[t[o]]!="object"||!Array.isArray(r[t[o]]))&&(r[t[o]]={}),r=r[t[o]];r[t[t.length-1]]=a};var D=t=>{if(typeof t=="object"){let a=Array.isArray(t)?[]:{};for(let r in t)a[r]=D(t[r]);return a}return t};var C=t=>u(null,null,function*(){return t>0?new Promise(a=>setTimeout(a,t)):null});var v=t=>t.split(";")[0].trim().toLowerCase(),J=t=>{let a=t.match(/\.([^./?]+)(?:[?#]|$)/);return a?a[1].toLowerCase():null},L=(t,a,r)=>{let o=a.get("Content-Type");if(o)return v(o);if(r&&r.Accept){let h=r.Accept.split(",");for(let y of h)if(y.trim()!=="*/*")return v(y)}let l=J(t);return l||""};var V={method:"get",retryCodes:[429,503,504],retryDelay:500},N=t=>{t=f(f({},V),D(t));let a=0,r=0,o=0,l=null,h=e=>u(null,null,function*(){let n=Date.now(),m=e-(n-a);a=n+(m>0?m:0),yield C(m)}),y=e=>new Promise(n=>{l&&clearTimeout(l),l=setTimeout(n,e)}),b=e=>u(null,null,function*(){if(e.maxRequests!==void 0&&o>=e.maxRequests)return[new Error("Maximum request limit reached"),null,null];o++;let n={cache:e.cache,credentials:e.credentials,headers:e.headers,method:e.method,mode:e.mode,redirect:e.redirect,body:e.body?JSON.stringify(e.body):void 0},m=(e.domain||"")+(e.path||"");if(e.queryParams&&(m+="?"+new URLSearchParams(e.queryParams).toString()),e.timeout){let s=e.abort||new AbortController;n.signal=s.signal,setTimeout(()=>s.abort(),e.timeout)}let T=()=>u(null,null,function*(){var g;let s=yield((g=e.fetch)!=null?g:fetch)(m,n);if(!s.ok)return[new Error("Invalid response"),s,null];try{let c,w=!1,x=e.type||L(m,s.headers,e.headers);if(e.parsers){for(let i of e.parsers)if(w=i.types.includes(x),w){c=yield i.parser(s,e,x);break}}if(!w)switch(x.toLowerCase()){case"arraybuffer":c=yield s.arrayBuffer();break;case"blob":c=yield s.blob();break;case"formdata":c=yield s.formData();break;case"text/plain":case"text":case"txt":c=yield s.text();break;case"text/html-partial":case"html-partial":c=yield s.text();let i=document.createElement("template");i.innerHTML=c,c=i.content.childNodes;break;case"text/html":case"html":c=yield s.text(),c=new DOMParser().parseFromString(c,"text/html");break;case"application/json":case"text/json":case"json":c=yield s.json();break;case"image/svg+xml":case"svg":c=yield s.text(),c=new DOMParser().parseFromString(c,"image/svg+xml");break;case"application/xml":case"text/xml":case"xml":c=yield s.text(),c=new DOMParser().parseFromString(c,"application/xml");break}return[null,s,c]}catch(c){return[c||new Error("Thrown parsing error is falsy"),s,null]}}),d=()=>u(null,null,function*(){var w;let s=0,g=e.retryAttempts||0,c=e.retryDelay||0;for(;s<g;){let[x,i,E]=yield T();if(!x)return[x,i,E];if(!((w=e.retryCodes)!=null&&w.includes(i.status||200)))return[new Error("Invalid status code"),i,E];if(s++,s>=g)return[new Error("Too many retry attempts"),i,E];let p=c*Math.pow(2,s-1),P=i.headers.get("Retry-After");if(P){let q=parseInt(P,10);if(!isNaN(q))p=Math.max(p,q*1e3);else{let F=new Date(P).getTime();if(!isNaN(F)){let I=Date.now();p=Math.max(p,F-I)}}}yield C(p)}return T()}),[A,k,R]=yield d();return k.ok?[A,k,R]:[new Error(k.statusText),k,R]});return e=>u(null,null,function*(){let n=f(f({},t),D(e));t.headers&&(n.headers=f(f({},t.headers),n.headers)),n.debounce&&(yield y(n.debounce)),n.delay&&(yield C(n.delay)),n.throttle&&(yield h(n.throttle)),n.maxConcurrency&&r>=n.maxConcurrency&&(yield new Promise(T=>{let d=null,A=()=>{r>=n.maxConcurrency?d=requestAnimationFrame(A):(d&&clearInterval(d),T(null))};d=requestAnimationFrame(A)})),r++;let m=yield b(n);return r--,m})};j(["vroagn"],{create:N});})();
