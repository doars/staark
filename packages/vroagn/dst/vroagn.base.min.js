var A=Object.defineProperty;var P=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var q=(t,a,r)=>a in t?A(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,u=(t,a)=>{for(var r in a||(a={}))k.call(a,r)&&q(t,r,a[r]);if(P)for(var r of P(a))D.call(a,r)&&q(t,r,a[r]);return t};var m=(t,a,r)=>new Promise((d,c)=>{var p=e=>{try{f(r.next(e))}catch(s){c(s)}},y=e=>{try{f(r.throw(e))}catch(s){c(s)}},f=e=>e.done?d(e.value):Promise.resolve(e.value).then(p,y);f((r=r.apply(t,a)).next())});var w=t=>{if(typeof t=="object")if(Array.isArray(t)){let a=[];for(let r=0;r<t.length;r++)a.push(w(t[r]));t=a}else{let a={};for(let r in t)a[r]=w(t[r]);t=a}return t};var R=t=>m(void 0,null,function*(){return t>0?new Promise(a=>setTimeout(a,t)):null});var T=t=>t.split(";")[0].trim().toLowerCase(),S=t=>{let a=t.match(/\.([^./?]+)(?:[?#]|$)/);return a?a[1].toLowerCase():null},C=function(t,a,r){let d=a.get("Content-Type");if(d)return T(d);if(r&&r.Accept){let p=r.Accept.split(",");for(let y of p)if(y.trim()!=="*/*")return T(y)}let c=S(t);return c||""};var F={method:"get",retryCodes:[429,503,504],retryDelay:500},v=t=>{t=u(u({},F),w(t));let a=0,r=0,d=0,c=null,p=e=>m(void 0,null,function*(){let s=Date.now(),i=e-(s-a);a=s+(i>0?i:0),yield R(i)}),y=e=>new Promise(s=>{c&&clearTimeout(c),c=setTimeout(s,e)}),f=e=>m(void 0,null,function*(){let s={cache:e.cache,credentials:e.credentials,headers:e.headers,method:e.method,mode:e.mode,redirect:e.redirect,body:e.body?JSON.stringify(e.body):void 0},i=(e.domain||"")+(e.path||"");if(e.queryParams&&(i+="?"+new URLSearchParams(e.queryParams).toString()),e.timeout){let n=e.abort||new AbortController;s.signal=n.signal,setTimeout(()=>n.abort(),e.timeout)}let l=()=>m(void 0,null,function*(){let n=yield fetch(i,s),o,h=!1,x=e.type||C(i,n.headers,e.headers);if(e.responseParsers){for(let b of e.responseParsers)if(h=b.types.includes(x),h){o=yield b.parser(n,e);break}}if(!h)switch(x.toLowerCase()){case"arraybuffer":o=yield n.arrayBuffer();break;case"blob":o=yield n.blob();break;case"formdata":o=yield n.formData();break;case"text/plain":case"text":case"txt":o=yield n.text();break;case"text/html-partial":case"html-partial":o=yield n.text();let b=document.createElement("template");b.innerHTML=o,o=b.content.childNodes[0];break;case"text/html":case"html":o=yield n.text(),o=new DOMParser().parseFromString(o,"text/html");break;case"application/json":case"text/json":case"json":o=yield n.json();break;case"image/svg+xml":case"svg":o=yield n.text(),o=new DOMParser().parseFromString(o,"image/svg+xml");break;case"application/xml":case"text/xml":case"xml":o=yield n.text(),o=new DOMParser().parseFromString(o,"application/xml");break}return[n,o]}),g=()=>m(void 0,null,function*(){let n=0,o=e.retryAttempts||0,h=e.retryDelay||0;for(;n<o;)try{return yield l()}catch(x){if(n++,n>=o)throw x;yield R(h*Math.pow(2,n-1))}return l()});try{let[n,o]=yield g();if(!n.ok)throw new Error(n.statusText);return[n,o]}catch(n){throw n}});return e=>m(void 0,null,function*(){let s=u(u({},t),w(e));t.headers&&(s.headers=u(u({},t.headers),s.headers)),s.debounce&&(yield y(s.debounce)),s.delay&&(yield R(s.delay)),s.throttle&&(yield p(s.throttle)),s.maxConcurrency&&r>=s.maxConcurrency&&(yield new Promise(i=>{let l=null,g=()=>{r>=s.maxConcurrency?l=requestAnimationFrame(g):(l&&clearInterval(l),i(null))};l=requestAnimationFrame(g)})),r++;try{return yield f(s)}finally{r--}})};export{v as create};
//# sourceMappingURL=vroagn.base.min.js.map
