"use strict";(()=>{var k=function(e,h){let m=window;for(let u=0;u<e.length-1;u++)(typeof m[e[u]]!="object"||!Array.isArray(m[e[u]]))&&(m[e[u]]={}),m=m[e[u]];m[e[e.length-1]]=h};var T=async e=>e>0?new Promise(h=>setTimeout(h,e)):null;var D=e=>e.split(";")[0].trim().toLowerCase(),M=e=>{let h=e.match(/\.([^./?]+)(?:[?#]|$)/);return h?h[1].toLowerCase():null},A=function(e,h,m){let u=h.get("Content-Type");if(u)return D(u);if(m&&m.Accept){let r=m.Accept.split(",");for(let c of r)if(c.trim()!=="*/*")return D(c)}let l=M(e);return l||""};var L={method:"get",retryCodes:[429,503,504],retryDelay:500},V=e=>{e={...L,...structuredClone(e)};let h=0,m=0,u=0,l=null,r=async t=>{let o=Date.now(),p=t-(o-h);h=o+(p>0?p:0),await T(p)},c=t=>new Promise(o=>{l&&clearTimeout(l),l=setTimeout(o,t)}),s=async t=>{if(t.maxRequests!==void 0&&u>=t.maxRequests)return[new Error("Maximum request limit reached"),null,null];u++;let o={cache:t.cache,credentials:t.credentials,headers:t.headers,method:t.method,mode:t.mode,redirect:t.redirect,body:t.body?JSON.stringify(t.body):void 0},p=(t.domain||"")+(t.path||"");if(t.queryParams&&(p+="?"+new URLSearchParams(t.queryParams).toString()),t.timeout){let i=t.abort||new AbortController;o.signal=i.signal,setTimeout(()=>i.abort(),t.timeout)}let f=async()=>{let i=await(t.fetch??fetch)(p,o);if(!i.ok)return[new Error("Invalid response"),i,null];try{let a,w=!1,x=t.type||A(p,i.headers,t.headers);if(t.parsers){for(let b of t.parsers)if(w=b.types.includes(x),w){a=await b.parser(i,t,x);break}}if(!w)switch(x.toLowerCase()){case"arraybuffer":a=await i.arrayBuffer();break;case"blob":a=await i.blob();break;case"formdata":a=await i.formData();break;case"text/plain":case"text":case"txt":a=await i.text();break;case"text/html-partial":case"html-partial":a=await i.text();let b=document.createElement("template");b.innerHTML=a,a=b.content.childNodes;break;case"text/html":case"html":a=await i.text(),a=new DOMParser().parseFromString(a,"text/html");break;case"application/json":case"text/json":case"json":a=await i.json();break;case"image/svg+xml":case"svg":a=await i.text(),a=new DOMParser().parseFromString(a,"image/svg+xml");break;case"application/xml":case"text/xml":case"xml":a=await i.text(),a=new DOMParser().parseFromString(a,"application/xml");break}return[null,i,a]}catch(a){return[a||new Error("Thrown parsing error is falsy"),i,null]}},d=async()=>{let i=0,a=t.retryAttempts||0,w=t.retryDelay||0;for(;i<a;){let[x,b,P]=await f();if(!x)return[x,b,P];if(!t.retryCodes?.includes(b.status||200))return[new Error("Invalid status code"),b,P];if(i++,i>=a)return[new Error("Too many retry attempts"),b,P];let R=w*Math.pow(2,i-1),q=b.headers.get("Retry-After");if(q){let j=parseInt(q,10);if(!isNaN(j))R=Math.max(R,j*1e3);else{let C=new Date(q).getTime();if(!isNaN(C)){let F=Date.now();R=Math.max(R,C-F)}}}await T(R)}return f()},[y,n,g]=await d();return n.ok?[y,n,g]:[new Error(n.statusText),n,g]};return async t=>{let o={...e,...structuredClone(t)};e.headers&&(o.headers={...e.headers,...o.headers}),o.debounce&&await c(o.debounce),o.delay&&await T(o.delay),o.throttle&&await r(o.throttle),o.maxConcurrency&&m>=o.maxConcurrency&&await new Promise(f=>{let d=null,y=()=>{m>=o.maxConcurrency?d=requestAnimationFrame(y):(d&&clearInterval(d),f(null))};d=requestAnimationFrame(y)}),m++;let p=await s(o);return m--,p}};var N=["tsv","text/tab-separated-values"],S=e=>({types:e?.types||["csv","text/csv",...N],parser:async(h,m,u)=>{let l={columnDelimiter:N.includes(u)?"	":",",rowDelimiter:`
`,escapeCharacter:'"',...e},r=await h.text(),c=[],s=[],t="",o=!1;for(let p=0;p<r.length;p++){let f=r[p],d=r[p+1];f===l.escapeCharacter?d===l.escapeCharacter&&o?(t+=l.escapeCharacter,p++):o=!o:f===l.columnDelimiter&&!o?(s.push(t),t=""):f===l.rowDelimiter&&!o?(s.push(t),t="",c.push(s),s=[]):t+=f}if(t&&(s.push(t),t=""),s.length>0&&c.push(s),l.hasHeaders){let p=c[0];return c.slice(1).map(f=>p.reduce((d,y,n)=>(d[y]=f[n]||"",d),{}))}return c}});var E=(e={})=>({types:e.types||["ini"],parser:async(h,m)=>{let u=await h.text(),l={},r=u.split(/\r?\n/).map(s=>s.trim()),c="";for(let s of r)if(!(s===""||s.startsWith(";")||s.startsWith("#")))if(s.startsWith("[")&&s.endsWith("]"))c=s.slice(1,-1).trim(),l[c]||(l[c]={});else{let[t,...o]=s.split("="),p=o.join("=").trim();c===""?(l.global||(l.global={}),l.global[t.trim()]=p):l[c][t.trim()]=p}return l}});var O=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e==="true"||e==="false"?e==="true":isNaN(Number(e))?e.match(/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(.\d+)?(Z|[+-]\d{2}:\d{2})?)?$/)?new Date(e):e:Number(e),z=e=>{let h={},m="",u="",l=!1,r="",c=!1;for(let s=1;s<e.length-1;s++){let t=e[s];!l&&(t==='"'||t==="'")?(l=!0,r=t):l&&t===r?l=!1:!l&&t==="="?c=!0:!l&&t===","?(h[m.trim()]=O(u.trim()),m="",u="",c=!1):c?u+=t:m+=t}return m&&(h[m.trim()]=O(u.trim())),h},Y=(e={})=>({types:e.types||["toml","application/toml"],parser:async(h,m)=>{let u=await h.text(),l={},r=l,c=null,s=null,t=null,o=u.split(/\r?\n/);for(let p=0;p<o.length;p++){let f=o[p].trim();if(!(f===""||f.startsWith("#"))){if(s!==null){f.endsWith(t)?(s+=f.slice(0,-t.length),r[Object.keys(r).pop()]=s,s=null,t=null):s+=f+`
`;continue}if(f.startsWith("[")&&f.endsWith("]")){let d=f.slice(1,-1).trim();r=l;let y=d.split(".");for(let n of y)r[n]||(r[n]={}),r=r[n];c=null}else if(f.startsWith("[[")&&f.endsWith("]]")){let y=f.slice(2,-2).trim().split("."),n=l;for(let a=0;a<y.length-1;a++)n[y[a]]||(n[y[a]]={}),n=n[y[a]];let g=y[y.length-1];n[g]||(n[g]=[]);let i={};n[g].push(i),r=i,c=null}else{let[d,...y]=f.split("="),n=y.join("=").trim();n.startsWith('"""')||n.startsWith("'''")?(t=n.slice(0,3),s=n.slice(3),n.endsWith(t)&&(r[d.trim()]=s.slice(0,-3),s=null,t=null)):n.startsWith("{")&&n.endsWith("}")?r[d.trim()]=z(n):n.startsWith("[")&&!n.endsWith("]")?(c=[],n=n.slice(1).trim()):c!==null?n.endsWith("]")?(c.push(O(n.slice(0,-1).trim())),r[d.trim()]=c,c=null):c.push(O(n)):r[d.trim()]=O(n)}}}return l}});var W=(e,h)=>{if(e==="null"||e==="~")return null;if(e==="true")return!0;if(e==="false")return!1;if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1);if(!isNaN(Number(e)))return Number(e);if(e.startsWith("[")&&e.endsWith("]"))return e.slice(1,-1).split(",").map(m=>W(m.trim(),h));if(e.startsWith("*")){let m=e.slice(1).trim();return h[m]}if(e.includes("!!")){let[m,u]=e.split(" ");switch(m){case"!!int":return parseInt(u);case"!!float":return parseFloat(u);case"!!str":return u;case"!!bool":return u.toLowerCase()==="true";default:return u}}return e},I=(e={})=>({types:e.types||["yaml","application/yaml","text/yaml"],parser:async(h,m)=>{let u=(await h.text()).split(`
`),l={},r=l,c=[l],s=0,t=null,o=[],p={};for(let f=0;f<u.length;f++){let d=u[f].trimEnd();if(d.trim().startsWith("#"))continue;let y=d.search(/\S/);if(t!==null)if(y>s){o.push(d.trim());continue}else r[t]=o.join(`
`),t=null,o=[];if(y>s)c.push(r),r=r[Object.keys(r).pop()];else if(y<s)for(;y<s;)c.pop(),r=c[c.length-1],s-=e.indentSize||2;if(s=y,d.trim()==="-"){if(!Array.isArray(r)){let a=Object.keys(r).pop();r[a]=[],r=r[a]}r.push({}),r=r[r.length-1];continue}let n=d.indexOf(":");if(n===-1)continue;let g=d.slice(0,n).trim(),i=d.slice(n+1).trim();if(i.startsWith("&")){let a=i.slice(1).split(" ")[0];i=i.slice(a.length+2).trim();let w=W(i,p);p[a]=w,r[g]=w}else if(i.startsWith("*")){let a=i.slice(1).trim();r[g]=p[a]}else i==="|"||i===">"?(t=g,s+=e.indentSize||2):i?r[g]=W(i,p):r[g]={}}return l}});k(["vroagn"],{create:V,csvParser:S,iniParser:E,tomlParser:Y,yamlParser:I});})();
//# sourceMappingURL=vroagn.iife.min.js.map
