(()=>{var h=(o,i)=>{let r=window;for(let e=0;e<o.length-1;e++)(typeof r[o[e]]!="object"||!Array.isArray(r[o[e]]))&&(r[o[e]]={}),r=r[o[e]];r[o[o.length-1]]=i};var m=o=>y(o)||[],y=o=>o?Array.isArray(o)?o:[o]:void 0;var x=(o,i,r)=>{let e=o?i:r;return typeof e=="function"&&(e=e()),m(e)};var p=(o,i,r)=>(i&&(typeof i!="object"||i._==="n"||Array.isArray(i))&&(r=i,i=void 0),{_:"n",a:i,c:y(r),t:o.toUpperCase()});var _=new Proxy({},{get:(o,i)=>{if(o[i])return o[i];let r=(i[0]+i.substring(1).replace(/([A-Z])/g,e=>"-"+e)).toUpperCase();return o[i]=(e,t)=>p(r,e,t)}});var l={attribute:0,class:1,id:2,type:3},E=o=>{let i=o.length,r=0,e="",t={},f="",n=!0,s=l.type,a=()=>{if(f){switch(s){case l.attribute:t[f]=n===!0?!0:n,n=!0;break;case l.class:if(!t.class){t.class=f;break}t.class+=" "+f;break;case l.id:t.id=f;break;case l.type:e=f;break}f=""}},c,u,Q=()=>{for(u=0;r<i;){if(c=o[r],r++,c==="="){n="",c=o[r];let N=c==='"',O=c==="'";for((N||O)&&(n+=c,r++);r<i;){if(c=o[r],N&&c==='"'||O&&c==="'"){n+=c,r++;break}else if(!N&&!O&&c==="]")break;n+=c,r++}for((n[0]==='"'&&n[n.length-1]==='"'||n[0]==="'"&&n[n.length-1]==="'")&&(n=n.substring(1,n.length-1));r<i&&(c=o[r],r++,c!=="]"););break}else if(c==="["){u++;continue}else if(c==="]"){if(u--,u<0)break;continue}f+=c}a()};for(;r<i;){if(c=o[r],r++,c==="#"){a(),s=l.id;continue}else if(c==="."){a(),s=l.class;continue}else if(c==="["){a(),s=l.attribute,Q();continue}f+=c}return[e,t]};var L=new Proxy({},{get:(o,i)=>{if(o[i])return o[i];let r=(i[0]+i.substring(1).replace(/([A-Z])/g,e=>"-"+e)).toUpperCase();return o[i]=(e,t)=>{let f;if(e){let[n,s]=E(e);f=s}return p(r,f,t)}}});var C=0,g=o=>o+"-"+C++;var k=(o,i,r)=>{let e;return i&&o in i&&i[o]?e=i[o]:e=r,typeof e=="function"&&(e=e()),m(e)};var v=(o,i)=>{let[r,e]=E(o);return{_:"n",a:e,c:y(i),t:r.toUpperCase()}};var U=o=>{var r;let i=[];for(let e of o.childNodes)if(e instanceof Text)i.push((r=e.textContent)!=null?r:"");else{let t={};for(let f of e.attributes)t[f.name]=f.value;i.push(p(e.nodeName,t,U(e)))}return i};var B=(o,i,r)=>{if(i)for(let e in i){let t=i[e];if(t){let f=typeof t;if(f==="function"){let n=r==null?void 0:r[e];n!==t&&(n&&o.removeEventListener(e,n),o.addEventListener(e,t))}else if(e==="class"){if(typeof t=="object")if(Array.isArray(t))t=t.join(" ");else{let n="";for(let s in t)t[s]&&(n+=" "+s);t=n}o.className=t}else if(e==="style"&&typeof t=="object"){for(let n in t){let s=t[n];n.includes("-",1)?o.style.setProperty(n,s):o.style[n]=s}if(r&&r[e]&&typeof r[e]=="object"&&!Array.isArray(r[e]))for(let n in r[e])t[n]||(n.includes("-",1)?o.style.removeProperty(n):o.style[n]=null)}else t===!0?t="true":f!=="string"&&(t=t.toString()),o.setAttribute(e,t),e==="value"&&(o.value=t)}}if(r)for(let e in r)(!i||!i[e])&&(typeof r[e]=="function"?o.removeEventListener(e,r[e]):e==="class"?o.className="":e==="style"?o.style.cssText="":e==="value"?o.value="":o.removeAttribute(e))},T=(o,i,r)=>{let e=0,t=0;if(i)for(;e<i.length;e++){let f=i[e],n=!1;if(r)for(let s=e-t;s<r.length;s++){let a=r[s];if(a.t&&f.t===a.t||!a.t&&!f.t){n=!0,e!==s+t&&(o.insertBefore(o.childNodes[s+t],o.childNodes[e]),r.splice(e-t,0,r.splice(s,1)[0])),f.t?(B(o.childNodes[e],f.a,a.a),T(o.childNodes[e],f.c,a.c)):a!==f&&(o.childNodes[e].textContent=f);break}}if(!n){let s;f.t?(s=document.createElement(f.t),B(s,f.a),T(s,f.c)):s=document.createTextNode(f),o.insertBefore(s,o.childNodes[e]),t++}}if(r){let f=r.length+t;if(f>=e)for(let n=f-1;n>=e;n--)o.childNodes[n].remove()}},S=(o,i)=>{let r=typeof o=="string"?document.querySelector(o)||document.body.appendChild(document.createElement("div")):o;if(typeof i=="string")try{i=JSON.parse(i)}catch(e){i=null}return i||(i=U(r)),e=>{e=y(e),T(r,e,i),i=e}};h(["staark"],{conditional:x,factory:_,fctory:L,identifier:g,match:k,nde:v,node:p,prepare:S});})();
