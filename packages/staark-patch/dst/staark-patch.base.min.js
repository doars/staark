var m="n";var A=(n,s,r)=>((typeof s!="object"||s._===m||Array.isArray(s))&&(r=s,s=void 0),{_:m,a:s,c:r?Array.isArray(r)?r:[r]:[],t:n.toUpperCase()});var h=n=>Array.isArray(n)?n:[n];var E=n=>{var r;let s=[];for(let t=0;t<n.childNodes.length;t++){let e=n.childNodes[t];if(e instanceof Text)s.push((r=e.textContent)!=null?r:"");else{let c={};for(let o=0;o<e.attributes.length;o++){let N=e.attributes[o];c[N.name]=N.value}s.push(A(e.nodeName,c,E(e)))}}return s};var H=/[A-Z]+(?![a-z])|[A-Z]/g,M=(n,s)=>(s?"-":"")+n,k=(n,s,r)=>{if(s)for(let t in s){let e=s[t];if(e){let c=typeof e;if(c==="function"){if(r&&r[t]){if(r[t]===e)continue;n.removeEventListener(t,r[t])}n.addEventListener(t,e)}else if(t==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let o="";for(let N in e)e[N]&&(o+=" "+N);e=o}n.className=e}else if(t==="style"&&typeof e=="object"){for(let o in e){let N=e[o];o=o.replace(H,M).toLowerCase(),Array.isArray(N)&&(N=N.join(" ")),n.style.setProperty(o,N)}if(r&&r[t]&&typeof r[t]=="object"&&!Array.isArray(r[t]))for(let o in r[t])o in e||(o=o.replace(H,M).toLowerCase(),n.style.removeProperty(o))}else{if(c==="boolean"){if(!e){n.removeAttribute(t);continue}e="true"}else c!=="string"&&(e=e.toString());t==="value"&&n.value!==e?n.value=e:t==="checked"&&(n.checked=s[t]),n.setAttribute(t,e)}}}if(r)for(let t in r)(!s||!s[t])&&(typeof r[t]=="function"?n.removeEventListener(t,r[t]):t==="class"?n.className="":t==="style"?n.style="":(t==="value"?n.value="":t==="checked"&&(n.checked=!1),n.removeAttribute(t)))},Z=(n,s)=>{let r=(e,c,o,N)=>{var v,L,x;let a=0,u=0;if(c)for(;a<c.length;a++){let i=c[a],b=!1;if(o)for(let d=a-u;d<o.length;d++){let f=o[d];if(f.t&&i.t===f.t||!f.t&&!i.t){b=!0,a!==d+u&&(e.insertBefore(e.childNodes[d+u],e.childNodes[a]),o.splice(a-u,0,...o.splice(d,1))),i.t?(k(e.childNodes[a],i.a,f.a),r(e.childNodes[a],i.c,f.c,f)):f!==i&&(e.childNodes[a].textContent=i);break}}if(!b){let d;if(i.t){d=document.createElement(i.t),i.a&&k(d,i.a),i.c&&r(d,i.c);let f=(p,y,g)=>{g&&(!y||y.t)?p.insertAdjacentElement(g,d):p.parentNode.insertBefore(d,p)};a===0?f(e,N,"afterbegin"):((v=o==null?void 0:o.length)!=null?v:0)+u>a?f(e.childNodes[a]):f(e,N,"beforeend")}else{let f=(p,y,g)=>{g&&(!y||y.t)?p.insertAdjacentText(g,i):p.parentNode.insertBefore(document.createTextNode(i),p)};a===0?f(e,N,"afterbegin"):((L=o==null?void 0:o.length)!=null?L:0)+u>a?f(e.childNodes[a]):f(e,N,"beforeend")}u++}}let l=((x=o==null?void 0:o.length)!=null?x:0)+u;if(l>=a)for(let i=l-1;i>=a;i--)e.childNodes[i].remove()},t=typeof n=="string"?document.querySelector(n)||document.body.appendChild(document.createElement("div")):n;if(typeof s=="string")try{s=JSON.parse(s)}catch(e){s=void 0}return s!=null||(s=E(t)),e=>{e=h(e),r(t,e,s),s=e}};export{A as node,Z as prepare};
//# sourceMappingURL=staark-patch.base.min.js.map
