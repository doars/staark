var y=t=>t?Array.isArray(t)?t:[t]:void 0;var m="n";var v=(t,r,n)=>((typeof r!="object"||r._===m||Array.isArray(r))&&(n=r,r=void 0),{_:m,a:r,c:y(n),t:t.toUpperCase()});var g=t=>{var n;let r=[];for(let o of t.childNodes)if(o instanceof Text)r.push((n=o.textContent)!=null?n:"");else{let e=o,f={};for(let s of e.attributes)f[s.name]=s.value;r.push(v(o.nodeName,f,g(o)))}return r};var A=/[A-Z]+(?![a-z])|[A-Z]/g,b=(t,r)=>(r?"-":"")+t,T=(t,r,n)=>{if(r)for(let o in r){let e=r[o];if(e){let f=typeof e;if(f==="function"){let s=n==null?void 0:n[o];s!==e&&(s&&t.removeEventListener(o,s),t.addEventListener(o,e))}else if(o==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let s="";for(let N in e)e[N]&&(s+=" "+N);e=s}t.className=e}else if(o==="style"&&typeof e=="object"){for(let s in e){let N=e[s];s=s.replace(A,b).toLowerCase(),Array.isArray(N)&&(N=N.join(" ")),t.style.setProperty(s,N)}if(n&&n[o]&&typeof n[o]=="object"&&!Array.isArray(n[o]))for(let s in n[o])s in e||(s=s.replace(A,b).toLowerCase(),t.style.removeProperty(s))}else e===!0?e="true":f!=="string"&&(e=e.toString()),t.setAttribute(o,e)}}if(n)for(let o in n)(!r||!r[o])&&(typeof n[o]=="function"?t.removeEventListener(o,n[o]):o==="class"?t.className="":o==="style"?t.style.cssText="":t.removeAttribute(o))},E=(t,r,n,o)=>{var N,x,l;let e=0,f=0;if(r)for(;e<r.length;e++){let i=r[e],L=!1;if(n)for(let d=e-f;d<n.length;d++){let a=n[d];if(a.t&&i.t===a.t||!a.t&&!i.t){L=!0,e!==d+f&&(t.insertBefore(t.childNodes[d+f],t.childNodes[e]),n.splice(e-f,0,...n.splice(d,1))),i.t?(T(t.childNodes[e],i.a,a.a),E(t.childNodes[e],i.c,a.c,a)):a!==i&&(t.childNodes[e].textContent=i);break}}if(!L){let d;if(i.t){d=document.createElement(i.t),i.a&&T(d,i.a),i.c&&E(d,i.c);let a=(c,p,u)=>{u&&(!p||p.t)?c.insertAdjacentElement(u,d):c.parentNode.insertBefore(d,c)};e===0?a(t,o,"afterbegin"):((N=n==null?void 0:n.length)!=null?N:0)+f>e?a(t.childNodes[e]):a(t,o,"beforeend")}else{let a=(c,p,u)=>{u&&(!p||p.t)?c.insertAdjacentText(u,i):c.parentNode.insertBefore(document.createTextNode(i),c)};e===0?a(t,o,"afterbegin"):((x=n==null?void 0:n.length)!=null?x:0)+f>e?a(t.childNodes[e]):a(t,o,"beforeend")}f++}}let s=((l=n==null?void 0:n.length)!=null?l:0)+f;if(s>=e)for(let i=s-1;i>=e;i--)t.childNodes[i].remove()},U=(t,r)=>{let n=typeof t=="string"?document.querySelector(t)||document.body.appendChild(document.createElement("div")):t;if(typeof r=="string")try{r=JSON.parse(r)}catch(o){r=void 0}return r!=null||(r=g(n)),o=>{o=y(o),E(n,o,r),r=o}};export{v as node,U as prepare};
//# sourceMappingURL=staark-patch.base.min.js.map
