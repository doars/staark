var m=Symbol();var E=(n,t,i)=>((typeof t!="object"||t._===m||Array.isArray(t))&&(i=t,t=void 0),{_:m,a:t,c:i?Array.isArray(i)?i:[i]:[],t:n.toUpperCase()});var h=function(n){return Array.isArray(n)?n:[n]};var y=n=>{let t=[];for(let i=0;i<n.childNodes.length;i++){let o=n.childNodes[i];if(o instanceof Text)t.push(o.textContent??"");else{let e={};for(let N=0;N<o.attributes.length;N++){let a=o.attributes[N];e[a.name]=a.value}t.push(E(o.nodeName,e,y(o)))}}return t};var v=/[A-Z]+(?![a-z])|[A-Z]/g,C=(n,t)=>(t?"-":"")+n,x=(n,t,i)=>{if(t)for(let o in t){let e=t[o];if(e){let N=typeof e;if(N==="function"){n.addEventListener(o,e);continue}else{if(o==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let a="";for(let f in e)e[f]&&(a+=" "+f);e=a}}else if(o==="style"){if(typeof e=="object")if(Array.isArray(e))e=e.join(";");else{let a="";for(let f in e){let r=e[f];f=f.replace(v,C).toLowerCase(),Array.isArray(r)?a+=";"+f+":"+r.join(" "):r&&(a+=";"+f+":"+r)}e=a}}else{if(N==="boolean"){if(!e){n.removeAttribute(o);continue}e="true"}else N!=="string"&&(e=e.toString());o==="value"&&n.value!==e?n.value=e:o==="checked"&&(n.checked=t[o])}n.setAttribute(o,e)}}}if(i)for(let o in i)typeof i[o]=="function"?n.removeEventListener(o,i[o]):(!t||!(o in t)||!t[o])&&(o==="value"?n.value="":o==="checked"&&(n.checked=!1),n.removeAttribute(o))},B=(n,t)=>{let i=(e,N,a,f)=>{let r=0,l=0;if(N)for(;r<N.length;r++){let s=N[r],g=!1;if(a)for(let d=r-l;d<a.length;d++){let c=a[d];if(c.t&&s.t===c.t||!c.t&&!s.t){g=!0,r!==d+l&&(e.insertBefore(e.childNodes[d+l],e.childNodes[r]),a.splice(r-l,0,...a.splice(d,1))),s.t?(x(e.childNodes[r],s.a,c.a),i(e.childNodes[r],s.c,c.c,c)):e.childNodes[r].textContent=typeof s=="string"?s:s.c;break}}if(!g){let d;if(s.t){d=document.createElement(s.t),s.a&&x(d,s.a),s.c&&i(d,s.c);let c=(u,p,b)=>{b&&(!p||p.t)?u.insertAdjacentElement(b,d):u.parentNode.insertBefore(d,u)};r===0?c(e,f,"afterbegin"):(a?.length??0)+l>r?c(e.childNodes[r]):c(e,f,"beforeend")}else{d=typeof s=="string"?s:s.c;let c=(u,p,b)=>{b&&(!p||p.t)?u.insertAdjacentText(b,d):u.parentNode.insertBefore(document.createTextNode(d),u.nextSibling)};r===0?c(e,f,"afterbegin"):(a?.length??0)+l>r?c(e.childNodes[r]):c(e,f,"beforeend")}l++}}let A=(a?.length??0)+l;if(A>=r)for(let s=A-1;s>=r;s--)e.childNodes[s].remove()},o=typeof n=="string"?document.querySelector(n)||document.body.appendChild(document.createElement("div")):n;if(typeof t=="string")try{t=JSON.parse(t)}catch{t=void 0}return t??=y(o),e=>{e=h(e),i(o,e,t),t=e}};export{E as node,B as prepare};
//# sourceMappingURL=staark-patch.base.min.js.map
