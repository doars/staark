var f=t=>t?Array.isArray(t)?t:[t]:void 0;var c="n";var p=(t,n,s)=>((typeof n!="object"||n._===c||Array.isArray(n))&&(s=n,n=void 0),{_:c,a:n,c:f(s),t:t.toUpperCase()});var N=t=>{var s;let n=[];for(let e of t.childNodes)if(e instanceof Text)n.push((s=e.textContent)!=null?s:"");else{let o=e,i={};for(let r of o.attributes)i[r.name]=r.value;n.push(p(e.nodeName,i,N(e)))}return n};var u=(t,n,s)=>{if(n)for(let e in n){let o=n[e];if(o){let i=typeof o;if(i==="function"){let r=s==null?void 0:s[e];r!==o&&(r&&t.removeEventListener(e,r),t.addEventListener(e,o))}else if(e==="class"){if(typeof o=="object")if(Array.isArray(o))o=o.join(" ");else{let r="";for(let a in o)o[a]&&(r+=" "+a);o=r}t.className=o}else if(e==="style"&&typeof o=="object"){for(let r in o){let a=o[r];r.includes("-",1)?t.style.setProperty(r,a):t.style[r]=a}if(s&&s[e]&&typeof s[e]=="object"&&!Array.isArray(s[e]))for(let r in s[e])r in o||(r.includes("-")?t.style.removeProperty(r):delete t.style[r])}else o===!0?o="true":i!=="string"&&(o=o.toString()),t.setAttribute(e,o)}}if(s)for(let e in s)(!n||!n[e])&&(typeof s[e]=="function"?t.removeEventListener(e,s[e]):e==="class"?t.className="":e==="style"?t.style.cssText="":t.removeAttribute(e))},l=(t,n,s)=>{let e=0,o=0;if(n)for(;e<n.length;e++){let i=n[e],r=!1;if(s)for(let a=e-o;a<s.length;a++){let d=s[a];if(d.t&&i.t===d.t||!d.t&&!i.t){r=!0,e!==a+o&&(t.insertBefore(t.childNodes[a+o],t.childNodes[e]),s.splice(e-o,0,s.splice(a,1)[0])),i.t?(u(t.childNodes[e],i.a,d.a),l(t.childNodes[e],i.c,d.c)):d!==i&&(t.childNodes[e].textContent=i);break}}if(!r){let a;i.t?(a=document.createElement(i.t),u(a,i.a),l(a,i.c)):a=document.createTextNode(i),t.insertBefore(a,t.childNodes[e]),o++}}if(s){let i=s.length+o;if(i>=e)for(let r=i-1;r>=e;r--)t.childNodes[r].remove()}},T=(t,n)=>{let s=typeof t=="string"?document.querySelector(t)||document.body.appendChild(document.createElement("div")):t;if(typeof n=="string")try{n=JSON.parse(n)}catch(e){n=null}return n||(n=N(s)),e=>{e=f(e),l(s,e,n),n=e}};export{p as node,T as prepare};
//# sourceMappingURL=staark-patch.base.min.js.map
