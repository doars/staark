var p=f=>f?Array.isArray(f)?f:[f]:void 0;var N=(f,r,n)=>(r&&(typeof r!="object"||r._==="n"||Array.isArray(r))&&(n=r,r=void 0),{_:"n",a:r,c:p(n),t:f});var l=f=>{var n;let r=[];for(let i of f.childNodes)if(i instanceof Text)r.push((n=i.textContent)!=null?n:"");else{let e={};for(let s of i.attributes)e[s.name]=s.value;r.push(N(i.nodeName,e,l(i)))}return r};var m=(f,r,n)=>{if(r)for(let i in r){let e=r[i];if(e){let s=typeof e;if(s==="function"){let o=n==null?void 0:n[i];o!==e&&(o&&f.removeEventListener(i,o),f.addEventListener(i,e))}else if(i==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let o="";for(let y in e)e[y]&&(o+=" "+y);e=o}f.className=e}else if(i==="style"&&typeof e=="object"){for(let o in e){let y=e[o];o.includes("-",1)?f.style.setProperty(o,y):f.style[o]=y}if(n&&n[i]&&typeof n[i]=="object"&&!Array.isArray(n[i]))for(let o in n[i])e[o]||(o.includes("-",1)?f.style.removeProperty(o):f.style[o]=null)}else e===!0?e="true":s!=="string"&&(e=e.toString()),f.setAttribute(i,e),i==="value"&&(f.value=e)}}if(n)for(let i in n)(!r||!r[i])&&(typeof n[i]=="function"?f.removeEventListener(i,n[i]):i==="class"?f.className="":i==="style"?f.style.cssText="":i==="value"?f.value="":f.removeAttribute(i))},d=(f,r,n,i)=>{let e=0,s=0;if(r)for(;e<r.length;e++){let o=r[e],y=!1;if(n)for(let c=e-s;c<n.length;c++){let a=n[c];if(a.t&&o.t===a.t||!a.t&&!o.t){y=!0,e!==c+s&&(f.insertBefore(f.childNodes[c+s],f.childNodes[e]),n.splice(e-s,0,n.splice(c,1)[0])),o.t?(m(f.childNodes[e],o.a,a.a),d(f.childNodes[e],o.c,a.c,i||o.t==="SVG"||o.t==="svg")):a!==o&&(f.childNodes[e].textContent=o);break}}if(!y){let c;if(o.t){let a=i||o.t==="SVG"||o.t==="svg";a?c=document.createElementNS("http://www.w3.org/2000/svg",o.t):c=document.createElement(o.t),m(c,o.a),d(c,o.c,void 0,a)}else c=document.createTextNode(o);f.insertBefore(c,f.childNodes[e]),s++}}if(n){let o=n.length+s;if(o>=e)for(let y=o-1;y>=e;y--)f.childNodes[y].remove()}},V=(f,r)=>{let n=typeof f=="string"?document.querySelector(f)||document.body.appendChild(document.createElement("div")):f;if(typeof r=="string")try{r=JSON.parse(r)}catch(i){r=null}return r||(r=l(n)),i=>{i=p(i),d(n,i,r),r=i}};export{N as node,V as prepare};
