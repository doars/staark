var m="n";var b=(n,s,r)=>((typeof s!="object"||s._===m||Array.isArray(s))&&(r=s,s=void 0),{_:m,a:s,c:r?Array.isArray(r)?r:[r]:void 0,t:n.toUpperCase()});var A=n=>Array.isArray(n)?n:[n];var l=n=>{var r;let s=[];for(let t=0;t<n.childNodes.length;t++){let e=n.childNodes[t];if(e instanceof Text)s.push((r=e.textContent)!=null?r:"");else{let d={};for(let o=0;o<e.attributes.length;o++){let N=e.attributes[o];d[N.name]=N.value}s.push(b(e.nodeName,d,l(e)))}}return s};var H=/[A-Z]+(?![a-z])|[A-Z]/g,M=(n,s)=>(s?"-":"")+n,k=(n,s,r)=>{if(s)for(let t in s){let e=s[t];if(e){let d=typeof e;if(d==="function"){if(r&&r[t]){if(r[t]===e)continue;n.removeEventListener(t,r[t])}n.addEventListener(t,e)}else if(t==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let o="";for(let N in e)e[N]&&(o+=" "+N);e=o}n.className=e}else if(t==="style"&&typeof e=="object"){for(let o in e){let N=e[o];o=o.replace(H,M).toLowerCase(),Array.isArray(N)&&(N=N.join(" ")),n.style.setProperty(o,N)}if(r&&r[t]&&typeof r[t]=="object"&&!Array.isArray(r[t]))for(let o in r[t])o in e||(o=o.replace(H,M).toLowerCase(),n.style.removeProperty(o))}else{if(d==="boolean"){if(!e){n.removeAttribute(t);continue}e="true"}else d!=="string"&&(e=e.toString());t==="value"&&n.value!==e?n.value=e:t==="checked"&&(n.checked=s[t]),n.setAttribute(t,e)}}}if(r)for(let t in r)(!s||!s[t])&&(typeof r[t]=="function"?n.removeEventListener(t,r[t]):t==="class"?n.className="":t==="style"?n.style="":(t==="value"?n.value="":t==="checked"&&(n.checked=!1),n.removeAttribute(t)))},Z=(n,s)=>{let r=(e,d,o,N)=>{var v,L,x;let a=0,u=0;if(d)for(;a<d.length;a++){let i=d[a],h=!1;if(o)for(let c=a-u;c<o.length;c++){let f=o[c];if(f.t&&i.t===f.t||!f.t&&!i.t){h=!0,a!==c+u&&(e.insertBefore(e.childNodes[c+u],e.childNodes[a]),o.splice(a-u,0,...o.splice(c,1))),i.t?(k(e.childNodes[a],i.a,f.a),r(e.childNodes[a],i.c,f.c,f)):f!==i&&(e.childNodes[a].textContent=i);break}}if(!h){let c;if(i.t){c=document.createElement(i.t),i.a&&k(c,i.a),i.c&&r(c,i.c);let f=(p,y,g)=>{g&&(!y||y.t)?p.insertAdjacentElement(g,c):p.parentNode.insertBefore(c,p)};a===0?f(e,N,"afterbegin"):((v=o==null?void 0:o.length)!=null?v:0)+u>a?f(e.childNodes[a]):f(e,N,"beforeend")}else{let f=(p,y,g)=>{g&&(!y||y.t)?p.insertAdjacentText(g,i):p.parentNode.insertBefore(document.createTextNode(i),p)};a===0?f(e,N,"afterbegin"):((L=o==null?void 0:o.length)!=null?L:0)+u>a?f(e.childNodes[a]):f(e,N,"beforeend")}u++}}let E=((x=o==null?void 0:o.length)!=null?x:0)+u;if(E>=a)for(let i=E-1;i>=a;i--)e.childNodes[i].remove()},t=typeof n=="string"?document.querySelector(n)||document.body.appendChild(document.createElement("div")):n;if(typeof s=="string")try{s=JSON.parse(s)}catch(e){s=void 0}return s!=null||(s=l(t)),e=>{if(e)e=A(e),r(t,e,s),s=e;else{for(let d=t.childNodes.length-1;d>=0;d--)t.childNodes[d].remove();s=[]}}};export{b as node,Z as prepare};
//# sourceMappingURL=staark-patch.base.min.js.map
