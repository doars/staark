var m=function(o){return Array.isArray(o)?o:[o]};var R=(o,t,r)=>o?m(t):m(r!=null?r:[]);var y=Symbol();var A=(o,t,r)=>((typeof t!="object"||t._===y||Array.isArray(t))&&(r=t,t=void 0),{_:y,a:t,c:r?Array.isArray(r)?r:[r]:[],t:o.toUpperCase()});var G=new Proxy({},{get:(o,t)=>{if(o[t])return o[t];let r=(t[0]+t.substring(1).replace(/([A-Z])/g,s=>"-"+s)).toUpperCase();return o[t]=(s,e)=>A(r,s,e)}});var v="]",S="[",H=".",I="=",P="#",h="'",T='"';var k=o=>{let t=o.length,r=0,s="",e={},c="",n=!0,d=3,a=()=>{if(c){switch(d){case 0:e[c]=n===!0?!0:n,n=!0;break;case 1:if(!e.class){e.class=c;break}e.class+=" "+c;break;case 2:e.id=c;break;case 3:s=c;break}c=""}},i,p,C=()=>{for(p=0;r<t;){if(i=o[r],r++,i===I){n="",i=o[r];let g=i===T,l=i===h;for((g||l)&&(n+=i,r++);r<t;){if(i=o[r],g&&i===T||l&&i===h){n+=i,r++;break}else if(!g&&!l&&i===v)break;n+=i,r++}for((n[0]===T&&n[n.length-1]===T||n[0]===h&&n[n.length-1]===h)&&(n=n.substring(1,n.length-1));r<t&&(i=o[r],r++,i!==v););break}else if(i===S){p++;continue}else if(i===v){if(p--,p<0)break;continue}c+=i}a()};for(;r<t;){if(i=o[r],r++,i===P){a(),d=2;continue}else if(i===H){a(),d=1;continue}else if(i===S){a(),d=0,C();continue}c+=i}return[s,e]};var te=new Proxy({},{get:(o,t)=>{if(o[t])return o[t];let r=(t[0]+t.substring(1).replace(/([A-Z])/g,s=>"-"+s)).toUpperCase();return o[t]=(s,e)=>{let c;if(s){let[n,d]=k(s);c=d}return A(r,c,e)}}});var ne=(o,t)=>t&&o in t&&t[o]?m(t[o]):[];var ce=(o,t)=>{let[r,s]=k(o);return{_:y,a:s,c:t?Array.isArray(t)?t:[t]:[],t:r.toUpperCase()}};var Ne=o=>({_:y,c:Array.isArray(o)?o.join(""):""+o});var L=o=>{var r;let t=[];for(let s=0;s<o.childNodes.length;s++){let e=o.childNodes[s];if(e instanceof Text)t.push((r=e.textContent)!=null?r:"");else{let c={};for(let n=0;n<e.attributes.length;n++){let d=e.attributes[n];c[d.name]=d.value}t.push(A(e.nodeName,c,L(e)))}}return t};var M=/[A-Z]+(?![a-z])|[A-Z]/g,B=(o,t)=>(t?"-":"")+o,j=(o,t,r)=>{if(t)for(let s in t){let e=t[s];if(e){let c=typeof e;if(c==="function"){o.addEventListener(s,e);continue}else{if(s==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let n="";for(let d in e)e[d]&&(n+=" "+d);e=n}}else if(s==="style"){if(typeof e=="object")if(Array.isArray(e))e=e.join(";");else{let n="";for(let d in e){let a=e[d];d=d.replace(M,B).toLowerCase(),Array.isArray(a)?n+=";"+d+":"+a.join(" "):a&&(n+=";"+d+":"+a)}e=n}}else{if(c==="boolean"){if(!e){o.removeAttribute(s);continue}e="true"}else c!=="string"&&(e=e.toString());s==="value"&&o.value!==e?o.value=e:s==="checked"&&(o.checked=t[s])}o.setAttribute(s,e)}}}if(r)for(let s in r)typeof r[s]=="function"?o.removeEventListener(s,r[s]):(!t||!(s in t)||!t[s])&&(s==="value"?o.value="":s==="checked"&&(o.checked=!1),o.removeAttribute(s))},Ae=(o,t)=>{let r=(e,c,n,d)=>{var C,g,l;let a=0,i=0;if(c)for(;a<c.length;a++){let f=c[a],_=!1;if(n)for(let N=a-i;N<n.length;N++){let u=n[N];if(u.t&&f.t===u.t||!u.t&&!f.t){_=!0,a!==N+i&&(e.insertBefore(e.childNodes[N+i],e.childNodes[a]),n.splice(a-i,0,...n.splice(N,1))),f.t?(j(e.childNodes[a],f.a,u.a),r(e.childNodes[a],f.c,u.c,u)):e.childNodes[a].textContent=typeof f=="string"?f:f.c;break}}if(!_){let N;if(f.t){N=document.createElement(f.t),f.a&&j(N,f.a),f.c&&r(N,f.c);let u=(b,x,E)=>{E&&(!x||x.t)?b.insertAdjacentElement(E,N):b.parentNode.insertBefore(N,b)};a===0?u(e,d,"afterbegin"):((C=n==null?void 0:n.length)!=null?C:0)+i>a?u(e.childNodes[a]):u(e,d,"beforeend")}else{N=typeof f=="string"?f:f.c;let u=(b,x,E)=>{E&&(!x||x.t)?b.insertAdjacentText(E,N):b.parentNode.insertBefore(document.createTextNode(N),b.nextSibling)};a===0?u(e,d,"afterbegin"):((g=n==null?void 0:n.length)!=null?g:0)+i>a?u(e.childNodes[a]):u(e,d,"beforeend")}i++}}let p=((l=n==null?void 0:n.length)!=null?l:0)+i;if(p>=a)for(let f=p-1;f>=a;f--)e.childNodes[f].remove()},s=typeof o=="string"?document.querySelector(o)||document.body.appendChild(document.createElement("div")):o;if(typeof t=="string")try{t=JSON.parse(t)}catch(e){t=void 0}return t!=null||(t=L(s)),e=>{e=m(e),r(s,e,t),t=e}};export{R as conditional,G as factory,te as fctory,ne as match,ce as nde,A as node,Ae as prepare,Ne as text};
//# sourceMappingURL=staark-patch.min.js.map
