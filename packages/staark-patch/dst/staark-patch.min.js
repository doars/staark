var d=o=>l(o)||[],l=o=>o?Array.isArray(o)?o:[o]:void 0;var O=(o,r,t)=>{let e=o?r:t;return typeof e=="function"&&(e=e()),d(e)};var m="n";var y=(o,r,t)=>((typeof r!="object"||r._===m||Array.isArray(r))&&(t=r,r=void 0),{_:m,a:r,c:l(t),t:o.toUpperCase()});var B=new Proxy({},{get:(o,r)=>{if(o[r])return o[r];let t=(r[0]+r.substring(1).replace(/([A-Z])/g,e=>"-"+e)).toUpperCase();return o[r]=(e,i)=>y(t,e,i)}});var v="]",T="[",S=".",j="=",P="#",h="'",N='"',p={attribute:0,class:1,id:2,type:3},x=o=>{let r=o.length,t=0,e="",i={},f="",n=!0,s=p.type,a=()=>{if(f){switch(s){case p.attribute:i[f]=n===!0?!0:n,n=!0;break;case p.class:if(!i.class){i.class=f;break}i.class+=" "+f;break;case p.id:i.id=f;break;case p.type:e=f;break}f=""}},c,u,L=()=>{for(u=0;t<r;){if(c=o[t],t++,c===j){n="",c=o[t];let k=c===N,g=c===h;for((k||g)&&(n+=c,t++);t<r;){if(c=o[t],k&&c===N||g&&c===h){n+=c,t++;break}else if(!k&&!g&&c===v)break;n+=c,t++}for((n[0]===N&&n[n.length-1]===N||n[0]===h&&n[n.length-1]===h)&&(n=n.substring(1,n.length-1));t<r&&(c=o[t],t++,c!==v););break}else if(c===T){u++;continue}else if(c===v){if(u--,u<0)break;continue}f+=c}a()};for(;t<r;){if(c=o[t],t++,c===P){a(),s=p.id;continue}else if(c===S){a(),s=p.class;continue}else if(c===T){a(),s=p.attribute,L();continue}f+=c}return[e,i]};var Q=new Proxy({},{get:(o,r)=>{if(o[r])return o[r];let t=(r[0]+r.substring(1).replace(/([A-Z])/g,e=>"-"+e)).toUpperCase();return o[r]=(e,i)=>{let f;if(e){let[n,s]=x(e);f=s}return y(t,f,i)}}});var C=0,z=o=>o+"-"+C++;var D=(o,r,t)=>{let e;return r&&o in r&&r[o]?e=r[o]:e=t,typeof e=="function"&&(e=e()),d(e)};var I=(o,r)=>{let[t,e]=x(o);return{_:m,a:e,c:l(r),t:t.toUpperCase()}};var E=o=>{var t;let r=[];for(let e of o.childNodes)if(e instanceof Text)r.push((t=e.textContent)!=null?t:"");else{let i={};for(let f of e.attributes)i[f.name]=f.value;r.push(y(e.nodeName,i,E(e)))}return r};var _=(o,r,t)=>{if(r)for(let e in r){let i=r[e];if(i){let f=typeof i;if(f==="function"){let n=t==null?void 0:t[e];n!==i&&(n&&o.removeEventListener(e,n),o.addEventListener(e,i))}else if(e==="class"){if(typeof i=="object")if(Array.isArray(i))i=i.join(" ");else{let n="";for(let s in i)i[s]&&(n+=" "+s);i=n}o.className=i}else if(e==="style"&&typeof i=="object"){for(let n in i){let s=i[n];n.includes("-",1)?o.style.setProperty(n,s):o.style[n]=s}if(t&&t[e]&&typeof t[e]=="object"&&!Array.isArray(t[e]))for(let n in t[e])n in i||(n.includes("-")?o.style.removeProperty(n):delete o.style[n])}else i===!0?i="true":f!=="string"&&(i=i.toString()),o.setAttribute(e,i)}}if(t)for(let e in t)(!r||!r[e])&&(typeof t[e]=="function"?o.removeEventListener(e,t[e]):e==="class"?o.className="":e==="style"?o.style.cssText="":e==="value"?o.value="":o.removeAttribute(e))},U=(o,r,t)=>{let e=0,i=0;if(r)for(;e<r.length;e++){let f=r[e],n=!1;if(t)for(let s=e-i;s<t.length;s++){let a=t[s];if(a.t&&f.t===a.t||!a.t&&!f.t){n=!0,e!==s+i&&(o.insertBefore(o.childNodes[s+i],o.childNodes[e]),t.splice(e-i,0,t.splice(s,1)[0])),f.t?(_(o.childNodes[e],f.a,a.a),U(o.childNodes[e],f.c,a.c)):a!==f&&(o.childNodes[e].textContent=f);break}}if(!n){let s;f.t?(s=document.createElement(f.t),_(s,f.a),U(s,f.c)):s=document.createTextNode(f),o.insertBefore(s,o.childNodes[e]),i++}}if(t){let f=t.length+i;if(f>=e)for(let n=f-1;n>=e;n--)o.childNodes[n].remove()}},w=(o,r)=>{let t=typeof o=="string"?document.querySelector(o)||document.body.appendChild(document.createElement("div")):o;if(typeof r=="string")try{r=JSON.parse(r)}catch(e){r=null}return r||(r=E(t)),e=>{e=l(e),U(t,e,r),r=e}};export{O as conditional,B as factory,Q as fctory,z as identifier,D as match,I as nde,y as node,w as prepare};
