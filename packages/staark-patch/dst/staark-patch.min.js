var p=function(o){return Array.isArray(o)?o:[o]};var M=(o,e,r)=>o?p(e):p(r??[]);var m=Symbol();var y=(o,e,r)=>((typeof e!="object"||e._===m||Array.isArray(e))&&(r=e,e=void 0),{_:m,a:e,c:r?Array.isArray(r)?r:[r]:[],t:o.toUpperCase()});var w=new Proxy({},{get:(o,e)=>{if(o[e])return o[e];let r=(e[0]+e.substring(1).replace(/([A-Z])/g,n=>"-"+n)).toUpperCase();return o[e]=(n,t)=>y(r,n,t)}});var T="]",v="[",_=".",F="=",S="#",x="'",h='"';var E=o=>{let e=o.length,r=0,n="",t={},c="",s=!0,f=3,a=()=>{if(c){switch(f){case 0:t[c]=s===!0?!0:s,s=!0;break;case 1:if(!t.class){t.class=c;break}t.class+=" "+c;break;case 2:t.id=c;break;case 3:n=c;break}c=""}},i,b,d=()=>{for(b=0;r<e;){if(i=o[r],r++,i===F){s="",i=o[r];let A=i===h,N=i===x;for((A||N)&&(s+=i,r++);r<e;){if(i=o[r],A&&i===h||N&&i===x){s+=i,r++;break}else if(!A&&!N&&i===T)break;s+=i,r++}for((s[0]===h&&s[s.length-1]===h||s[0]===x&&s[s.length-1]===x)&&(s=s.substring(1,s.length-1));r<e&&(i=o[r],r++,i!==T););break}else if(i===v){b++;continue}else if(i===T){if(b--,b<0)break;continue}c+=i}a()};for(;r<e;){if(i=o[r],r++,i===S){a(),f=2;continue}else if(i===_){a(),f=1;continue}else if(i===v){a(),f=0,d();continue}c+=i}return[n,t]};var X=new Proxy({},{get:(o,e)=>{if(o[e])return o[e];let r=(e[0]+e.substring(1).replace(/([A-Z])/g,n=>"-"+n)).toUpperCase();return o[e]=(n,t)=>{let c;if(n){let[s,f]=E(n);c=f}return y(r,c,t)}}});var et=(o,e)=>e&&o in e&&e[o]?p(e[o]):[];var st=(o,e)=>{let[r,n]=E(o);return{_:m,a:n,c:e?Array.isArray(e)?e:[e]:[],t:r.toUpperCase()}};var ct=o=>({_:m,c:Array.isArray(o)?o.join(""):""+o});var k=o=>{let e=[];for(let r=0;r<o.childNodes.length;r++){let n=o.childNodes[r];if(n instanceof Text)e.push(n.textContent??"");else{let t={};for(let c=0;c<n.attributes.length;c++){let s=n.attributes[c];t[s.name]=s.value}e.push(y(n.nodeName,t,k(n)))}}return e};var j=/[A-Z]+(?![a-z])|[A-Z]/g,H=(o,e)=>(e?"-":"")+o,L=(o,e,r)=>{if(e)for(let n in e){let t=e[n];if(t){let c=typeof t;if(c==="function"){o.addEventListener(n,t);continue}else{if(n==="class"){if(typeof t=="object")if(Array.isArray(t))t=t.join(" ");else{let s="";for(let f in t)t[f]&&(s+=" "+f);t=s}}else if(n==="style"){if(typeof t=="object")if(Array.isArray(t))t=t.join(";");else{let s="";for(let f in t){let a=t[f];f=f.replace(j,H).toLowerCase(),Array.isArray(a)?s+=";"+f+":"+a.join(" "):a&&(s+=";"+f+":"+a)}t=s}}else{if(c==="boolean"){if(!t){o.removeAttribute(n);continue}t="true"}else c!=="string"&&(t=t.toString());n==="value"&&o.value!==t?o.value=t:n==="checked"&&(o.checked=e[n])}o.setAttribute(n,t)}}}if(r)for(let n in r)typeof r[n]=="function"?o.removeEventListener(n,r[n]):(!e||!(n in e)||!e[n])&&(n==="value"?o.value="":n==="checked"&&(o.checked=!1),o.removeAttribute(n))},mt=(o,e)=>{let r=(t,c,s,f)=>{let a=0,i=0;if(c)for(;a<c.length;a++){let d=c[a],A=!1;if(s)for(let N=a-i;N<s.length;N++){let u=s[N];if(u.t&&d.t===u.t||!u.t&&!d.t){A=!0,a!==N+i&&(t.insertBefore(t.childNodes[N+i],t.childNodes[a]),s.splice(a-i,0,...s.splice(N,1))),d.t?(L(t.childNodes[a],d.a,u.a),r(t.childNodes[a],d.c,u.c,u)):t.childNodes[a].textContent=typeof d=="string"?d:d.c;break}}if(!A){let N;if(d.t){N=document.createElement(d.t),d.a&&L(N,d.a),d.c&&r(N,d.c);let u=(l,g,C)=>{C&&(!g||g.t)?l.insertAdjacentElement(C,N):l.parentNode.insertBefore(N,l)};a===0?u(t,f,"afterbegin"):(s?.length??0)+i>a?u(t.childNodes[a]):u(t,f,"beforeend")}else{N=typeof d=="string"?d:d.c;let u=(l,g,C)=>{C&&(!g||g.t)?l.insertAdjacentText(C,N):l.parentNode.insertBefore(document.createTextNode(N),l.nextSibling)};a===0?u(t,f,"afterbegin"):(s?.length??0)+i>a?u(t.childNodes[a]):u(t,f,"beforeend")}i++}}let b=(s?.length??0)+i;if(b>=a)for(let d=b-1;d>=a;d--)t.childNodes[d].remove()},n=typeof o=="string"?document.querySelector(o)||document.body.appendChild(document.createElement("div")):o;if(typeof e=="string")try{e=JSON.parse(e)}catch{e=void 0}return e??=k(n),t=>{t=p(t),r(n,t,e),e=t}};export{M as conditional,w as factory,X as fctory,et as match,st as nde,y as node,mt as prepare,ct as text};
//# sourceMappingURL=staark-patch.min.js.map
