var p=t=>{var o;return(o=f(t))!=null?o:[]},f=t=>t?Array.isArray(t)?t:[t]:void 0;var H=(t,o,n)=>{let e=t?o:n;return typeof e=="function"&&(e=e()),p(e)};var u="n";var N=(t,o,n)=>((typeof o!="object"||o._===u||Array.isArray(o))&&(n=o,o=void 0),{_:u,a:o,c:f(n),t:t.toUpperCase()});var D=new Proxy({},{get:(t,o)=>{if(t[o])return t[o];let n=(o[0]+o.substring(1).replace(/([A-Z])/g,e=>"-"+e)).toUpperCase();return t[o]=(e,s)=>N(n,e,s)}});var C="]",E="[",k=".",L="=",F="#",b="'",y='"';var m=t=>{let o=t.length,n=0,e="",s={},i="",r=!0,a=3,c=()=>{if(i){switch(a){case 0:s[i]=r===!0?!0:r,r=!0;break;case 1:if(!s.class){s.class=i;break}s.class+=" "+i;break;case 2:s.id=i;break;case 3:e=i;break}i=""}},d,l,T=()=>{for(l=0;n<o;){if(d=t[n],n++,d===L){r="",d=t[n];let A=d===y,g=d===b;for((A||g)&&(r+=d,n++);n<o;){if(d=t[n],A&&d===y||g&&d===b){r+=d,n++;break}else if(!A&&!g&&d===C)break;r+=d,n++}for((r[0]===y&&r[r.length-1]===y||r[0]===b&&r[r.length-1]===b)&&(r=r.substring(1,r.length-1));n<o&&(d=t[n],n++,d!==C););break}else if(d===E){l++;continue}else if(d===C){if(l--,l<0)break;continue}i+=d}c()};for(;n<o;){if(d=t[n],n++,d===F){c(),a=2;continue}else if(d===k){c(),a=1;continue}else if(d===E){c(),a=0,T();continue}i+=d}return[e,s]};var W=new Proxy({},{get:(t,o)=>{if(t[o])return t[o];let n=(o[0]+o.substring(1).replace(/([A-Z])/g,e=>"-"+e)).toUpperCase();return t[o]=(e,s)=>{let i;if(e){let[r,a]=m(e);i=a}return N(n,i,s)}}});var R=0,Y=t=>t+"-"+R++;var te=(t,o,n)=>{let e;return o&&t in o&&o[t]?(e=o[t],typeof e=="function"&&(e=e())):e=n,p(e)};var ae=(t,o)=>{let[n,e]=m(t);return{_:u,a:e,c:f(o),t:n.toUpperCase()}};var x=t=>{var n;let o=[];for(let e of t.childNodes)if(e instanceof Text)o.push((n=e.textContent)!=null?n:"");else{let s=e,i={};for(let r of s.attributes)i[r.name]=r.value;o.push(N(e.nodeName,i,x(e)))}return o};var v=(t,o,n)=>{if(o)for(let e in o){let s=o[e];if(s){let i=typeof s;if(i==="function"){let r=n==null?void 0:n[e];r!==s&&(r&&t.removeEventListener(e,r),t.addEventListener(e,s))}else if(e==="class"){if(typeof s=="object")if(Array.isArray(s))s=s.join(" ");else{let r="";for(let a in s)s[a]&&(r+=" "+a);s=r}t.className=s}else if(e==="style"&&typeof s=="object"){for(let r in s){let a=s[r];r.includes("-",1)?t.style.setProperty(r,a):t.style[r]=a}if(n&&n[e]&&typeof n[e]=="object"&&!Array.isArray(n[e]))for(let r in n[e])r in s||(r.includes("-")?t.style.removeProperty(r):delete t.style[r])}else s===!0?s="true":i!=="string"&&(s=s.toString()),t.setAttribute(e,s)}}if(n)for(let e in n)(!o||!o[e])&&(typeof n[e]=="function"?t.removeEventListener(e,n[e]):e==="class"?t.className="":e==="style"?t.style.cssText="":t.removeAttribute(e))},h=(t,o,n)=>{let e=0,s=0;if(o)for(;e<o.length;e++){let i=o[e],r=!1;if(n)for(let a=e-s;a<n.length;a++){let c=n[a];if(c.t&&i.t===c.t||!c.t&&!i.t){r=!0,e!==a+s&&(t.insertBefore(t.childNodes[a+s],t.childNodes[e]),n.splice(e-s,0,n.splice(a,1)[0])),i.t?(v(t.childNodes[e],i.a,c.a),h(t.childNodes[e],i.c,c.c)):c!==i&&(t.childNodes[e].textContent=i);break}}if(!r){let a;i.t?(a=document.createElement(i.t),v(a,i.a),h(a,i.c)):a=document.createTextNode(i),t.insertBefore(a,t.childNodes[e]),s++}}if(n){let i=n.length+s;if(i>=e)for(let r=i-1;r>=e;r--)t.childNodes[r].remove()}},be=(t,o)=>{let n=typeof t=="string"?document.querySelector(t)||document.body.appendChild(document.createElement("div")):t;if(typeof o=="string")try{o=JSON.parse(o)}catch(e){o=null}return o||(o=x(n)),e=>{e=f(e),h(n,e,o),o=e}};export{H as conditional,D as factory,W as fctory,Y as identifier,te as match,ae as nde,N as node,be as prepare};
//# sourceMappingURL=staark-patch.min.js.map
