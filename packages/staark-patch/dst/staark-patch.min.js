var m=e=>p(e)||[],p=e=>e?Array.isArray(e)?e:[e]:void 0;var x=(e,r,t)=>{let o=e?r:t;return typeof o=="function"&&(o=o()),m(o)};var u=(e,r,t)=>(r&&(typeof r!="object"||r._==="n"||Array.isArray(r))&&(t=r,r=void 0),{_:"n",a:r,c:p(t),t:e});var g=new Proxy({},{get:(e,r)=>{if(e[r])return e[r];let t=r[0].toLowerCase()+r.substring(1).replace(/([A-Z])/g,o=>"-"+o.toLowerCase());return e[r]=(o,n)=>u(t,o,n)}});var l={attribute:0,class:1,id:2,type:3},E=e=>{let r=e.length,t=0,o="",n={},s="",i=!0,c=l.type,a=()=>{if(s){switch(c){case l.attribute:n[s]=i===!0?!0:i,i=!0;break;case l.class:if(!n.class){n.class=s;break}n.class+=" "+s;break;case l.id:n.id=s;break;case l.type:o=s;break}s=""}},f,y,_=()=>{for(y=0;t<r;){if(f=e[t],t++,f==="="){i="",f=e[t];let N=f==='"',h=f==="'";for((N||h)&&(i+=f,t++);t<r;){if(f=e[t],N&&f==='"'||h&&f==="'"){i+=f,t++;break}else if(!N&&!h&&f==="]")break;i+=f,t++}for((i[0]==='"'&&i[i.length-1]==='"'||i[0]==="'"&&i[i.length-1]==="'")&&(i=i.substring(1,i.length-1));t<r&&(f=e[t],t++,f!=="]"););break}else if(f==="["){y++;continue}else if(f==="]"){if(y--,y<0)break;continue}s+=f}a()};for(;t<r;){if(f=e[t],t++,f==="#"){a(),c=l.id;continue}else if(f==="."){a(),c=l.class;continue}else if(f==="["){a(),c=l.attribute,_();continue}s+=f}return[o,n]};var U=new Proxy({},{get:(e,r)=>{if(e[r])return e[r];let t=r[0].toLowerCase()+r.substring(1).replace(/([A-Z])/g,o=>"-"+o.toLowerCase());return e[r]=(o,n)=>{let s;if(o){let[i,c]=E(o);s=c}return u(t,s,n)}}});var v=0,k=e=>e+"-"+v++;var S=(e,r,t)=>{let o;return r&&e in r&&r[e]?o=r[e]:o=t,typeof o=="function"&&(o=o()),m(o)};var B=(e,r)=>{let[t,o]=E(e);return{_:"n",a:o,c:p(r),t}};var O=e=>{var t;let r=[];for(let o of e.childNodes)if(o instanceof Text)r.push((t=o.textContent)!=null?t:"");else{let n={};for(let s of o.attributes)n[s.name]=s.value;r.push(u(o.nodeName,n,O(o)))}return r};var T=(e,r,t)=>{if(r)for(let o in r){let n=r[o];if(n){let s=typeof n;if(s==="function"){let i=t==null?void 0:t[o];i!==n&&(i&&e.removeEventListener(o,i),e.addEventListener(o,n))}else if(o==="class"){if(typeof n=="object")if(Array.isArray(n))n=n.join(" ");else{let i="";for(let c in n)n[c]&&(i+=" "+c);n=i}e.className=n}else if(o==="style"&&typeof n=="object"){for(let i in n){let c=n[i];i.includes("-",1)?e.style.setProperty(i,c):e.style[i]=c}if(t&&t[o]&&typeof t[o]=="object"&&!Array.isArray(t[o]))for(let i in t[o])n[i]||(i.includes("-",1)?e.style.removeProperty(i):e.style[i]=null)}else n===!0?n="true":s!=="string"&&(n=n.toString()),e.setAttribute(o,n),o==="value"&&(e.value=n)}}if(t)for(let o in t)(!r||!r[o])&&(typeof t[o]=="function"?e.removeEventListener(o,t[o]):o==="class"?e.className="":o==="style"?e.style.cssText="":o==="value"?e.value="":e.removeAttribute(o))},L=(e,r,t,o)=>{let n=0,s=0;if(r)for(;n<r.length;n++){let i=r[n],c=!1;if(t)for(let a=n-s;a<t.length;a++){let f=t[a];if(f.t&&i.t===f.t||!f.t&&!i.t){c=!0,n!==a+s&&(e.insertBefore(e.childNodes[a+s],e.childNodes[n]),t.splice(n-s,0,t.splice(a,1)[0])),i.t?(T(e.childNodes[n],i.a,f.a),L(e.childNodes[n],i.c,f.c,o||i.t==="SVG"||i.t==="svg")):f!==i&&(e.childNodes[n].textContent=i);break}}if(!c){let a;if(i.t){let f=o||i.t==="SVG"||i.t==="svg";f?a=document.createElementNS("http://www.w3.org/2000/svg",i.t):a=document.createElement(i.t),T(a,i.a),L(a,i.c,void 0,f)}else a=document.createTextNode(i);e.insertBefore(a,e.childNodes[n]),s++}}if(t){let i=t.length+s;if(i>=n)for(let c=i-1;c>=n;c--)e.childNodes[c].remove()}},Q=(e,r)=>{let t=typeof e=="string"?document.querySelector(e)||document.body.appendChild(document.createElement("div")):e;if(typeof r=="string")try{r=JSON.parse(r)}catch(o){r=null}return r||(r=O(t)),o=>{o=p(o),L(t,o,r),r=o}};export{x as conditional,g as factory,U as fctory,k as identifier,S as match,B as nde,u as node,Q as prepare};
