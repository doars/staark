var m=o=>Array.isArray(o)?o:[o];var w=(o,t,n)=>{let r=o?t:n;return typeof r=="function"&&(r=r()),r?m(r):[]};var C="n";var g=(o,t,n)=>((typeof t!="object"||t._===C||Array.isArray(t))&&(n=t,t=void 0),{_:C,a:t,c:n?Array.isArray(n)?n:[n]:void 0,t:o.toUpperCase()});var J=new Proxy({},{get:(o,t)=>{if(o[t])return o[t];let n=(t[0]+t.substring(1).replace(/([A-Z])/g,r=>"-"+r)).toUpperCase();return o[t]=(r,e)=>g(n,r,e)}});var L="]",R="[",I=".",P="=",j="#",v="'",h='"';var k=o=>{let t=o.length,n=0,r="",e={},a="",s=!0,d=3,c=()=>{if(a){switch(d){case 0:e[a]=s===!0?!0:s,s=!0;break;case 1:if(!e.class){e.class=a;break}e.class+=" "+a;break;case 2:e.id=a;break;case 3:r=a;break}a=""}},i,p,x=()=>{for(p=0;n<t;){if(i=o[n],n++,i===P){s="",i=o[n];let y=i===h,b=i===v;for((y||b)&&(s+=i,n++);n<t;){if(i=o[n],y&&i===h||b&&i===v){s+=i,n++;break}else if(!y&&!b&&i===L)break;s+=i,n++}for((s[0]===h&&s[s.length-1]===h||s[0]===v&&s[s.length-1]===v)&&(s=s.substring(1,s.length-1));n<t&&(i=o[n],n++,i!==L););break}else if(i===R){p++;continue}else if(i===L){if(p--,p<0)break;continue}a+=i}c()};for(;n<t;){if(i=o[n],n++,i===j){c(),d=2;continue}else if(i===I){c(),d=1;continue}else if(i===R){c(),d=0,x();continue}a+=i}return[r,e]};var oe=new Proxy({},{get:(o,t)=>{if(o[t])return o[t];let n=(t[0]+t.substring(1).replace(/([A-Z])/g,r=>"-"+r)).toUpperCase();return o[t]=(r,e)=>{let a;if(r){let[s,d]=k(r);a=d}return g(n,a,e)}}});var B=0,re=o=>o+"-"+B++;var ae=(o,t)=>{if(t&&o in t&&t[o]){let n=t[o];return typeof n=="function"&&(n=n(),!n)?[]:m(n)}return[]};var Ne=(o,t)=>{let[n,r]=k(o);return{_:C,a:r,c:t?Array.isArray(t)?t:[t]:void 0,t:n.toUpperCase()}};var T=o=>{var n;let t=[];for(let r=0;r<o.childNodes.length;r++){let e=o.childNodes[r];if(e instanceof Text)t.push((n=e.textContent)!=null?n:"");else{let a={};for(let s=0;s<e.attributes.length;s++){let d=e.attributes[s];a[d.name]=d.value}t.push(g(e.nodeName,a,T(e)))}}return t};var _=/[A-Z]+(?![a-z])|[A-Z]/g,H=(o,t)=>(t?"-":"")+o,M=(o,t,n)=>{if(t)for(let r in t){let e=t[r];if(e){let a=typeof e;if(a==="function"){if(n&&n[r]){if(n[r]===e)continue;o.removeEventListener(r,n[r])}o.addEventListener(r,e)}else if(r==="class"){if(typeof e=="object")if(Array.isArray(e))e=e.join(" ");else{let s="";for(let d in e)e[d]&&(s+=" "+d);e=s}o.className=e}else if(r==="style"&&typeof e=="object"){for(let s in e){let d=e[s];s=s.replace(_,H).toLowerCase(),Array.isArray(d)&&(d=d.join(" ")),o.style.setProperty(s,d)}if(n&&n[r]&&typeof n[r]=="object"&&!Array.isArray(n[r]))for(let s in n[r])s in e||(s=s.replace(_,H).toLowerCase(),o.style.removeProperty(s))}else{if(a==="boolean"){if(!e){o.removeAttribute(r);continue}e="true"}else a!=="string"&&(e=e.toString());r==="value"&&o.value!==e?o.value=e:r==="checked"&&(o.checked=t[r]),o.setAttribute(r,e)}}}if(n)for(let r in n)(!t||!t[r])&&(typeof n[r]=="function"?o.removeEventListener(r,n[r]):r==="class"?o.className="":r==="style"?o.style="":(r==="value"?o.value="":r==="checked"&&(o.checked=!1),o.removeAttribute(r)))},Ae=(o,t)=>{let n=(e,a,s,d)=>{var x,y,b;let c=0,i=0;if(a)for(;c<a.length;c++){let f=a[c],F=!1;if(s)for(let u=c-i;u<s.length;u++){let N=s[u];if(N.t&&f.t===N.t||!N.t&&!f.t){F=!0,c!==u+i&&(e.insertBefore(e.childNodes[u+i],e.childNodes[c]),s.splice(c-i,0,...s.splice(u,1))),f.t?(M(e.childNodes[c],f.a,N.a),n(e.childNodes[c],f.c,N.c,N)):N!==f&&(e.childNodes[c].textContent=f);break}}if(!F){let u;if(f.t){u=document.createElement(f.t),f.a&&M(u,f.a),f.c&&n(u,f.c);let N=(l,A,E)=>{E&&(!A||A.t)?l.insertAdjacentElement(E,u):l.parentNode.insertBefore(u,l)};c===0?N(e,d,"afterbegin"):((x=s==null?void 0:s.length)!=null?x:0)+i>c?N(e.childNodes[c]):N(e,d,"beforeend")}else{let N=(l,A,E)=>{E&&(!A||A.t)?l.insertAdjacentText(E,f):l.parentNode.insertBefore(document.createTextNode(f),l)};c===0?N(e,d,"afterbegin"):((y=s==null?void 0:s.length)!=null?y:0)+i>c?N(e.childNodes[c]):N(e,d,"beforeend")}i++}}let p=((b=s==null?void 0:s.length)!=null?b:0)+i;if(p>=c)for(let f=p-1;f>=c;f--)e.childNodes[f].remove()},r=typeof o=="string"?document.querySelector(o)||document.body.appendChild(document.createElement("div")):o;if(typeof t=="string")try{t=JSON.parse(t)}catch(e){t=void 0}return t!=null||(t=T(r)),e=>{if(e)e=m(e),n(r,e,t),t=e;else{for(let a=r.childNodes.length-1;a>=0;a--)r.childNodes[a].remove();t=[]}}};export{w as conditional,J as factory,oe as fctory,re as identifier,ae as match,Ne as nde,g as node,Ae as prepare};
//# sourceMappingURL=staark-patch.min.js.map
