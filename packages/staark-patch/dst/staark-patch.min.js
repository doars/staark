var d=o=>l(o)||[],l=o=>o?Array.isArray(o)?o:[o]:void 0;var B=(o,r,i)=>{let e=o?r:i;return typeof e=="function"&&(e=e()),d(e)};var m="n";var y=(o,r,i)=>(r&&(typeof r!="object"||r._===m||Array.isArray(r))&&(i=r,r=void 0),{_:m,a:r,c:l(i),t:o.toUpperCase()});var O=new Proxy({},{get:(o,r)=>{if(o[r])return o[r];let i=(r[0]+r.substring(1).replace(/([A-Z])/g,e=>"-"+e)).toUpperCase();return o[r]=(e,t)=>y(i,e,t)}});var v="]",T="[",S=".",j="=",P="#",h="'",N='"',p={attribute:0,class:1,id:2,type:3},x=o=>{let r=o.length,i=0,e="",t={},f="",n=!0,s=p.type,a=()=>{if(f){switch(s){case p.attribute:t[f]=n===!0?!0:n,n=!0;break;case p.class:if(!t.class){t.class=f;break}t.class+=" "+f;break;case p.id:t.id=f;break;case p.type:e=f;break}f=""}},c,u,L=()=>{for(u=0;i<r;){if(c=o[i],i++,c===j){n="",c=o[i];let k=c===N,g=c===h;for((k||g)&&(n+=c,i++);i<r;){if(c=o[i],k&&c===N||g&&c===h){n+=c,i++;break}else if(!k&&!g&&c===v)break;n+=c,i++}for((n[0]===N&&n[n.length-1]===N||n[0]===h&&n[n.length-1]===h)&&(n=n.substring(1,n.length-1));i<r&&(c=o[i],i++,c!==v););break}else if(c===T){u++;continue}else if(c===v){if(u--,u<0)break;continue}f+=c}a()};for(;i<r;){if(c=o[i],i++,c===P){a(),s=p.id;continue}else if(c===S){a(),s=p.class;continue}else if(c===T){a(),s=p.attribute,L();continue}f+=c}return[e,t]};var Q=new Proxy({},{get:(o,r)=>{if(o[r])return o[r];let i=(r[0]+r.substring(1).replace(/([A-Z])/g,e=>"-"+e)).toUpperCase();return o[r]=(e,t)=>{let f;if(e){let[n,s]=x(e);f=s}return y(i,f,t)}}});var z=0,C=o=>o+"-"+z++;var D=(o,r,i)=>{let e;return r&&o in r&&r[o]?e=r[o]:e=i,typeof e=="function"&&(e=e()),d(e)};var I=(o,r)=>{let[i,e]=x(o);return{_:m,a:e,c:l(r),t:i.toUpperCase()}};var E=o=>{var i;let r=[];for(let e of o.childNodes)if(e instanceof Text)r.push((i=e.textContent)!=null?i:"");else{let t={};for(let f of e.attributes)t[f.name]=f.value;r.push(y(e.nodeName,t,E(e)))}return r};var _=(o,r,i)=>{if(r)for(let e in r){let t=r[e];if(t){let f=typeof t;if(f==="function"){let n=i==null?void 0:i[e];n!==t&&(n&&o.removeEventListener(e,n),o.addEventListener(e,t))}else if(e==="class"){if(typeof t=="object")if(Array.isArray(t))t=t.join(" ");else{let n="";for(let s in t)t[s]&&(n+=" "+s);t=n}o.className=t}else if(e==="style"&&typeof t=="object"){for(let n in t){let s=t[n];n.includes("-",1)?o.style.setProperty(n,s):o.style[n]=s}if(i&&i[e]&&typeof i[e]=="object"&&!Array.isArray(i[e]))for(let n in i[e])t[n]||(n.includes("-",1)?o.style.removeProperty(n):o.style[n]=null)}else t===!0?t="true":f!=="string"&&(t=t.toString()),o.setAttribute(e,t)}}if(i)for(let e in i)(!r||!r[e])&&(typeof i[e]=="function"?o.removeEventListener(e,i[e]):e==="class"?o.className="":e==="style"?o.style.cssText="":e==="value"?o.value="":o.removeAttribute(e))},U=(o,r,i)=>{let e=0,t=0;if(r)for(;e<r.length;e++){let f=r[e],n=!1;if(i)for(let s=e-t;s<i.length;s++){let a=i[s];if(a.t&&f.t===a.t||!a.t&&!f.t){n=!0,e!==s+t&&(o.insertBefore(o.childNodes[s+t],o.childNodes[e]),i.splice(e-t,0,i.splice(s,1)[0])),f.t?(_(o.childNodes[e],f.a,a.a),U(o.childNodes[e],f.c,a.c)):a!==f&&(o.childNodes[e].textContent=f);break}}if(!n){let s;f.t?(s=document.createElement(f.t),_(s,f.a),U(s,f.c)):s=document.createTextNode(f),o.insertBefore(s,o.childNodes[e]),t++}}if(i){let f=i.length+t;if(f>=e)for(let n=f-1;n>=e;n--)o.childNodes[n].remove()}},w=(o,r)=>{let i=typeof o=="string"?document.querySelector(o)||document.body.appendChild(document.createElement("div")):o;if(typeof r=="string")try{r=JSON.parse(r)}catch(e){r=null}return r||(r=E(i)),e=>{e=l(e),U(i,e,r),r=e}};export{B as conditional,O as factory,Q as fctory,C as identifier,D as match,I as nde,y as node,w as prepare};
