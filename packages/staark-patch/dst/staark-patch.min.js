var U=(H)=>q(H)||[],q=(H)=>H?Array.isArray(H)?H:[H]:void 0;var j=(H,K,M)=>{let J=H?K:M;if(typeof J==="function")J=J();return U(J)};var L="n";var z=(H,K,M)=>{if(K&&(typeof K!=="object"||K._===L||Array.isArray(K)))M=K,K=void 0;return{_:L,a:K,c:q(M),t:H}};var I=new Proxy({},{get:(H,K)=>{if(H[K])return H[K];let M=K[0].toLowerCase()+K.substring(1).replace(/([A-Z])/g,(J)=>"-"+J.toLowerCase());return H[K]=(J,W)=>z(M,J,W)}});var G={attribute:0,class:1,id:2,type:3},V=(H)=>{let K=H.length,M=0,J="",W={},Y="",P=!0,Z=G.type,$=()=>{if(Y){switch(Z){case G.attribute:W[Y]=P===!0?!0:P,P=!0;break;case G.class:if(!W.class){W.class=Y;break}W.class+=" "+Y;break;case G.id:W.id=Y;break;case G.type:J=Y;break}Y=""}},X,D,F=()=>{D=0;while(M<K){if(X=H[M],M++,X==="="){P="",X=H[M];let _=X==='"',Q=X==="'";if(_||Q)P+=X,M++;while(M<K){if(X=H[M],_&&X==='"'||Q&&X==="'"){P+=X,M++;break}else if(!_&&!Q&&X==="]")break;P+=X,M++}if(P[0]==='"'&&P[P.length-1]==='"'||P[0]==="'"&&P[P.length-1]==="'")P=P.substring(1,P.length-1);while(M<K)if(X=H[M],M++,X==="]")break;break}else if(X==="["){D++;continue}else if(X==="]"){if(D--,D<0)break;continue}Y+=X}$()};while(M<K){if(X=H[M],M++,X==="#"){$(),Z=G.id;continue}else if(X==="."){$(),Z=G.class;continue}else if(X==="["){$(),Z=G.attribute,F();continue}Y+=X}return[J,W]};var B=new Proxy({},{get:(H,K)=>{if(H[K])return H[K];let M=K[0].toLowerCase()+K.substring(1).replace(/([A-Z])/g,(J)=>"-"+J.toLowerCase());return H[K]=(J,W)=>{let Y;if(J){let[P,Z]=V(J);Y=Z}return z(M,Y,W)}}});var x=0,O=(H)=>H+"-"+x++;var f=(H,K,M)=>{let J;if(K&&H in K&&K[H])J=K[H];else J=M;if(typeof J==="function")J=J();return U(J)};var v=(H,K)=>{let[M,J]=V(H);return{_:L,a:J,c:q(K),t:M}};var R=(H)=>{let K=[];for(let M of H.childNodes)if(M instanceof Text)K.push(M.textContent??"");else{let J={};for(let W of M.attributes)J[W.name]=W.value;K.push(z(M.nodeName,J,R(M)))}return K};var E=(H,K,M)=>{if(K)for(let J in K){let W=K[J];if(W){let Y=typeof W;if(Y==="function"){let P=M?.[J];if(P!==W){if(P)H.removeEventListener(J,P);H.addEventListener(J,W)}}else if(J==="class"){if(typeof W==="object")if(Array.isArray(W))W=W.join(" ");else{let P="";for(let Z in W)if(W[Z])P+=" "+Z;W=P}H.className=W}else if(J==="style"&&typeof W==="object"){for(let P in W){let Z=W[P];if(P.includes("-",1))H.style.setProperty(P,Z);else H.style[P]=Z}if(M&&M[J]&&typeof M[J]==="object"&&!Array.isArray(M[J])){for(let P in M[J])if(!W[P])if(P.includes("-",1))H.style.removeProperty(P);else H.style[P]=null}}else{if(W===!0)W="true";else if(Y!=="string")W=W.toString();if(H.setAttribute(J,W),J==="value")H.value=W}}}if(M){for(let J in M)if(!K||!K[J])if(typeof M[J]==="function")H.removeEventListener(J,M[J]);else if(J==="class")H.className="";else if(J==="style")H.style.cssText="";else if(J==="value")H.value="";else H.removeAttribute(J)}},S=(H,K,M,J)=>{let W=0,Y=0;if(K)for(;W<K.length;W++){let P=K[W],Z=!1;if(M)for(let $=W-Y;$<M.length;$++){let X=M[$];if(X.t&&P.t===X.t||!X.t&&!P.t){if(Z=!0,W!==$+Y)H.insertBefore(H.childNodes[$+Y],H.childNodes[W]),M.splice(W-Y,0,M.splice($,1)[0]);if(P.t)E(H.childNodes[W],P.a,X.a),S(H.childNodes[W],P.c,X.c,J||P.t==="SVG"||P.t==="svg");else if(X!==P)H.childNodes[W].textContent=P;break}}if(!Z){let $;if(P.t){let X=J||P.t==="SVG"||P.t==="svg";if(X)$=document.createElementNS("http://www.w3.org/2000/svg",P.t);else $=document.createElement(P.t);E($,P.a),S($,P.c,void 0,X)}else $=document.createTextNode(P);H.insertBefore($,H.childNodes[W]),Y++}}if(M){let P=M.length+Y;if(P>=W)for(let Z=P-1;Z>=W;Z--)H.childNodes[Z].remove()}},g=(H,K)=>{let M=typeof H==="string"?document.querySelector(H)||document.body.appendChild(document.createElement("div")):H;if(typeof K==="string")try{K=JSON.parse(K)}catch(J){K=null}if(!K)K=R(M);return(J)=>{J=q(J),S(M,J,K),K=J}};export{g as prepare,z as node,v as nde,f as match,O as identifier,B as fctory,I as factory,j as conditional};
