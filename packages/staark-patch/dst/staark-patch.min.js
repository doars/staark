var y=function(o){return Array.isArray(o)?o:[o]};var P=(o,e,r)=>{let n=o?e:r;return typeof n=="function"&&(n=n()),n?y(n):[]};var p=Symbol();var m=(o,e,r)=>((typeof e!="object"||e._===p||Array.isArray(e))&&(r=e,e=void 0),{_:p,a:e,c:r?Array.isArray(r)?r:[r]:[],t:o.toUpperCase()});var w=new Proxy({},{get:(o,e)=>{if(o[e])return o[e];let r=(e[0]+e.substring(1).replace(/([A-Z])/g,n=>"-"+n)).toUpperCase();return o[e]=(n,t)=>m(r,n,t)}});var T="]",k="[",F=".",R="=",_="#",x="'",h='"';var E=o=>{let e=o.length,r=0,n="",t={},c="",s=!0,f=3,a=()=>{if(c){switch(f){case 0:t[c]=s===!0?!0:s,s=!0;break;case 1:if(!t.class){t.class=c;break}t.class+=" "+c;break;case 2:t.id=c;break;case 3:n=c;break}c=""}},i,l,d=()=>{for(l=0;r<e;){if(i=o[r],r++,i===R){s="",i=o[r];let A=i===h,N=i===x;for((A||N)&&(s+=i,r++);r<e;){if(i=o[r],A&&i===h||N&&i===x){s+=i,r++;break}else if(!A&&!N&&i===T)break;s+=i,r++}for((s[0]===h&&s[s.length-1]===h||s[0]===x&&s[s.length-1]===x)&&(s=s.substring(1,s.length-1));r<e&&(i=o[r],r++,i!==T););break}else if(i===k){l++;continue}else if(i===T){if(l--,l<0)break;continue}c+=i}a()};for(;r<e;){if(i=o[r],r++,i===_){a(),f=2;continue}else if(i===F){a(),f=1;continue}else if(i===k){a(),f=0,d();continue}c+=i}return[n,t]};var X=new Proxy({},{get:(o,e)=>{if(o[e])return o[e];let r=(e[0]+e.substring(1).replace(/([A-Z])/g,n=>"-"+n)).toUpperCase();return o[e]=(n,t)=>{let c;if(n){let[s,f]=E(n);c=f}return m(r,c,t)}}});var et=(o,e)=>{if(e&&o in e&&e[o]){let r=e[o];return typeof r=="function"&&(r=r(),!r)?[]:y(r)}return[]};var st=(o,e)=>{let[r,n]=E(o);return{_:p,a:n,c:e?Array.isArray(e)?e:[e]:[],t:r.toUpperCase()}};var ct=o=>({_:p,c:Array.isArray(o)?o.join(""):""+o});var v=o=>{let e=[];for(let r=0;r<o.childNodes.length;r++){let n=o.childNodes[r];if(n instanceof Text)e.push(n.textContent??"");else{let t={};for(let c=0;c<n.attributes.length;c++){let s=n.attributes[c];t[s.name]=s.value}e.push(m(n.nodeName,t,v(n)))}}return e};var j=/[A-Z]+(?![a-z])|[A-Z]/g,H=(o,e)=>(e?"-":"")+o,L=(o,e,r)=>{if(e)for(let n in e){let t=e[n];if(t){let c=typeof t;if(c==="function"){o.addEventListener(n,t);continue}else{if(n==="class"){if(typeof t=="object")if(Array.isArray(t))t=t.join(" ");else{let s="";for(let f in t)t[f]&&(s+=" "+f);t=s}}else if(n==="style"){if(typeof t=="object")if(Array.isArray(t))t=t.join(";");else{let s="";for(let f in t){let a=t[f];f=f.replace(j,H).toLowerCase(),Array.isArray(a)?s+=";"+f+":"+a.join(" "):a&&(s+=";"+f+":"+a)}t=s}}else{if(c==="boolean"){if(!t){o.removeAttribute(n);continue}t="true"}else c!=="string"&&(t=t.toString());n==="value"&&o.value!==t?o.value=t:n==="checked"&&(o.checked=e[n])}o.setAttribute(n,t)}}}if(r)for(let n in r)typeof r[n]=="function"?o.removeEventListener(n,r[n]):(!e||!(n in e)||!e[n])&&(n==="value"?o.value="":n==="checked"&&(o.checked=!1),o.removeAttribute(n))},At=(o,e)=>{let r=(t,c,s,f)=>{let a=0,i=0;if(c)for(;a<c.length;a++){let d=c[a],A=!1;if(s)for(let N=a-i;N<s.length;N++){let u=s[N];if(u.t&&d.t===u.t||!u.t&&!d.t){A=!0,a!==N+i&&(t.insertBefore(t.childNodes[N+i],t.childNodes[a]),s.splice(a-i,0,...s.splice(N,1))),d.t?(L(t.childNodes[a],d.a,u.a),r(t.childNodes[a],d.c,u.c,u)):t.childNodes[a].textContent=typeof d=="string"?d:d.c;break}}if(!A){let N;if(d.t){N=document.createElement(d.t),d.a&&L(N,d.a),d.c&&r(N,d.c);let u=(b,g,C)=>{C&&(!g||g.t)?b.insertAdjacentElement(C,N):b.parentNode.insertBefore(N,b)};a===0?u(t,f,"afterbegin"):(s?.length??0)+i>a?u(t.childNodes[a]):u(t,f,"beforeend")}else{N=typeof d=="string"?d:d.c;let u=(b,g,C)=>{C&&(!g||g.t)?b.insertAdjacentText(C,N):b.parentNode.insertBefore(document.createTextNode(N),b)};a===0?u(t,f,"afterbegin"):(s?.length??0)+i>a?u(t.childNodes[a]):u(t,f,"beforeend")}i++}}let l=(s?.length??0)+i;if(l>=a)for(let d=l-1;d>=a;d--)t.childNodes[d].remove()},n=typeof o=="string"?document.querySelector(o)||document.body.appendChild(document.createElement("div")):o;if(typeof e=="string")try{e=JSON.parse(e)}catch{e=void 0}return e??=v(n),t=>{t=y(t),r(n,t,e),e=t}};export{P as conditional,w as factory,X as fctory,et as match,st as nde,m as node,At as prepare,ct as text};
//# sourceMappingURL=staark-patch.min.js.map
