var p=t=>{var n;return(n=f(t))!=null?n:[]},f=t=>t?Array.isArray(t)?t:[t]:void 0;var H=(t,n,o)=>{let e=t?n:o;return typeof e=="function"&&(e=e()),p(e)};var u="n";var N=(t,n,o)=>((typeof n!="object"||n._===u||Array.isArray(n))&&(o=n,n=void 0),{_:u,a:n,c:f(o),t:t.toUpperCase()});var z=new Proxy({},{get:(t,n)=>{if(t[n])return t[n];let o=(n[0]+n.substring(1).replace(/([A-Z])/g,e=>"-"+e)).toUpperCase();return t[n]=(e,s)=>N(o,e,s)}});var x="]",v="[",L=".",k="=",F="#",y="'",m='"';var C=t=>{let n=t.length,o=0,e="",s={},i="",r=!0,d=3,c=()=>{if(i){switch(d){case 0:s[i]=r===!0?!0:r,r=!0;break;case 1:if(!s.class){s.class=i;break}s.class+=" "+i;break;case 2:s.id=i;break;case 3:e=i;break}i=""}},a,l,E=()=>{for(l=0;o<n;){if(a=t[o],o++,a===k){r="",a=t[o];let b=a===m,g=a===y;for((b||g)&&(r+=a,o++);o<n;){if(a=t[o],b&&a===m||g&&a===y){r+=a,o++;break}else if(!b&&!g&&a===x)break;r+=a,o++}for((r[0]===m&&r[r.length-1]===m||r[0]===y&&r[r.length-1]===y)&&(r=r.substring(1,r.length-1));o<n&&(a=t[o],o++,a!==x););break}else if(a===v){l++;continue}else if(a===x){if(l--,l<0)break;continue}i+=a}c()};for(;o<n;){if(a=t[o],o++,a===F){c(),d=2;continue}else if(a===L){c(),d=1;continue}else if(a===v){c(),d=0,E();continue}i+=a}return[e,s]};var W=new Proxy({},{get:(t,n)=>{if(t[n])return t[n];let o=(n[0]+n.substring(1).replace(/([A-Z])/g,e=>"-"+e)).toUpperCase();return t[n]=(e,s)=>{let i;if(e){let[r,d]=C(e);i=d}return N(o,i,s)}}});var R=0,Y=t=>t+"-"+R++;var te=(t,n,o)=>{let e;return n&&t in n&&n[t]?e=n[t]:e=o,typeof e=="function"&&(e=e()),p(e)};var de=(t,n)=>{let[o,e]=C(t);return{_:u,a:e,c:f(n),t:o.toUpperCase()}};var A=t=>{var o;let n=[];for(let e of t.childNodes)if(e instanceof Text)n.push((o=e.textContent)!=null?o:"");else{let s=e,i={};for(let r of s.attributes)i[r.name]=r.value;n.push(N(e.nodeName,i,A(e)))}return n};var T=(t,n,o)=>{if(n)for(let e in n){let s=n[e];if(s){let i=typeof s;if(i==="function"){let r=o==null?void 0:o[e];r!==s&&(r&&t.removeEventListener(e,r),t.addEventListener(e,s))}else if(e==="class"){if(typeof s=="object")if(Array.isArray(s))s=s.join(" ");else{let r="";for(let d in s)s[d]&&(r+=" "+d);s=r}t.className=s}else if(e==="style"&&typeof s=="object"){for(let r in s){let d=s[r];r.includes("-",1)?t.style.setProperty(r,d):t.style[r]=d}if(o&&o[e]&&typeof o[e]=="object"&&!Array.isArray(o[e]))for(let r in o[e])r in s||(r.includes("-")?t.style.removeProperty(r):delete t.style[r])}else s===!0?s="true":i!=="string"&&(s=s.toString()),t.setAttribute(e,s)}}if(o)for(let e in o)(!n||!n[e])&&(typeof o[e]=="function"?t.removeEventListener(e,o[e]):e==="class"?t.className="":e==="style"?t.style.cssText="":e==="value"?t.value="":t.removeAttribute(e))},h=(t,n,o)=>{let e=0,s=0;if(n)for(;e<n.length;e++){let i=n[e],r=!1;if(o)for(let d=e-s;d<o.length;d++){let c=o[d];if(c.t&&i.t===c.t||!c.t&&!i.t){r=!0,e!==d+s&&(t.insertBefore(t.childNodes[d+s],t.childNodes[e]),o.splice(e-s,0,o.splice(d,1)[0])),i.t?(T(t.childNodes[e],i.a,c.a),h(t.childNodes[e],i.c,c.c)):c!==i&&(t.childNodes[e].textContent=i);break}}if(!r){let d;i.t?(d=document.createElement(i.t),T(d,i.a),h(d,i.c)):d=document.createTextNode(i),t.insertBefore(d,t.childNodes[e]),s++}}if(o){let i=o.length+s;if(i>=e)for(let r=i-1;r>=e;r--)t.childNodes[r].remove()}},ye=(t,n)=>{let o=typeof t=="string"?document.querySelector(t)||document.body.appendChild(document.createElement("div")):t;if(typeof n=="string")try{n=JSON.parse(n)}catch(e){n=null}return n||(n=A(o)),e=>{e=f(e),h(o,e,n),n=e}};export{H as conditional,z as factory,W as fctory,Y as identifier,te as match,de as nde,N as node,ye as prepare};
//# sourceMappingURL=staark-patch.min.js.map
