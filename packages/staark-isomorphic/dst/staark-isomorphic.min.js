var y=e=>l(e)||[],l=e=>e?Array.isArray(e)?e:[e]:void 0;var w=(e,r,o)=>{let t=e?r:o;return typeof t=="function"&&(t=t()),y(t)};var E=(e,r,o)=>(r&&(typeof r!="object"||r._==="n"||Array.isArray(r))&&(o=r,r=void 0),{_:"n",a:r,c:l(o),t:e.toUpperCase()});var I=new Proxy({},{get:(e,r)=>{if(e[r])return e[r];let o=(r[0]+r.substring(1).replace(/([A-Z])/g,t=>"-"+t)).toUpperCase();return e[r]=(t,f)=>E(o,t,f)}});var p={attribute:0,class:1,id:2,type:3},A=e=>{let r=e.length,o=0,t="",f={},i="",n=!0,c=p.type,a=()=>{if(i){switch(c){case p.attribute:f[i]=n===!0?!0:n,n=!0;break;case p.class:if(!f.class){f.class=i;break}f.class+=" "+i;break;case p.id:f.id=i;break;case p.type:t=i;break}i=""}},s,m,_=()=>{for(m=0;o<r;){if(s=e[o],o++,s==="="){n="",s=e[o];let T=s==='"',b=s==="'";for((T||b)&&(n+=s,o++);o<r;){if(s=e[o],T&&s==='"'||b&&s==="'"){n+=s,o++;break}else if(!T&&!b&&s==="]")break;n+=s,o++}for((n[0]==='"'&&n[n.length-1]==='"'||n[0]==="'"&&n[n.length-1]==="'")&&(n=n.substring(1,n.length-1));o<r&&(s=e[o],o++,s!=="]"););break}else if(s==="["){m++;continue}else if(s==="]"){if(m--,m<0)break;continue}i+=s}a()};for(;o<r;){if(s=e[o],o++,s==="#"){a(),c=p.id;continue}else if(s==="."){a(),c=p.class;continue}else if(s==="["){a(),c=p.attribute,_();continue}i+=s}return[t,f]};var Z=new Proxy({},{get:(e,r)=>{if(e[r])return e[r];let o=(r[0]+r.substring(1).replace(/([A-Z])/g,t=>"-"+t)).toUpperCase();return e[r]=(t,f)=>{let i;if(t){let[n,c]=A(t);i=c}return E(o,i,f)}}});var U=0,F=e=>e+"-"+U++;var V=(e,r,o)=>{let t;return r&&e in r&&r[e]?t=r[e]:t=o,typeof t=="function"&&(t=t()),y(t)};var q=(e,r)=>({_:"n",r:e,m:r});var te=(e,r)=>{let[o,t]=A(e);return{_:"n",a:t,c:l(r),t:o.toUpperCase()}};var L=["base","br","hr","img","input","link","meta","source","wbr"],C=/[A-Z]+(?![a-z])|[A-Z]/g,g=(e,r)=>(r?"-":"")+e,x=e=>{let r="";if(e)for(let o in e){let t=e[o];if(t!=null){let f=typeof t;if(f==="boolean"?t=t?"true":"false":f!=="string"&&(t=t.toString()),o==="class"){if(typeof t=="object")if(Array.isArray(t))t=t.join(" ");else{let i="";for(let n in t)t[n]&&(i+=" "+n);t=i}}else if(o==="style"&&typeof t=="object")if(Array.isArray(t))t=t.join(";");else{let i="";for(let n in t){let c=t[n];n=n.replace(C,g).toLowerCase(),Array.isArray(c)?i+=";"+n+":"+c.join(" "):t&&(i+=";"+n+":"+t)}t=i}r+=" "+o+'="'+t+'"'}}return r},O=e=>{let r="";if(e)for(let o of e)o&&(o.t?(r+="<"+o.t.toLocaleLowerCase()+x(o.a),L.includes(o.t)?r+="/>":(r+=">",o.c&&(r+=O(o.c)),r+="</"+o.t.toLocaleLowerCase()+">")):r+=" "+o+" ");return r},k=e=>(e=l(e),[O(e),e]),h=(e,r)=>{r||(r={});let o=f=>{let i="";if(f)for(let n of f)n&&(n.m?i+=o(l(n.r(r,n.m))):n.t?(i+="<"+n.t.toLocaleLowerCase()+x(n.a),L.includes(n.t)?i+="/>":(i+=">",n.c&&(i+=o(n.c)),i+="</"+n.t.toLocaleLowerCase()+">")):i+=" "+n+" ");return i},t=l(e(r));return[o(t),t]},d=e=>typeof e=="number"||typeof e=="boolean"?String(e):typeof e=="string"?'"'+e.replace(/"/g,'\\"')+'"':Array.isArray(e)?"["+e.map(r=>d(r)).join(",")+"]":typeof e=="object"?"{"+Object.keys(e).filter(t=>!t.startsWith("_")).map(t=>'"'+t+'":'+d(e[t])+'"').join(",")+"}":"null",ie=e=>{let[r,o]=k(e);return[r,d(o)]},se=(e,r)=>{r||(r={});let[o,t]=h(e,r);return[o,d(t),JSON.stringify(r)]};export{w as conditional,I as factory,Z as fctory,F as identifier,V as match,q as memo,te as nde,E as node,h as stringify,se as stringifyFull,k as stringifyPatch,ie as stringifyPatchFull};
