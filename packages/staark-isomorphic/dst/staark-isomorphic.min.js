var y=e=>l(e)||[],l=e=>e?Array.isArray(e)?e:[e]:void 0;var Z=(e,r,o)=>{let t=e?r:o;return typeof t=="function"&&(t=t()),y(t)};var u="n";var d=(e,r,o)=>(r&&(typeof r!="object"||r._===u||Array.isArray(r))&&(o=r,r=void 0),{_:u,a:r,c:l(o),t:e.toUpperCase()});var R=new Proxy({},{get:(e,r)=>{if(e[r])return e[r];let o=(r[0]+r.substring(1).replace(/([A-Z])/g,t=>"-"+t)).toUpperCase();return e[r]=(t,f)=>d(o,t,f)}});var h="]",L="[",j=".",U="=",O="#",b="'",x='"',p={attribute:0,class:1,id:2,type:3},A=e=>{let r=e.length,o=0,t="",f={},i="",n=!0,c=p.type,a=()=>{if(i){switch(c){case p.attribute:f[i]=n===!0?!0:n,n=!0;break;case p.class:if(!f.class){f.class=i;break}f.class+=" "+i;break;case p.id:f.id=i;break;case p.type:t=i;break}i=""}},s,m,_=()=>{for(m=0;o<r;){if(s=e[o],o++,s===U){n="",s=e[o];let k=s===x,T=s===b;for((k||T)&&(n+=s,o++);o<r;){if(s=e[o],k&&s===x||T&&s===b){n+=s,o++;break}else if(!k&&!T&&s===h)break;n+=s,o++}for((n[0]===x&&n[n.length-1]===x||n[0]===b&&n[n.length-1]===b)&&(n=n.substring(1,n.length-1));o<r&&(s=e[o],o++,s!==h););break}else if(s===L){m++;continue}else if(s===h){if(m--,m<0)break;continue}i+=s}a()};for(;o<r;){if(s=e[o],o++,s===O){a(),c=p.id;continue}else if(s===j){a(),c=p.class;continue}else if(s===L){a(),c=p.attribute,_();continue}i+=s}return[t,f]};var Y=new Proxy({},{get:(e,r)=>{if(e[r])return e[r];let o=(r[0]+r.substring(1).replace(/([A-Z])/g,t=>"-"+t)).toUpperCase();return e[r]=(t,f)=>{let i;if(t){let[n,c]=A(t);i=c}return d(o,i,f)}}});var P=0,X=e=>e+"-"+P++;var re=(e,r,o)=>{let t;return r&&e in r&&r[e]?t=r[e]:t=o,typeof t=="function"&&(t=t()),y(t)};var ne=(e,r)=>({_:u,r:e,m:r});var le=(e,r)=>{let[o,t]=A(e);return{_:u,a:t,c:l(r),t:o.toUpperCase()}};var C=["base","br","hr","img","input","link","meta","source","wbr"],N=/[A-Z]+(?![a-z])|[A-Z]/g,B=(e,r)=>(r?"-":"")+e,E=e=>{let r="";if(e)for(let o in e){let t=e[o];if(t!=null){let f=typeof t;if(f==="boolean"?t=t?"true":"false":f!=="string"&&(t=t.toString()),o==="class"){if(typeof t=="object")if(Array.isArray(t))t=t.join(" ");else{let i="";for(let n in t)t[n]&&(i+=" "+n);t=i}}else if(o==="style"&&typeof t=="object")if(Array.isArray(t))t=t.join(";");else{let i="";for(let n in t){let c=t[n];n=n.replace(N,B).toLowerCase(),Array.isArray(c)?i+=";"+n+":"+c.join(" "):t&&(i+=";"+n+":"+t)}t=i}r+=" "+o+'="'+t+'"'}}return r},w=e=>{let r="";if(e)for(let o of e)o&&(o.t?(r+="<"+o.t.toLocaleLowerCase()+E(o.a),C.includes(o.t)?r+="/>":(r+=">",o.c&&(r+=w(o.c)),r+="</"+o.t.toLocaleLowerCase()+">")):r+=" "+o+" ");return r},H=e=>(e=l(e),[w(e),e]),Q=(e,r)=>{r||(r={});let o=f=>{let i="";if(f)for(let n of f)n&&(n.m?i+=o(l(n.r(r,n.m))):n.t?(i+="<"+n.t.toLocaleLowerCase()+E(n.a),C.includes(n.t)?i+="/>":(i+=">",n.c&&(i+=o(n.c)),i+="</"+n.t.toLocaleLowerCase()+">")):i+=" "+n+" ");return i},t=l(e(r));return[o(t),t]},g=e=>typeof e=="number"||typeof e=="boolean"?String(e):typeof e=="string"?'"'+e.replace(/"/g,'\\"')+'"':Array.isArray(e)?"["+e.map(r=>g(r)).join(",")+"]":typeof e=="object"?"{"+Object.keys(e).filter(t=>!t.startsWith("_")).map(t=>'"'+t+'":'+g(e[t])+'"').join(",")+"}":"null",ae=e=>{let[r,o]=H(e);return[r,g(o)]},me=(e,r)=>{r||(r={});let[o,t]=Q(e,r);return[o,g(t),JSON.stringify(r)]};export{Z as conditional,R as factory,Y as fctory,X as identifier,re as match,ne as memo,le as nde,d as node,Q as stringify,me as stringifyFull,H as stringifyPatch,ae as stringifyPatchFull};
