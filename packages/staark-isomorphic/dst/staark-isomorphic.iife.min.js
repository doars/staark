"use strict";(()=>{var F=function(t,e){let o=window;for(let r=0;r<t.length-1;r++)(typeof o[t[r]]!="object"||!Array.isArray(o[t[r]]))&&(o[t[r]]={}),o=o[t[r]];o[t[t.length-1]]=e};var N=t=>{var e;return(e=a(t))!=null?e:[]},a=t=>t?Array.isArray(t)?t:[t]:void 0;var R=(t,e,o)=>{let r=t?e:o;return typeof r=="function"&&(r=r()),N(r)};var f="n";var u=(t,e,o)=>((typeof e!="object"||e._===f||Array.isArray(e))&&(o=e,e=void 0),{_:f,a:e,c:a(o),t:t.toUpperCase()});var w=new Proxy({},{get:(t,e)=>{if(t[e])return t[e];let o=(e[0]+e.substring(1).replace(/([A-Z])/g,r=>"-"+r)).toUpperCase();return t[e]=(r,c)=>u(o,r,c)}});var x="]",L="[",H=".",Q="=",z="#",y="'",m='"';var A=t=>{let e=t.length,o=0,r="",c={},s="",n=!0,d=3,l=()=>{if(s){switch(d){case 0:c[s]=n===!0?!0:n,n=!0;break;case 1:if(!c.class){c.class=s;break}c.class+=" "+s;break;case 2:c.id=s;break;case 3:r=s;break}s=""}},i,b,B=()=>{for(b=0;o<e;){if(i=t[o],o++,i===Q){n="",i=t[o];let g=i===m,C=i===y;for((g||C)&&(n+=i,o++);o<e;){if(i=t[o],g&&i===m||C&&i===y){n+=i,o++;break}else if(!g&&!C&&i===x)break;n+=i,o++}for((n[0]===m&&n[n.length-1]===m||n[0]===y&&n[n.length-1]===y)&&(n=n.substring(1,n.length-1));o<e&&(i=t[o],o++,i!==x););break}else if(i===L){b++;continue}else if(i===x){if(b--,b<0)break;continue}s+=i}l()};for(;o<e;){if(i=t[o],o++,i===z){l(),d=2;continue}else if(i===H){l(),d=1;continue}else if(i===L){l(),d=0,B();continue}s+=i}return[r,c]};var h=new Proxy({},{get:(t,e)=>{if(t[e])return t[e];let o=(e[0]+e.substring(1).replace(/([A-Z])/g,r=>"-"+r)).toUpperCase();return t[e]=(r,c)=>{let s;if(r){let[n,d]=A(r);s=d}return u(o,s,c)}}});var V=0,_=t=>t+"-"+V++;var v=(t,e,o)=>{let r;return e&&t in e&&e[t]?r=e[t]:r=o,typeof r=="function"&&(r=r()),N(r)};var E=(t,e)=>({_:f,r:t,m:e});var j=(t,e)=>{let[o,r]=A(t);return{_:f,a:r,c:a(e),t:o.toUpperCase()}};var U=["base","br","hr","img","input","link","meta","source","wbr"],Z=/[A-Z]+(?![a-z])|[A-Z]/g,D=(t,e)=>(e?"-":"")+t,M=t=>{let e="";if(t)for(let o in t){let r=t[o];if(r!=null){let c=typeof r;if(c==="boolean"?r=r?"true":"false":c!=="string"&&(r=r.toString()),o==="class"){if(typeof r=="object")if(Array.isArray(r))r=r.join(" ");else{let s="";for(let n in r)r[n]&&(s+=" "+n);r=s}}else if(o==="style"&&typeof r=="object")if(Array.isArray(r))r=r.join(";");else{let s="";for(let n in r){let d=r[n];n=n.replace(Z,D).toLowerCase(),Array.isArray(d)?s+=";"+n+":"+d.join(" "):r&&(s+=";"+n+":"+r)}r=s}e+=" "+o+'="'+r+'"'}}return e},O=t=>{let e="";if(t)for(let o of t)o&&(o.t?(e+="<"+o.t.toLocaleLowerCase()+M(o.a),U.includes(o.t)?e+="/>":(e+=">",o.c&&(e+=O(o.c)),e+="</"+o.t.toLocaleLowerCase()+">")):e+=" "+o+" ");return e},T=t=>(t=a(t),[O(t),t]),k=(t,e)=>{e||(e={});let o=c=>{let s="";if(c)for(let n of c)n&&(n.m?s+=o(a(n.r(e,n.m))):n.t?(s+="<"+n.t.toLocaleLowerCase()+M(n.a),U.includes(n.t)?s+="/>":(s+=">",n.c&&(s+=o(n.c)),s+="</"+n.t.toLocaleLowerCase()+">")):s+=" "+n+" ");return s},r=a(t(e));return[o(r),r]},p=t=>typeof t=="number"||typeof t=="boolean"?String(t):typeof t=="string"?'"'+t.replace(/"/g,'\\"')+'"':Array.isArray(t)?"["+t.map(e=>p(e)).join(",")+"]":typeof t=="object"?"{"+Object.keys(t).filter(r=>!r.startsWith("_")).map(r=>'"'+r+'":'+p(t[r])+'"').join(",")+"}":"null",P=t=>{let[e,o]=T(t);return[e,p(o)]},S=(t,e)=>{e||(e={});let[o,r]=k(t,e);return[o,p(r),JSON.stringify(e)]};F(["staark"],{conditional:R,factory:w,fctory:h,identifier:_,match:v,memo:E,nde:j,node:u,stringify:k,stringifyFull:S,stringifyPatch:T,stringifyPatchFull:P});})();
//# sourceMappingURL=staark-isomorphic.iife.min.js.map
