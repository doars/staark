"use strict";(()=>{var k=function(t,r){let e=window;for(let o=0;o<t.length-1;o++)(typeof e[t[o]]!="object"||!Array.isArray(e[t[o]]))&&(e[t[o]]={}),e=e[t[o]];e[t[t.length-1]]=r};var f=function(t){return Array.isArray(t)?t:[t]};var F=(t,r,e)=>{let o=t?r:e;return typeof o=="function"&&(o=o()),o?f(o):[]};var d=Symbol();var b=(t,r,e)=>((typeof r!="object"||r._===d||Array.isArray(r))&&(e=r,r=void 0),{_:d,a:r,c:e?Array.isArray(e)?e:[e]:[],t:t.toUpperCase()});var R=new Proxy({},{get:(t,r)=>{if(t[r])return t[r];let e=(r[0]+r.substring(1).replace(/([A-Z])/g,o=>"-"+o)).toUpperCase();return t[r]=(o,c)=>b(e,o,c)}});var C="]",h="[",B=".",H="=",Q="#",y="'",A='"';var l=t=>{let r=t.length,e=0,o="",c={},s="",n=!0,a=3,u=()=>{if(s){switch(a){case 0:c[s]=n===!0?!0:n,n=!0;break;case 1:if(!c.class){c.class=s;break}c.class+=" "+s;break;case 2:c.id=s;break;case 3:o=s;break}s=""}},i,m,O=()=>{for(m=0;e<r;){if(i=t[e],e++,i===H){n="",i=t[e];let p=i===A,g=i===y;for((p||g)&&(n+=i,e++);e<r;){if(i=t[e],p&&i===A||g&&i===y){n+=i,e++;break}else if(!p&&!g&&i===C)break;n+=i,e++}for((n[0]===A&&n[n.length-1]===A||n[0]===y&&n[n.length-1]===y)&&(n=n.substring(1,n.length-1));e<r&&(i=t[e],e++,i!==C););break}else if(i===h){m++;continue}else if(i===C){if(m--,m<0)break;continue}s+=i}u()};for(;e<r;){if(i=t[e],e++,i===Q){u(),a=2;continue}else if(i===B){u(),a=1;continue}else if(i===h){u(),a=0,O();continue}s+=i}return[o,c]};var w=new Proxy({},{get:(t,r)=>{if(t[r])return t[r];let e=(r[0]+r.substring(1).replace(/([A-Z])/g,o=>"-"+o)).toUpperCase();return t[r]=(o,c)=>{let s;if(o){let[n,a]=l(o);s=a}return b(e,s,c)}}});var L=(t,r)=>{if(r&&t in r&&r[t]){let e=r[t];return typeof e=="function"&&(e=e(),!e)?[]:f(e)}return[]};var _=(t,r)=>({_:d,r:t,m:r});var j=(t,r)=>{let[e,o]=l(t);return{_:d,a:o,c:r?Array.isArray(r)?r:[r]:[],t:e.toUpperCase()}};var E=t=>({_:d,c:Array.isArray(t)?t.join(""):""+t});var v=["base","br","hr","img","input","link","meta","source","wbr"],$=/[A-Z]+(?![a-z])|[A-Z]/g,z=(t,r)=>(r?"-":"")+t,M=t=>{let r="";if(t)for(let e in t){let o=t[e];if(o!=null){let c=typeof o;if(c==="boolean"?o=o?"true":"false":c!=="string"&&(o=o.toString()),e==="class"){if(typeof o=="object")if(Array.isArray(o))o=o.join(" ");else{let s="";for(let n in o)o[n]&&(s+=" "+n);o=s}}else if(e==="style"&&typeof o=="object")if(Array.isArray(o))o=o.join(";");else{let s="";for(let n in o){let a=o[n];n=n.replace($,z).toLowerCase(),Array.isArray(a)?s+=";"+n+":"+a.join(" "):o&&(s+=";"+n+":"+o)}o=s}r+=" "+e+'="'+o+'"'}}return r},P=t=>{let r="";if(t)for(let e of t)e&&(e.t?(r+="<"+e.t.toLocaleLowerCase()+M(e.a),v.includes(e.t)?r+="/>":(r+=">",e.c&&(r+=P(e.c)),r+="</"+e.t.toLocaleLowerCase()+">")):r+=" "+(e.c?e.c:e)+" ");return r},x=t=>(t=f(t??[]),[P(t),t]),T=(t,r)=>{r||(r={});let e=c=>{let s="";if(c)for(let n of c)n&&(n.m?s+=e(f(n.r(r,n.m))):n.t?(s+="<"+n.t.toLocaleLowerCase()+M(n.a),v.includes(n.t)?s+="/>":(s+=">",n.c&&(s+=e(n.c)),s+="</"+n.t.toLocaleLowerCase()+">")):s+=" "+(n.c?n.c:n)+" ");return s},o=f(t(r));return[e(o),o]},N=t=>typeof t=="number"||typeof t=="boolean"?String(t):typeof t=="string"?`"${t.replace(/"/g,'\\"')}"`:Array.isArray(t)?`[${t.map(r=>N(r)).join(",")}]`:typeof t=="object"?`{${Object.keys(t).filter(o=>!o.startsWith("_")).map(o=>`"${o}":${N(t[o])}`).join(",")}}`:"null",S=t=>{let[r,e]=x(t);return[r,N(e)]},U=(t,r)=>{r||(r={});let[e,o]=T(t,r);return[e,N(o),JSON.stringify(r)]};k(["staark"],{conditional:F,factory:R,fctory:w,match:L,memo:_,nde:j,node:b,stringify:T,stringifyFull:U,stringifyPatch:x,stringifyPatchFull:S,text:E});})();
//# sourceMappingURL=staark-isomorphic.iife.min.js.map
