"use strict";(()=>{var k=function(e,t){let o=window;for(let n=0;n<e.length-1;n++)(typeof o[e[n]]!="object"||!Array.isArray(o[e[n]]))&&(o[e[n]]={}),o=o[e[n]];o[e[e.length-1]]=t};var y=e=>{var t;return(t=a(e))!=null?t:[]},a=e=>e?Array.isArray(e)?e:[e]:void 0;var R=(e,t,o)=>{let n=e?t:o;return typeof n=="function"&&(n=n()),y(n)};var f="n";var u=(e,t,o)=>((typeof t!="object"||t._===f||Array.isArray(t))&&(o=t,t=void 0),{_:f,a:t,c:a(o),t:e.toUpperCase()});var w=new Proxy({},{get:(e,t)=>{if(e[t])return e[t];let o=(t[0]+t.substring(1).replace(/([A-Z])/g,n=>"-"+n)).toUpperCase();return e[t]=(n,c)=>u(o,n,c)}});var x="]",L="[",Q=".",S="=",z="#",m="'",b='"';var p=e=>{let t=e.length,o=0,n="",c={},s="",r=!0,d=3,l=()=>{if(s){switch(d){case 0:c[s]=r===!0?!0:r,r=!0;break;case 1:if(!c.class){c.class=s;break}c.class+=" "+s;break;case 2:c.id=s;break;case 3:n=s;break}s=""}},i,N,H=()=>{for(N=0;o<t;){if(i=e[o],o++,i===S){r="",i=e[o];let A=i===b,C=i===m;for((A||C)&&(r+=i,o++);o<t;){if(i=e[o],A&&i===b||C&&i===m){r+=i,o++;break}else if(!A&&!C&&i===x)break;r+=i,o++}for((r[0]===b&&r[r.length-1]===b||r[0]===m&&r[r.length-1]===m)&&(r=r.substring(1,r.length-1));o<t&&(i=e[o],o++,i!==x););break}else if(i===L){N++;continue}else if(i===x){if(N--,N<0)break;continue}s+=i}l()};for(;o<t;){if(i=e[o],o++,i===z){l(),d=2;continue}else if(i===Q){l(),d=1;continue}else if(i===L){l(),d=0,H();continue}s+=i}return[n,c]};var h=new Proxy({},{get:(e,t)=>{if(e[t])return e[t];let o=(t[0]+t.substring(1).replace(/([A-Z])/g,n=>"-"+n)).toUpperCase();return e[t]=(n,c)=>{let s;if(n){let[r,d]=p(n);s=d}return u(o,s,c)}}});var V=0,_=e=>e+"-"+V++;var v=(e,t,o)=>{let n;return t&&e in t&&t[e]?n=t[e]:n=o,typeof n=="function"&&(n=n()),y(n)};var E=(e,t)=>({_:f,r:e,m:t});var j=(e,t)=>{let[o,n]=p(e);return{_:f,a:n,c:a(t),t:o.toUpperCase()}};var M=["base","br","hr","img","input","link","meta","source","wbr"],Z=/[A-Z]+(?![a-z])|[A-Z]/g,D=(e,t)=>(t?"-":"")+e,U=e=>{let t="";if(e)for(let o in e){let n=e[o];if(n!=null){let c=typeof n;if(c==="boolean"?n=n?"true":"false":c!=="string"&&(n=n.toString()),o==="class"){if(typeof n=="object")if(Array.isArray(n))n=n.join(" ");else{let s="";for(let r in n)n[r]&&(s+=" "+r);n=s}}else if(o==="style"&&typeof n=="object")if(Array.isArray(n))n=n.join(";");else{let s="";for(let r in n){let d=n[r];r=r.replace(Z,D).toLowerCase(),Array.isArray(d)?s+=";"+r+":"+d.join(" "):n&&(s+=";"+r+":"+n)}n=s}t+=" "+o+'="'+n+'"'}}return t},O=e=>{let t="";if(e)for(let o of e)o&&(o.t?(t+="<"+o.t.toLocaleLowerCase()+U(o.a),M.includes(o.t)?t+="/>":(t+=">",o.c&&(t+=O(o.c)),t+="</"+o.t.toLocaleLowerCase()+">")):t+=" "+o+" ");return t},T=e=>(e=a(e),[O(e),e]),F=(e,t)=>{t||(t={});let o=c=>{let s="";if(c)for(let r of c)r&&(r.m?s+=o(a(r.r(t,r.m))):r.t?(s+="<"+r.t.toLocaleLowerCase()+U(r.a),M.includes(r.t)?s+="/>":(s+=">",r.c&&(s+=o(r.c)),s+="</"+r.t.toLocaleLowerCase()+">")):s+=" "+r+" ");return s},n=a(e(t));return[o(n),n]},g=e=>typeof e=="number"||typeof e=="boolean"?String(e):typeof e=="string"?'"'+e.replace(/"/g,'\\"')+'"':Array.isArray(e)?"["+e.map(t=>g(t)).join(",")+"]":typeof e=="object"?"{"+Object.keys(e).filter(n=>!n.startsWith("_")).map(n=>'"'+n+'":'+g(e[n])+'"').join(",")+"}":"null",P=e=>{let[t,o]=T(e);return[t,g(o)]},B=(e,t)=>{t||(t={});let[o,n]=F(e,t);return[o,g(n),JSON.stringify(t)]};k(["staark"],{conditional:R,factory:w,fctory:h,identifier:_,match:v,memo:E,nde:j,node:u,stringify:F,stringifyFull:B,stringifyPatch:T,stringifyPatchFull:P});})();
//# sourceMappingURL=staark-isomorphic.iife.min.js.map
