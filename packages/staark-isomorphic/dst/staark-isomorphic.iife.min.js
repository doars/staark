(()=>{var P=(J,W)=>{let X=window;for(let K=0;K<J.length-1;K++){if(typeof X[J[K]]!=="object"||!Array.isArray(X[J[K]]))X[J[K]]={};X=X[J[K]]}X[J[J.length-1]]=W};var _=(J)=>x(J)||[],x=(J)=>J?Array.isArray(J)?J:[J]:void 0;var E=(J,W,X)=>{let K=J?W:X;if(typeof K==="function")K=K();return _(K)};var I="n";var D=(J,W,X)=>{if(W&&(typeof W!=="object"||W._===I||Array.isArray(W)))X=W,W=void 0;return{_:I,a:W,c:x(X),t:J}};var j=new Proxy({},{get:(J,W)=>{if(J[W])return J[W];let X=W[0].toLowerCase()+W.substring(1).replace(/([A-Z])/g,(K)=>"-"+K.toLowerCase());return J[W]=(K,Y)=>D(X,K,Y)}});var z={attribute:0,class:1,id:2,type:3},L=(J)=>{let W=J.length,X=0,K="",Y={},$="",Z=!0,w=z.type,G=()=>{if($){switch(w){case z.attribute:Y[$]=Z===!0?!0:Z,Z=!0;break;case z.class:if(!Y.class){Y.class=$;break}Y.class+=" "+$;break;case z.id:Y.id=$;break;case z.type:K=$;break}$=""}},q,H,m=()=>{H=0;while(X<W){if(q=J[X],X++,q==="="){Z="",q=J[X];let Q=q==='"',U=q==="'";if(Q||U)Z+=q,X++;while(X<W){if(q=J[X],Q&&q==='"'||U&&q==="'"){Z+=q,X++;break}else if(!Q&&!U&&q==="]")break;Z+=q,X++}if(Z[0]==='"'&&Z[Z.length-1]==='"'||Z[0]==="'"&&Z[Z.length-1]==="'")Z=Z.substring(1,Z.length-1);while(X<W)if(q=J[X],X++,q==="]")break;break}else if(q==="["){H++;continue}else if(q==="]"){if(H--,H<0)break;continue}$+=q}G()};while(X<W){if(q=J[X],X++,q==="#"){G(),w=z.id;continue}else if(q==="."){G(),w=z.class;continue}else if(q==="["){G(),w=z.attribute,m();continue}$+=q}return[K,Y]};var B=new Proxy({},{get:(J,W)=>{if(J[W])return J[W];let X=W[0].toLowerCase()+W.substring(1).replace(/([A-Z])/g,(K)=>"-"+K.toLowerCase());return J[W]=(K,Y)=>{let $;if(K){let[Z,w]=L(K);$=w}return D(X,$,Y)}}});var T=0,F=(J)=>J+"-"+T++;var A=(J,W,X)=>{let K;if(W&&J in W&&W[J])K=W[J];else K=X;if(typeof K==="function")K=K();return _(K)};var S=(J,W)=>({_:I,r:J,m:W});var N=(J,W)=>{let[X,K]=L(J);return{_:I,a:K,c:x(W),t:X}};var O=["base","br","hr","img","input","link","meta","source","wbr"],h=/[A-Z]+(?![a-z])|[A-Z]/g,k=(J,W)=>(W?"-":"")+J,v=(J)=>{let W="";if(J)for(let X in J){let K=J[X];if(K!==null&&K!==void 0){let Y=typeof K;if(Y==="boolean")K=K?"true":"false";else if(Y!=="string")K=K.toString();if(X==="class"){if(typeof K==="object")if(Array.isArray(K))K=K.join(" ");else{let $="";for(let Z in K)if(K[Z])$+=" "+Z;K=$}}else if(X==="style"){if(typeof K==="object")if(Array.isArray(K))K=K.join(";");else{let $="";for(let Z in K){let w=K[Z];if(Z=Z.replace(h,k).toLowerCase(),Array.isArray(w))$+=";"+Z+":"+w.join(" ");else if(K)$+=";"+Z+":"+K}K=$}}W+=" "+X+'="'+K+'"'}}return W},g=(J)=>{let W="";if(J){for(let X of J)if(X)if(X.t)if(W+="<"+X.t.toLocaleLowerCase()+v(X.a),O.includes(X.t))W+="/>";else{if(W+=">",X.c)W+=g(X.c);W+="</"+X.t.toLocaleLowerCase()+">"}else W+=" "+X+" "}return W},V=(J)=>{return J=x(J),[g(J),J]},R=(J,W)=>{if(!W)W={};let X=(Y)=>{let $="";if(Y){for(let Z of Y)if(Z)if(Z.m)$+=X(x(Z.r(W,Z.m)));else if(Z.t)if($+="<"+Z.t.toLocaleLowerCase()+v(Z.a),O.includes(Z.t))$+="/>";else{if($+=">",Z.c)$+=X(Z.c);$+="</"+Z.t.toLocaleLowerCase()+">"}else $+=" "+Z+" "}return $},K=x(J(W));return[X(K),K]},M=(J)=>{if(typeof J==="number"||typeof J==="boolean")return String(J);if(typeof J==="string")return'"'+J.replace(/"/g,"\\\"")+'"';if(Array.isArray(J))return"["+J.map((W)=>M(W)).join(",")+"]";if(typeof J==="object")return"{"+Object.keys(J).filter((K)=>!K.startsWith("_")).map((K)=>'"'+K+'":'+M(J[K])+'"').join(",")+"}";return"null"},C=(J)=>{let[W,X]=V(J);return[W,M(X)]},f=(J,W)=>{if(!W)W={};let[X,K]=R(J,W);return[X,M(K),JSON.stringify(W)]};P(["staark"],{conditional:E,factory:j,fctory:B,identifier:F,match:A,memo:S,nde:N,node:D,stringify:R,stringifyFull:f,stringifyPatch:V,stringifyPatchFull:C});})();
