(()=>{var O=(e,t)=>{let o=window;for(let r=0;r<e.length-1;r++)(typeof o[e[r]]!="object"||!Array.isArray(o[e[r]]))&&(o[e[r]]={}),o=o[e[r]];o[e[e.length-1]]=t};var E=e=>l(e)||[],l=e=>e?Array.isArray(e)?e:[e]:void 0;var _=(e,t,o)=>{let r=e?t:o;return typeof r=="function"&&(r=r()),E(r)};var u=(e,t,o)=>(t&&(typeof t!="object"||t._==="n"||Array.isArray(t))&&(o=t,t=void 0),{_:"n",a:t,c:l(o),t:e.toUpperCase()});var U=new Proxy({},{get:(e,t)=>{if(e[t])return e[t];let o=(t[0]+t.substring(1).replace(/([A-Z])/g,r=>"-"+r)).toUpperCase();return e[t]=(r,f)=>u(o,r,f)}});var m={attribute:0,class:1,id:2,type:3},d=e=>{let t=e.length,o=0,r="",f={},i="",n=!0,c=m.type,a=()=>{if(i){switch(c){case m.attribute:f[i]=n===!0?!0:n,n=!0;break;case m.class:if(!f.class){f.class=i;break}f.class+=" "+i;break;case m.id:f.id=i;break;case m.type:r=i;break}i=""}},s,p,P=()=>{for(p=0;o<t;){if(s=e[o],o++,s==="="){n="",s=e[o];let T=s==='"',b=s==="'";for((T||b)&&(n+=s,o++);o<t;){if(s=e[o],T&&s==='"'||b&&s==="'"){n+=s,o++;break}else if(!T&&!b&&s==="]")break;n+=s,o++}for((n[0]==='"'&&n[n.length-1]==='"'||n[0]==="'"&&n[n.length-1]==="'")&&(n=n.substring(1,n.length-1));o<t&&(s=e[o],o++,s!=="]"););break}else if(s==="["){p++;continue}else if(s==="]"){if(p--,p<0)break;continue}i+=s}a()};for(;o<t;){if(s=e[o],o++,s==="#"){a(),c=m.id;continue}else if(s==="."){a(),c=m.class;continue}else if(s==="["){a(),c=m.attribute,P();continue}i+=s}return[r,f]};var C=new Proxy({},{get:(e,t)=>{if(e[t])return e[t];let o=(t[0]+t.substring(1).replace(/([A-Z])/g,r=>"-"+r)).toUpperCase();return e[t]=(r,f)=>{let i;if(r){let[n,c]=d(r);i=c}return u(o,i,f)}}});var D=0,k=e=>e+"-"+D++;var x=(e,t,o)=>{let r;return t&&e in t&&t[e]?r=t[e]:r=o,typeof r=="function"&&(r=r()),E(r)};var h=(e,t)=>({_:"n",r:e,m:t});var w=(e,t)=>{let[o,r]=d(e);return{_:"n",a:r,c:l(t),t:o.toUpperCase()}};var j=["base","br","hr","img","input","link","meta","source","wbr"],H=/[A-Z]+(?![a-z])|[A-Z]/g,I=(e,t)=>(t?"-":"")+e,B=e=>{let t="";if(e)for(let o in e){let r=e[o];if(r!=null){let f=typeof r;if(f==="boolean"?r=r?"true":"false":f!=="string"&&(r=r.toString()),o==="class"){if(typeof r=="object")if(Array.isArray(r))r=r.join(" ");else{let i="";for(let n in r)r[n]&&(i+=" "+n);r=i}}else if(o==="style"&&typeof r=="object")if(Array.isArray(r))r=r.join(";");else{let i="";for(let n in r){let c=r[n];n=n.replace(H,I).toLowerCase(),Array.isArray(c)?i+=";"+n+":"+c.join(" "):r&&(i+=";"+n+":"+r)}r=i}t+=" "+o+'="'+r+'"'}}return t},Q=e=>{let t="";if(e)for(let o of e)o&&(o.t?(t+="<"+o.t.toLocaleLowerCase()+B(o.a),j.includes(o.t)?t+="/>":(t+=">",o.c&&(t+=Q(o.c)),t+="</"+o.t.toLocaleLowerCase()+">")):t+=" "+o+" ");return t},g=e=>(e=l(e),[Q(e),e]),L=(e,t)=>{t||(t={});let o=f=>{let i="";if(f)for(let n of f)n&&(n.m?i+=o(l(n.r(t,n.m))):n.t?(i+="<"+n.t.toLocaleLowerCase()+B(n.a),j.includes(n.t)?i+="/>":(i+=">",n.c&&(i+=o(n.c)),i+="</"+n.t.toLocaleLowerCase()+">")):i+=" "+n+" ");return i},r=l(e(t));return[o(r),r]},A=e=>typeof e=="number"||typeof e=="boolean"?String(e):typeof e=="string"?'"'+e.replace(/"/g,'\\"')+'"':Array.isArray(e)?"["+e.map(t=>A(t)).join(",")+"]":typeof e=="object"?"{"+Object.keys(e).filter(r=>!r.startsWith("_")).map(r=>'"'+r+'":'+A(e[r])+'"').join(",")+"}":"null",N=e=>{let[t,o]=g(e);return[t,A(o)]},S=(e,t)=>{t||(t={});let[o,r]=L(e,t);return[o,A(r),JSON.stringify(t)]};O(["staark"],{conditional:_,factory:U,fctory:C,identifier:k,match:x,memo:h,nde:w,node:u,stringify:L,stringifyFull:S,stringifyPatch:g,stringifyPatchFull:N});})();
